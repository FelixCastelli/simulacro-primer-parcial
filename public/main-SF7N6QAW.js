import{A as Ws,B as ec,C as at,D as sn,E as of,a as q,b as Se,c as Xh,d as x,e as Jw,f as Zu,g as Xw,h as eI,i as tI,j as nI,k as ef,l as rI,m as zs,n as tf,o as Ju,p as iI,q as oI,r as nf,s as xe,t as Gr,u as on,v as Xu,w as Gs,x as rf,y as sI,z as aI}from"./chunk-UUEULNQS.js";var af=null;var sf=1,uI=Symbol("SIGNAL");function Ee(n){let e=af;return af=n,e}function cI(){return af}var uf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WA(n){if(!(ff(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===sf)){if(!n.producerMustRecompute(n)&&!lf(n)){n.dirty=!1,n.lastCleanEpoch=sf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=sf}}function cf(n){return n&&(n.nextProducerIndex=0),Ee(n)}function lI(n,e){if(Ee(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ff(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function lf(n){pf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(WA(t),r!==t.version))return!0}return!1}function df(n){if(pf(n),ff(n))for(let e=0;e<n.producerNode.length;e++)hf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function hf(n,e){if(KA(n),n.liveConsumerNode.length===1&&QA(n))for(let r=0;r<n.producerNode.length;r++)hf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pf(i),i.producerIndexOfThis[r]=e}}function ff(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function QA(n){return n.producerNode!==void 0}function YA(){throw new Error}var ZA=YA;function dI(n){ZA=n}function te(n){return typeof n=="function"}function qi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var tc=qi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Wr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Oe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof tc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{hI(o)}catch(s){e=e??[],s instanceof tc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wr(t,e)}remove(e){let{_finalizers:t}=this;t&&Wr(t,e),e instanceof n&&e._removeParent(this)}};Oe.EMPTY=(()=>{let n=new Oe;return n.closed=!0,n})();var gf=Oe.EMPTY;function nc(n){return n instanceof Oe||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function hI(n){te(n)?n():n.unsubscribe()}var zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zi={setTimeout(n,e,...t){let{delegate:r}=zi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rc(n){zi.setTimeout(()=>{let{onUnhandledError:e}=zt;if(e)e(n);else throw n})}function Ks(){}var fI=mf("C",void 0,void 0);function pI(n){return mf("E",void 0,n)}function gI(n){return mf("N",n,void 0)}function mf(n,e,t){return{kind:n,value:e,error:t}}var Kr=null;function Gi(n){if(zt.useDeprecatedSynchronousErrorHandling){let e=!Kr;if(e&&(Kr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Kr;if(Kr=null,t)throw r}}else n()}function mI(n){zt.useDeprecatedSynchronousErrorHandling&&Kr&&(Kr.errorThrown=!0,Kr.error=n)}var Qr=class extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nc(e)&&e.add(this)):this.destination=eR}static create(e,t,r){return new Mn(e,t,r)}next(e){this.isStopped?vf(gI(e),this):this._next(e)}error(e){this.isStopped?vf(pI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vf(fI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JA=Function.prototype.bind;function yf(n,e){return JA.call(n,e)}var _f=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ic(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ic(r)}else ic(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ic(t)}}},Mn=class extends Qr{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yf(e.next,o),error:e.error&&yf(e.error,o),complete:e.complete&&yf(e.complete,o)}):i=e}this.destination=new _f(i)}};function ic(n){zt.useDeprecatedSynchronousErrorHandling?mI(n):rc(n)}function XA(n){throw n}function vf(n,e){let{onStoppedNotification:t}=zt;t&&zi.setTimeout(()=>t(n,e))}var eR={closed:!0,next:Ks,error:XA,complete:Ks};var Wi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pt(n){return n}function wf(...n){return If(n)}function If(n){return n.length===0?pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=nR(t)?t:new Mn(t,r,i);return Gi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=yI(r),new r((i,o)=>{let s=new Mn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Wi](){return this}pipe(...t){return If(t)(this)}toPromise(t){return t=yI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function yI(n){var e;return(e=n??zt.Promise)!==null&&e!==void 0?e:Promise}function tR(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function nR(n){return n&&n instanceof Qr||tR(n)&&nc(n)}function Ef(n){return te(n?.lift)}function se(n){return e=>{if(Ef(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new Df(n,e,t,r,i)}var Df=class extends Qr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ki(){return se((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Qi=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ef(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return Ki()(this)}};var vI=qi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new oc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new vI}next(t){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Gi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gf:(this.currentObservers=null,o.push(t),new Oe(()=>{this.currentObservers=null,Wr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new oc(e,t),n})(),oc=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gf}};var Xe=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qs={now(){return(Qs.delegate||Date).now()},delegate:void 0};var sc=class extends Ve{constructor(e=1/0,t=1/0,r=Qs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var ac=class extends Oe{constructor(e,t){super()}schedule(e,t=0){return this}};var Ys={setInterval(n,e,...t){let{delegate:r}=Ys;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ys;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Yi=class extends ac{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ys.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ys.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Wr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zi.now=Qs.now;var Ji=class extends Zi{constructor(e,t=Zi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Zs=new Ji(Yi);var uc=class extends Yi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var cc=class extends Ji{};var Cf=new cc(uc);var gt=new ce(n=>n.complete());function _I(n){return n&&te(n.schedule)}function Tf(n){return n[n.length-1]}function wI(n){return te(Tf(n))?n.pop():void 0}function an(n){return _I(Tf(n))?n.pop():void 0}function II(n,e){return typeof Tf(n)=="number"?n.pop():e}var lc=n=>n&&typeof n.length=="number"&&typeof n!="function";function dc(n){return te(n?.then)}function hc(n){return te(n[Wi])}function fc(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function pc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gc=rR();function mc(n){return te(n?.[gc])}function yc(n){return Xw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zu(t.read());if(i)return yield Zu(void 0);yield yield Zu(r)}}finally{t.releaseLock()}})}function vc(n){return te(n?.getReader)}function Me(n){if(n instanceof ce)return n;if(n!=null){if(hc(n))return iR(n);if(lc(n))return oR(n);if(dc(n))return sR(n);if(fc(n))return EI(n);if(mc(n))return aR(n);if(vc(n))return uR(n)}throw pc(n)}function iR(n){return new ce(e=>{let t=n[Wi]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oR(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function sR(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rc)})}function aR(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function EI(n){return new ce(e=>{cR(n,e).catch(t=>e.error(t))})}function uR(n){return EI(yc(n))}function cR(n,e){var t,r,i,o;return Jw(this,void 0,void 0,function*(){try{for(t=eI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function St(n,e=0){return se((t,r)=>{t.subscribe(ue(r,i=>Dt(r,n,()=>r.next(i),e),()=>Dt(r,n,()=>r.complete(),e),i=>Dt(r,n,()=>r.error(i),e)))})}function kt(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function DI(n,e){return Me(n).pipe(kt(e),St(e))}function CI(n,e){return Me(n).pipe(kt(e),St(e))}function TI(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bI(n,e){return new ce(t=>{let r;return Dt(t,e,()=>{r=n[gc](),Dt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function _c(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{Dt(t,e,()=>{let r=n[Symbol.asyncIterator]();Dt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function SI(n,e){return _c(yc(n),e)}function AI(n,e){if(n!=null){if(hc(n))return DI(n,e);if(lc(n))return TI(n,e);if(dc(n))return CI(n,e);if(fc(n))return _c(n,e);if(mc(n))return bI(n,e);if(vc(n))return SI(n,e)}throw pc(n)}function ye(n,e){return e?AI(n,e):Me(n)}function Z(...n){let e=an(n);return ye(n,e)}function Xi(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function bf(n){return!!n&&(n instanceof ce||te(n.lift)&&te(n.subscribe))}var Nn=qi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lR}=Array;function dR(n,e){return lR(e)?n(...e):n(e)}function RI(n){return J(e=>dR(n,e))}var{isArray:hR}=Array,{getPrototypeOf:fR,prototype:pR,keys:gR}=Object;function xI(n){if(n.length===1){let e=n[0];if(hR(e))return{args:e,keys:null};if(mR(e)){let t=gR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mR(n){return n&&typeof n=="object"&&fR(n)===pR}function MI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Js(...n){let e=an(n),t=wI(n),{args:r,keys:i}=xI(n);if(r.length===0)return ye([],e);let o=new ce(yR(r,e,i?s=>MI(i,s):pt));return t?o.pipe(RI(t)):o}function yR(n,e,t=pt){return r=>{NI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)NI(e,()=>{let l=ye(n[c],e),h=!1;l.subscribe(ue(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function NI(n,e,t){n?Dt(t,n,e):e()}function PI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?b(M):c.push(M),b=M=>{o&&e.next(M),l++;let N=!1;Me(t(M,h++)).subscribe(ue(e,V=>{i?.(V),o?v(V):e.next(V)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let V=c.shift();s?Dt(e,s,()=>b(V)):b(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(ue(e,v,()=>{p=!0,m()})),()=>{a?.()}}function He(n,e,t=1/0){return te(e)?He((r,i)=>J((o,s)=>e(r,o,i,s))(Me(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>PI(r,i,n,t)))}function sr(n=1/0){return He(pt,n)}function kI(){return sr(1)}function eo(...n){return kI()(ye(n,an(n)))}function wc(n){return new ce(e=>{Me(n()).subscribe(e)})}function Sf(...n){let e=an(n),t=II(n,1/0),r=n;return r.length?r.length===1?Me(r[0]):sr(t)(ye(r,e)):gt}function et(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ar(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=Me(n(s,ar(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function OI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ue(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yr(n,e){return te(e)?He(n,e,1):He(n,1)}function ur(n){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pn(n){return n<=0?()=>gt:se((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Af(n){return J(()=>n)}function Rf(n,e=pt){return n=n??vR,se((t,r)=>{let i,o=!0;t.subscribe(ue(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function vR(n,e){return n===e}function Ic(n=_R){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _R(){return new Nn}function Xs(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ot(n,e){let t=arguments.length>=2;return r=>r.pipe(n?et((i,o)=>n(i,o,r)):pt,Pn(1),t?ur(e):Ic(()=>new Nn))}function to(n){return n<=0?()=>gt:se((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?et((i,o)=>n(i,o,r)):pt,to(1),t?ur(e):Ic(()=>new Nn))}function ea(){return se((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Zr(n,e){return se(OI(n,e,arguments.length>=2,!0))}function FI(n={}){let{connector:e=()=>new Ve,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return se((M,N)=>{l++,!p&&!h&&m();let V=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Mf(b,i))}),V.subscribe(N),!s&&l>0&&(s=new Mn({next:$=>V.next($),error:$=>{p=!0,m(),a=Mf(v,t,$),V.error($)},complete:()=>{h=!0,m(),a=Mf(v,r),V.complete()}}),Me(M).subscribe(s))})(o)}}function Mf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Mn({next:()=>{r.unsubscribe(),n()}});return Me(e(...t)).subscribe(r)}function Ec(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,FI({connector:()=>new sc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Jr(...n){let e=an(n);return se((t,r)=>{(e?eo(n,t,e):eo(n,t)).subscribe(r)})}function Fe(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,h=o++;Me(n(c,h)).subscribe(i=ue(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Dc(n,e){return te(e)?Fe(()=>n,e):Fe(()=>n)}function Nf(n){return se((e,t)=>{Me(n).subscribe(ue(t,()=>t.complete(),Ks)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pt}var ee=class extends Error{constructor(e,t){super(Dp(e,t)),this.code=e}};function Dp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function da(n){return{toString:n}.toString()}var Cc="__parameters__";function wR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function yE(n,e,t){return da(()=>{let r=wR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Cc)?c[Cc]:Object.defineProperty(c,Cc,{value:[]})[Cc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function At(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(At).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function LI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var IR=De({__forward_ref__:De});function vE(n){return n.__forward_ref__=vE,n.toString=function(){return At(this())},n}function Lt(n){return _E(n)?n():n}function _E(n){return typeof n=="function"&&n.hasOwnProperty(IR)&&n.__forward_ref__===vE}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vo(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qc(n){return VI(n,IE)||VI(n,EE)}function wE(n){return Qc(n)!==null}function VI(n,e){return n.hasOwnProperty(e)?n[e]:null}function ER(n){let e=n&&(n[IE]||n[EE]);return e||null}function jI(n){return n&&(n.hasOwnProperty(UI)||n.hasOwnProperty(DR))?n[UI]:null}var IE=De({\u0275prov:De}),UI=De({\u0275inj:De}),EE=De({ngInjectableDef:De}),DR=De({ngInjectorDef:De}),z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DE(n){return n&&!!n.\u0275providers}var CR=De({\u0275cmp:De}),TR=De({\u0275dir:De}),bR=De({\u0275pipe:De}),SR=De({\u0275mod:De}),Mc=De({\u0275fac:De}),na=De({__NG_ELEMENT_ID__:De}),BI=De({__NG_ENV_ID__:De});function AR(n){return typeof n=="string"?n:n==null?"":String(n)}function RR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():AR(n)}function xR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function Cp(n,e){throw new ee(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Bf;function CE(){return Bf}function Ft(n){let e=Bf;return Bf=n,e}function TE(n,e,t){let r=Qc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;Cp(n,"Injector")}var MR={},ra=MR,$f="__NG_DI_FLAG__",Nc="ngTempTokenPath",NR="ngTokenPath",PR=/\n/gm,kR="\u0275",$I="__source",so;function OR(){return so}function cr(n){let e=so;return so=n,e}function FR(n,e=ae.Default){if(so===void 0)throw new ee(-203,!1);return so===null?TE(n,void 0,e):so.get(n,e&ae.Optional?null:void 0,e)}function B(n,e=ae.Default){return(CE()||FR)(Lt(n),e)}function F(n,e=ae.Default){return B(n,Yc(e))}function Yc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hf(n){let e=[];for(let t=0;t<n.length;t++){let r=Lt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=LR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function bE(n,e){return n[$f]=e,n.prototype[$f]=e,n}function LR(n){return n[$f]}function VR(n,e,t,r){let i=n[Nc];throw e[$I]&&i.unshift(e[$I]),n.message=jR(`
`+n.message,i,t,r),n[NR]=i,n[Nc]=null,n}function jR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==kR?n.slice(2):n;let i=At(e);if(Array.isArray(e))i=e.map(At).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(PR,`
  `)}`}var ct=bE(yE("Optional"),8);var SE=bE(yE("SkipSelf"),4);function uo(n,e){let t=n.hasOwnProperty(Mc);return t?n[Mc]:null}function Tp(n,e){n.forEach(t=>Array.isArray(t)?Tp(t,e):e(t))}function AE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ia={},un=[],co=new z(""),RE=new z("",-1),xE=new z(""),kc=class{get(e,t=ra){if(t===ra){let r=new Error(`NullInjectorError: No provider for ${At(e)}!`);throw r.name="NullInjectorError",r}return t}},ME=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ME||{}),ln=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ln||{}),hr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(hr||{});function UR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function qf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];$R(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function BR(n){return n===3||n===4||n===6}function $R(n){return n.charCodeAt(0)===64}function bp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?HI(n,t,i,null,e[++r]):HI(n,t,i,null,null))}}return n}function HI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var NE="ng-template";function HR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&UR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Sp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Sp(n){return n.type===4&&n.value!==NE}function qR(n,e,t){let r=n.type===4&&!t?NE:n.value;return e===r}function zR(n,e,t){let r=4,i=n.attrs,o=i!==null?KR(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Gt(r)&&!Gt(c))return!1;if(s&&Gt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!qR(n,c,t)||c===""&&e.length===1){if(Gt(r))return!1;s=!0}}else if(r&8){if(i===null||!HR(n,i,c,t)){if(Gt(r))return!1;s=!0}}else{let l=e[++a],h=GR(c,i,Sp(n),t);if(h===-1){if(Gt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Gt(r))return!1;s=!0}}}}return Gt(r)||s}function Gt(n){return(n&1)===0}function GR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QR(e,n)}function WR(n,e,t=!1){for(let r=0;r<e.length;r++)if(zR(n,e[r],t))return!0;return!1}function KR(n){for(let e=0;e<n.length;e++){let t=n[e];if(BR(t))return e}return n.length}function QR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function qI(n,e){return n?":not("+e.trim()+")":e}function YR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gt(s)&&(e+=qI(o,i),i=""),r=s,o=o||!Gt(r);t++}return i!==""&&(e+=qI(o,i)),e}function ZR(n){return n.map(YR).join(",")}function JR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Gt(i))break;i=o}r++}return{attrs:e,classes:t}}function _o(n){return da(()=>{let e=LE(n),t=Se(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ME.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ln.Emulated,styles:n.styles||un,_:null,schemas:n.schemas||null,tView:null,id:""});VE(t);let r=n.dependencies;return t.directiveDefs=GI(r,!1),t.pipeDefs=GI(r,!0),t.id=tx(t),t})}function XR(n){return fr(n)||PE(n)}function ex(n){return n!==null}function wo(n){return da(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zI(n,e){if(n==null)return ia;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=hr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==hr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ap(n){return da(()=>{let e=LE(n);return VE(e),e})}function fr(n){return n[CR]||null}function PE(n){return n[TR]||null}function kE(n){return n[bR]||null}function OE(n){let e=fr(n)||PE(n)||kE(n);return e!==null?e.standalone:!1}function FE(n,e){let t=n[SR]||null;if(!t&&e===!0)throw new Error(`Type ${At(n)} does not have '\u0275mod' property.`);return t}function LE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ia,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zI(n.inputs,e),outputs:zI(n.outputs),debugInfo:null}}function VE(n){n.features?.forEach(e=>e(n))}function GI(n,e){if(!n)return null;let t=e?kE:XR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ex)}function tx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fn(n){return{\u0275providers:n}}function nx(...n){return{\u0275providers:jE(!0,n),\u0275fromNgModule:!0}}function jE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Tp(e,s=>{let a=s;zf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UE(i,o),t}function UE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Rp(i,o=>{e(o,r)})}}function zf(n,e,t,r){if(n=Lt(n),!n)return!1;let i=null,o=jI(n),s=!o&&fr(n);if(!o&&!s){let c=n.ngModule;if(o=jI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)zf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Tp(o.imports,h=>{zf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&UE(l,e)}if(!a){let l=uo(i)||(()=>new i);e({provide:i,useFactory:l,deps:un},i),e({provide:xE,useValue:i,multi:!0},i),e({provide:co,useValue:()=>B(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Rp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Rp(n,e){for(let t of n)DE(t)&&(t=t.\u0275providers),Array.isArray(t)?Rp(t,e):e(t)}var rx=De({provide:String,useValue:De});function BE(n){return n!==null&&typeof n=="object"&&rx in n}function ix(n){return!!(n&&n.useExisting)}function ox(n){return!!(n&&n.useFactory)}function Gf(n){return typeof n=="function"}var Zc=new z(""),bc={},sx={},Pf;function xp(){return Pf===void 0&&(Pf=new kc),Pf}var Rt=class{},oa=class extends Rt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Kf(e,s=>this.processProvider(s)),this.records.set(RE,no(void 0,this)),i.has("environment")&&this.records.set(Rt,no(void 0,this));let o=this.records.get(Zc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xE,un,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=cr(this),r=Ft(void 0),i;try{return e()}finally{cr(t),Ft(r)}}get(e,t=ra,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(BI))return e[BI](this);r=Yc(r);let i,o=cr(this),s=Ft(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=hx(e)&&Qc(e);l&&this.injectableDefInScope(l)?c=no(Wf(e),bc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?xp():this.parent;return t=r&ae.Optional&&t===ra?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Nc]=a[Nc]||[]).unshift(At(e)),o)throw a;return VR(a,e,"R3InjectorError",this.source)}else throw a}finally{Ft(s),cr(o)}}resolveInjectorInitializers(){let e=Ee(null),t=cr(this),r=Ft(void 0),i;try{let o=this.get(co,un,ae.Self);for(let s of o)s()}finally{cr(t),Ft(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(At(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Lt(e);let t=Gf(e)?e:Lt(e&&e.provide),r=ux(e);if(!Gf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=no(void 0,bc,!0),i.factory=()=>Hf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ee(null);try{return t.value===bc&&(t.value=sx,t.value=t.factory()),typeof t.value=="object"&&t.value&&dx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Lt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Wf(n){let e=Qc(n),t=e!==null?e.factory:uo(n);if(t!==null)return t;if(n instanceof z)throw new ee(204,!1);if(n instanceof Function)return ax(n);throw new ee(204,!1)}function ax(n){if(n.length>0)throw new ee(204,!1);let t=ER(n);return t!==null?()=>t.factory(n):()=>new n}function ux(n){if(BE(n))return no(void 0,n.useValue);{let e=cx(n);return no(e,bc)}}function cx(n,e,t){let r;if(Gf(n)){let i=Lt(n);return uo(i)||Wf(i)}else if(BE(n))r=()=>Lt(n.useValue);else if(ox(n))r=()=>n.useFactory(...Hf(n.deps||[]));else if(ix(n))r=()=>B(Lt(n.useExisting));else{let i=Lt(n&&(n.useClass||n.provide));if(lx(n))r=()=>new i(...Hf(n.deps));else return uo(i)||Wf(i)}return r}function no(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function lx(n){return!!n.deps}function dx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hx(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function Kf(n,e){for(let t of n)Array.isArray(t)?Kf(t,e):t&&DE(t)?Kf(t.\u0275providers,e):e(t)}function pn(n,e){n instanceof oa&&n.assertNotDestroyed();let t,r=cr(n),i=Ft(void 0);try{return e()}finally{cr(r),Ft(i)}}function $E(){return CE()!==void 0||OR()!=null}function fx(n){if(!$E())throw new ee(-203,!1)}function px(n){return typeof n=="function"}var Fn=0,de=1,re=2,yt=3,Wt=4,Qt=5,Oc=6,WI=7,pr=8,lo=9,kn=10,dn=11,sa=12,KI=13,ha=14,hn=15,aa=16,ro=17,Jc=18,Xc=19,HE=20,dr=21,kf=22,Vt=23,ti=25,qE=1;var ni=7,Fc=8,Lc=9,jt=10,Vc=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vc||{});function Xr(n){return Array.isArray(n)&&typeof n[qE]=="object"}function Ln(n){return Array.isArray(n)&&n[qE]===!0}function zE(n){return(n.flags&4)!==0}function Mp(n){return n.componentOffset>-1}function gx(n){return(n.flags&1)===1}function fa(n){return!!n.template}function Qf(n){return(n[re]&512)!==0}var Yf=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function GE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function el(){return WE}function WE(n){return n.type.prototype.ngOnChanges&&(n.setInput=yx),mx}el.ngInherit=!0;function mx(){let n=QE(this),e=n?.current;if(e){let t=n.previous;if(t===ia)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function yx(n,e,t,r,i){let o=this.declaredInputs[r],s=QE(n)||vx(n,{previous:ia,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Yf(l&&l.currentValue,t,c===ia),GE(n,e,i,t)}var KE="__ngSimpleChanges__";function QE(n){return n[KE]||null}function vx(n,e){return n[KE]=e}var QI=null;var lr=function(n,e,t){QI?.(n,e,t)},_x="svg",wx="math";function gr(n){for(;Array.isArray(n);)n=n[Fn];return n}function Vn(n,e){return gr(e[n.index])}function Ix(n,e){return n.data[e]}function pa(n,e){let t=e[n];return Xr(t)?t:t[Fn]}function Np(n){return(n[re]&128)===128}function Ex(n){return Ln(n[yt])}function YI(n,e){return e==null?null:n[e]}function YE(n){n[ro]=0}function ZE(n){n[re]&1024||(n[re]|=1024,Np(n)&&nl(n))}function tl(n){return!!(n[re]&9216||n[Vt]?.dirty)}function Zf(n){n[kn].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),tl(n)&&nl(n)}function nl(n){n[kn].changeDetectionScheduler?.notify(0);let e=ri(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!Np(e)));)e=ri(e)}function JE(n,e){if((n[re]&256)===256)throw new ee(911,!1);n[dr]===null&&(n[dr]=[]),n[dr].push(e)}function Dx(n,e){if(n[dr]===null)return;let t=n[dr].indexOf(e);t!==-1&&n[dr].splice(t,1)}function ri(n){let e=n[yt];return Ln(e)?e[yt]:e}var we={lFrame:aD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var XE=!1;function Cx(){return we.lFrame.elementDepthCount}function Tx(){we.lFrame.elementDepthCount++}function bx(){we.lFrame.elementDepthCount--}function eD(){return we.bindingsEnabled}function Sx(){return we.skipHydrationRootTNode!==null}function Ax(n){return we.skipHydrationRootTNode===n}function Rx(){we.skipHydrationRootTNode=null}function Kt(){return we.lFrame.lView}function Pp(){return we.lFrame.tView}function jn(){let n=tD();for(;n!==null&&n.type===64;)n=n.parent;return n}function tD(){return we.lFrame.currentTNode}function xx(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function rl(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function nD(){return we.lFrame.isParent}function Mx(){we.lFrame.isParent=!1}function rD(){return XE}function ZI(n){XE=n}function Nx(n){return we.lFrame.bindingIndex=n}function Px(){return we.lFrame.inI18n}function kx(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jf(e)}function Ox(){return we.lFrame.currentDirectiveIndex}function Jf(n){we.lFrame.currentDirectiveIndex=n}function iD(n){we.lFrame.currentQueryIndex=n}function Fx(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[Qt]:null}function oD(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=Fx(o),i===null||(o=o[ha],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=sD();return r.currentTNode=e,r.lView=n,!0}function kp(n){let e=sD(),t=n[de];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sD(){let n=we.lFrame,e=n===null?null:n.child;return e===null?aD(n):e}function aD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function uD(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cD=uD;function Op(){let n=uD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Lx(){return we.lFrame.selectedIndex}function ii(n){we.lFrame.selectedIndex=n}function Vx(){return we.lFrame.currentNamespace}var lD=!0;function dD(){return lD}function hD(n){lD=n}function jx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=WE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function fD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Sc(n,e,t){pD(n,e,3,t)}function Ac(n,e,t,r){(n[re]&3)===t&&pD(n,e,t,r)}function Of(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function pD(n,e,t,r){let i=r!==void 0?n[ro]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ro]+=65536),(a<o||o==-1)&&(Ux(n,t,e,c),n[ro]=(n[ro]&4294901760)+c+2),c++}function JI(n,e){lr(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),lr(5,n,e)}}function Ux(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[re]>>14<n[ro]>>16&&(n[re]&3)===e&&(n[re]+=16384,JI(a,o)):JI(a,o)}var ao=-1,ua=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Bx(n){return n instanceof ua}function $x(n){return(n.flags&8)!==0}function Hx(n){return(n.flags&16)!==0}var Ff={},Xf=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Yc(r);let i=this.injector.get(e,Ff,r);return i!==Ff||t===Ff?i:this.parentInjector.get(e,t,r)}};function gD(n){return n!==ao}function jc(n){return n&32767}function qx(n){return n>>16}function Uc(n,e){let t=qx(n),r=e;for(;t>0;)r=r[ha],t--;return r}var ep=!0;function XI(n){let e=ep;return ep=n,e}var zx=256,mD=zx-1,yD=5,Gx=0,cn={};function Wx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(na)&&(r=t[na]),r==null&&(r=t[na]=Gx++);let i=r&mD,o=1<<i;e.data[n+(i>>yD)]|=o}function vD(n,e){let t=_D(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Lf(r.data,n),Lf(e,null),Lf(r.blueprint,null));let i=Fp(n,e),o=n.injectorIndex;if(gD(i)){let s=jc(i),a=Uc(i,e),c=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Lf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _D(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Fp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=CD(i),r===null)return ao;if(t++,i=i[ha],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ao}function Kx(n,e,t){Wx(n,e,t)}function wD(n,e,t){if(t&ae.Optional||n!==void 0)return n;Cp(e,"NodeInjector")}function ID(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[lo],o=Ft(void 0);try{return i?i.get(e,r,t&ae.Optional):TE(e,r,t&ae.Optional)}finally{Ft(o)}}return wD(r,e,t)}function ED(n,e,t,r=ae.Default,i){if(n!==null){if(e[re]&2048&&!(r&ae.Self)){let s=Xx(n,e,t,r,cn);if(s!==cn)return s}let o=DD(n,e,t,r,cn);if(o!==cn)return o}return ID(e,t,r,i)}function DD(n,e,t,r,i){let o=Zx(t);if(typeof o=="function"){if(!oD(e,n,r))return r&ae.Host?wD(i,t,r):ID(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))Cp(t);else return s}finally{cD()}}else if(typeof o=="number"){let s=null,a=_D(n,e),c=ao,l=r&ae.Host?e[hn][Qt]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Fp(n,e):e[a+8],c===ao||!tE(r,!1)?a=-1:(s=e[de],a=jc(c),e=Uc(c,e)));a!==-1;){let h=e[de];if(eE(o,a,h.data)){let p=Qx(a,e,t,s,r,l);if(p!==cn)return p}c=e[a+8],c!==ao&&tE(r,e[de].data[a+8]===l)&&eE(o,a,e)?(s=h,a=jc(c),e=Uc(c,e)):a=-1}}return i}function Qx(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],c=r==null?Mp(a)&&ep:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=Yx(a,s,t,c,l);return h!==null?ca(e,s,h,a):cn}function Yx(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&fa(v)&&v.type===t)return c}return null}function ca(n,e,t,r){let i=n[t],o=e.data;if(Bx(i)){let s=i;s.resolving&&xR(RR(o[t]));let a=XI(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Ft(s.injectImpl):null,h=oD(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&jx(t,o[t],e)}finally{l!==null&&Ft(l),XI(a),s.resolving=!1,cD()}}return i}function Zx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(na)?n[na]:void 0;return typeof e=="number"?e>=0?e&mD:Jx:e}function eE(n,e,t){let r=1<<n;return!!(t[e+(n>>yD)]&r)}function tE(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var ei=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ED(this._tNode,this._lView,e,Yc(r),t)}};function Jx(){return new ei(jn(),Kt())}function Lp(n){return da(()=>{let e=n.prototype.constructor,t=e[Mc]||tp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Mc]||tp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tp(n){return _E(n)?()=>{let e=tp(Lt(n));return e&&e()}:uo(n)}function Xx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!(s[re]&512);){let a=DD(o,s,t,r|ae.Self,cn);if(a!==cn)return a;let c=o.parent;if(!c){let l=s[HE];if(l){let h=l.get(t,cn,r);if(h!==cn)return h}c=CD(s),s=s[ha]}o=c}return i}function CD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[Qt]:null}function nE(n,e=null,t=null,r){let i=TD(n,e,t,r);return i.resolveInjectorInitializers(),i}function TD(n,e=null,t=null,r,i=new Set){let o=[t||un,nx(n)];return r=r||(typeof n=="object"?void 0:At(n)),new oa(o,e||xp(),r||null,i)}var ut=class n{static{this.THROW_IF_NOT_FOUND=ra}static{this.NULL=new kc}static create(e,t){if(Array.isArray(e))return nE({name:""},t,e,"");{let r=e.name??"";return nE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=W({token:n,providedIn:"any",factory:()=>B(RE)})}static{this.__NG_ELEMENT_ID__=-1}};var eM=new z("");eM.__NG_ELEMENT_ID__=n=>{let e=jn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new ee(204,!1)};var tM="ngOriginalError";function Vf(n){return n[tM]}var bD=!0,Vp=(()=>{class n{static{this.__NG_ELEMENT_ID__=nM}static{this.__NG_ENV_ID__=t=>t}}return n})(),np=class extends Vp{constructor(e){super(),this._lView=e}onDestroy(e){return JE(this._lView,e),()=>Dx(this._lView,e)}};function nM(){return new np(Kt())}var Io=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})();var rp=class extends Ve{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,$E()&&(this.destroyRef=F(Vp,{optional:!0})??void 0,this.pendingTasks=F(Io,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Oe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},mt=rp;function Bc(...n){}function SD(n){let e,t;function r(){n=Bc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rE(n){return queueMicrotask(()=>n()),()=>{n=Bc}}var jp="isAngularZone",$c=jp+"_ID",rM=0,he=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mt(!1),this.onMicrotaskEmpty=new mt(!1),this.onStable=new mt(!1),this.onError=new mt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=bD}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,sM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,iM,Bc,Bc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},iM={};function Up(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){SD(()=>{n.callbackScheduled=!1,ip(n),n.isCheckStableRunning=!0,Up(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ip(n)}function sM(n){let e=()=>{oM(n)},t=rM++;n._inner=n._inner.fork({name:"angular",properties:{[jp]:!0,[$c]:t,[$c+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(aM(c))return r.invokeTask(o,s,a,c);try{return iE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),oE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return iE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uM(c)&&e(),oE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ip(n),Up(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ip(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function oE(n){n._nesting--,Up(n)}var op=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mt,this.onMicrotaskEmpty=new mt,this.onStable=new mt,this.onError=new mt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function aM(n){return AD(n,"__ignore_ng_zone__")}function uM(n){return AD(n,"__scheduler_tick__")}function AD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var On=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Vf(e);for(;t&&Vf(t);)t=Vf(t);return t||null}},cM=new z("",{providedIn:"root",factory:()=>{let n=F(he),e=F(On);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function lM(){return Bp(jn(),Kt())}function Bp(n,e){return new il(Vn(n,e))}var il=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lM}}return n})();function RD(n){return(n.flags&128)===128}var xD=new Map,dM=0;function hM(){return dM++}function fM(n){xD.set(n[Xc],n)}function sp(n){xD.delete(n[Xc])}var sE="__ngContext__";function ho(n,e){Xr(e)?(n[sE]=e[Xc],fM(e)):n[sE]=e}function MD(n){return PD(n[sa])}function ND(n){return PD(n[Wt])}function PD(n){for(;n!==null&&!Ln(n);)n=n[Wt];return n}var ap;function kD(n){ap=n}function pM(){if(ap!==void 0)return ap;if(typeof document<"u")return document;throw new ee(210,!1)}var $p=new z("",{providedIn:"root",factory:()=>gM}),gM="ng",Hp=new z(""),vt=new z("",{providedIn:"platform",factory:()=>"unknown"});var qp=new z("",{providedIn:"root",factory:()=>pM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mM="h",yM="b";var vM=()=>null;function zp(n,e,t=!1){return vM(n,e,t)}var OD=!1,_M=new z("",{providedIn:"root",factory:()=>OD});function FD(n){return n instanceof Function?n():n}function wM(n){return(n??F(ut)).get(vt)==="browser"}var oi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(oi||{}),IM;function Gp(n,e){return IM(n,e)}function io(n,e,t,r,i){if(r!=null){let o,s=!1;Ln(r)?o=r:Xr(r)&&(s=!0,r=r[Fn]);let a=gr(r);n===0&&t!==null?i==null?BD(e,t,a):Hc(e,t,a,i||null,!0):n===1&&t!==null?Hc(e,t,a,i||null,!0):n===2?OM(e,a,s):n===3&&e.destroyNode(a),o!=null&&LM(e,n,o,t,i)}}function EM(n,e){return n.createText(e)}function LD(n,e,t){return n.createElement(e,t)}function DM(n,e){VD(n,e),e[Fn]=null,e[Qt]=null}function CM(n,e,t,r,i,o){r[Fn]=i,r[Qt]=e,ol(n,r,t,1,i,o)}function VD(n,e){e[kn].changeDetectionScheduler?.notify(9),ol(n,e,e[dn],2,null,null)}function TM(n){let e=n[sa];if(!e)return jf(n[de],n);for(;e;){let t=null;if(Xr(e))t=e[sa];else{let r=e[jt];r&&(t=r)}if(!t){for(;e&&!e[Wt]&&e!==n;)Xr(e)&&jf(e[de],e),e=e[yt];e===null&&(e=n),Xr(e)&&jf(e[de],e),t=e&&e[Wt]}e=t}}function bM(n,e,t,r){let i=jt+r,o=t.length;r>0&&(t[i-1][Wt]=e),r<o-jt?(e[Wt]=t[i],AE(t,jt+r,e)):(t.push(e),e[Wt]=null),e[yt]=t;let s=e[aa];s!==null&&t!==s&&jD(s,e);let a=e[Jc];a!==null&&a.insertView(n),Zf(e),e[re]|=128}function jD(n,e){let t=n[Lc],r=e[yt];if(Xr(r))n[re]|=Vc.HasTransplantedViews;else{let i=r[yt][hn];e[hn]!==i&&(n[re]|=Vc.HasTransplantedViews)}t===null?n[Lc]=[e]:t.push(e)}function Wp(n,e){let t=n[Lc],r=t.indexOf(e);t.splice(r,1)}function up(n,e){if(n.length<=jt)return;let t=jt+e,r=n[t];if(r){let i=r[aa];i!==null&&i!==n&&Wp(i,r),e>0&&(n[t-1][Wt]=r[Wt]);let o=Pc(n,jt+e);DM(r[de],r);let s=o[Jc];s!==null&&s.detachView(o[de]),r[yt]=null,r[Wt]=null,r[re]&=-129}return r}function UD(n,e){if(!(e[re]&256)){let t=e[dn];t.destroyNode&&ol(n,e,t,3,null,null),TM(e)}}function jf(n,e){if(e[re]&256)return;let t=Ee(null);try{e[re]&=-129,e[re]|=256,e[Vt]&&df(e[Vt]),AM(n,e),SM(n,e),e[de].type===1&&e[dn].destroy();let r=e[aa];if(r!==null&&Ln(e[yt])){r!==e[yt]&&Wp(r,e);let i=e[Jc];i!==null&&i.detachView(n)}sp(e)}finally{Ee(t)}}function SM(n,e){let t=n.cleanup,r=e[WI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[WI]=null);let i=e[dr];if(i!==null){e[dr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function AM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ua)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];lr(4,a,c);try{c.call(a)}finally{lr(5,a,c)}}else{lr(4,i,o);try{o.call(i)}finally{lr(5,i,o)}}}}}function RM(n,e,t){return xM(n,e.parent,t)}function xM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===ln.None||o===ln.Emulated)return null}return Vn(r,t)}}function Hc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function BD(n,e,t){n.appendChild(e,t)}function aE(n,e,t,r,i){r!==null?Hc(n,e,t,r,i):BD(n,e,t)}function $D(n,e){return n.parentNode(e)}function MM(n,e){return n.nextSibling(e)}function NM(n,e,t){return kM(n,e,t)}function PM(n,e,t){return n.type&40?Vn(n,t):null}var kM=PM,uE;function HD(n,e,t,r){let i=RM(n,r,e),o=e[dn],s=r.parent||e[Qt],a=NM(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)aE(o,i,t[c],a,!1);else aE(o,i,t,a,!1);uE!==void 0&&uE(o,r,e,t,i)}function ta(n,e){if(e!==null){let t=e.type;if(t&3)return Vn(e,n);if(t&4)return cp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ta(n,r);{let i=n[e.index];return Ln(i)?cp(-1,i):gr(i)}}else{if(t&128)return ta(n,e.next);if(t&32)return Gp(e,n)()||gr(n[e.index]);{let r=qD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ri(n[hn]);return ta(i,r)}else return ta(n,e.next)}}}return null}function qD(n,e){if(e!==null){let r=n[hn][Qt],i=e.projection;return r.projection[i]}return null}function cp(n,e){let t=jt+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return ta(r,i)}return e[ni]}function OM(n,e,t){n.removeChild(null,e,t)}function Kp(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ho(gr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Kp(n,e,t.child,r,i,o,!1),io(e,n,i,a,o);else if(c&32){let l=Gp(t,r),h;for(;h=l();)io(e,n,i,h,o);io(e,n,i,a,o)}else c&16?FM(n,e,r,t,i,o):io(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ol(n,e,t,r,i,o){Kp(t,r,n.firstChild,e,i,o,!1)}function FM(n,e,t,r,i,o){let s=t[hn],c=s[Qt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];io(e,n,i,h,o)}else{let l=c,h=s[yt];RD(r)&&(l.flags|=128),Kp(n,e,l,h,i,o,!0)}}function LM(n,e,t,r,i){let o=t[ni],s=gr(t);o!==s&&io(e,n,r,o,i);for(let a=jt;a<t.length;a++){let c=t[a];ol(c[de],c,n,e,r,o)}}function VM(n,e,t){n.setAttribute(e,"style",t)}function zD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function GD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&qf(n,e,r),i!==null&&zD(n,e,i),o!==null&&VM(n,e,o)}var WD={};function jM(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Sc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ac(e,o,0,t)}ii(t)}function Qp(n,e=ae.Default){let t=Kt();if(t===null)return B(n,e);let r=jn();return ED(r,t,Lt(n),e)}function KD(){let n="invalid";throw new Error(n)}function QD(n,e,t,r,i,o){let s=Ee(null);try{let a=null;i&hr.SignalBased&&(a=e[r][uI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&hr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):GE(e,a,r,o)}finally{Ee(s)}}function UM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ii(~i);else{let o=i,s=t[++r],a=t[++r];kx(s,o);let c=e[o];a(2,c)}}}finally{ii(-1)}}function Yp(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Fn]=i,p[re]=r|4|128|8|64,(l!==null||n&&n[re]&2048)&&(p[re]|=2048),YE(p),p[yt]=p[ha]=n,p[pr]=t,p[kn]=s||n&&n[kn],p[dn]=a||n&&n[dn],p[lo]=c||n&&n[lo]||null,p[Qt]=o,p[Xc]=hM(),p[Oc]=h,p[HE]=l,p[hn]=e.type==2?n[hn]:p,p}function Zp(n,e,t,r,i){let o=n.data[e];if(o===null)o=BM(n,e,t,r,i),Px()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=xx();o.injectorIndex=s===null?-1:s.injectorIndex}return rl(o,!0),o}function BM(n,e,t,r,i){let o=tD(),s=nD(),a=s?o:o&&o.parent,c=n.data[e]=KM(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function YD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ZD(n,e,t,r,i){let o=Lx(),s=r&2;try{ii(-1),s&&e.length>ti&&jM(n,e,ti,!1),lr(s?2:0,i),t(r,i)}finally{ii(o),lr(s?3:1,i)}}function JD(n,e,t){if(zE(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ee(r)}}}function $M(n,e,t){eD()&&(XM(n,e,t,Vn(t,e)),(t.flags&64)===64&&nC(n,e,t))}function HM(n,e,t=Vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function XD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=eC(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function eC(n,e,t,r,i,o,s,a,c,l,h){let p=ti+r,m=p+i,v=qM(p,m),b=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function qM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:WD);return t}function zM(n,e,t,r){let o=r.get(_M,OD)||t===ln.ShadowDom,s=n.selectRootElement(e,o);return GM(s),s}function GM(n){WM(n)}var WM=()=>null;function KM(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Sx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=hr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?lE(r,t,l,a,c):lE(r,t,l,a)}return r}function lE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function QM(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=cE(0,p.inputs,h,c,v),l=cE(1,p.outputs,h,l,b);let M=c!==null&&s!==null&&!Sp(e)?uN(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function YM(n,e,t,r){if(eD()){let i=r===null?null:{"":-1},o=tN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&tC(n,e,t,s,i,a),i&&nN(t,r,i)}t.mergedAttrs=bp(t.mergedAttrs,t.attrs)}function tC(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Kx(vD(t,e),n,r[l].type);iN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=YD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=bp(t.mergedAttrs,h.hostAttrs),oN(n,t,e,c,h),rN(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}QM(n,t,o)}function ZM(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;JM(s)!=a&&s.push(a),s.push(t,r,o)}}function JM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XM(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Mp(t)&&sN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vD(t,e),ho(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=ca(e,n,a,t);if(ho(l,e),s!==null&&aN(e,a-i,l,c,t,s),fa(c)){let h=pa(t.index,e);h[pr]=ca(e,n,a,t)}}}function nC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Ox();try{ii(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Jf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eN(c,l)}}finally{ii(-1),Jf(s)}}function eN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(WR(e,s.selectors,!1))if(r||(r=[]),fa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;lp(n,e,c)}else r.unshift(s),lp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function lp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}}function rN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;fa(e)&&(t[""]=n)}}function iN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function oN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=uo(i.type,!0)),s=new ua(o,fa(i),Qp);n.blueprint[r]=s,t[r]=s,ZM(n,e,r,YD(n,t,i.hostVars,WD),i)}function sN(n,e,t){let r=Vn(e,n),i=XD(t),o=n[kn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Jp(n,Yp(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function aN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];QD(r,t,c,l,h,p)}}function uN(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function cN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rC(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];iD(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function Jp(n,e){return n[sa]?n[KI][Wt]=e:n[sa]=e,n[KI]=e,e}function dp(n,e,t){iD(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function lN(n,e){let t=n[lo],r=t?t.get(On,null):null;r&&r.handleError(e)}function iC(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];QD(h,l,r,a,c,i)}}function dN(n,e){let t=pa(e,n),r=t[de];hN(r,t);let i=t[Fn];i!==null&&t[Oc]===null&&(t[Oc]=zp(i,t[lo])),oC(r,t,t[pr])}function hN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function oC(n,e,t){kp(e);try{let r=n.viewQuery;r!==null&&dp(1,r,t);let i=n.template;i!==null&&ZD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Jc]?.finishViewCreation(n),n.staticContentQueries&&rC(n,e),n.staticViewQueries&&dp(2,n.viewQuery,t);let o=n.components;o!==null&&fN(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,Op()}}function fN(n,e){for(let t=0;t<e.length;t++)dN(n,e[t])}function dE(n,e){return!e||e.firstChild===null||RD(n)}function pN(n,e,t,r=!0){let i=e[de];if(bM(i,e,n,t),r){let s=cp(t,n),a=e[dn],c=$D(a,n[ni]);c!==null&&CM(i,n[Qt],a,e,c,s)}let o=e[Oc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(gr(o)),Ln(o)&&gN(o,r);let s=t.type;if(s&8)qc(n,e,t.child,r);else if(s&32){let a=Gp(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=qD(e,t);if(Array.isArray(a))r.push(...a);else{let c=ri(e[hn]);qc(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function gN(n,e){for(let t=jt;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&qc(r[de],r,i,e)}n[ni]!==n[Fn]&&e.push(n[ni])}var sC=[];function mN(n){return n[Vt]??yN(n)}function yN(n){let e=sC.pop()??Object.create(_N);return e.lView=n,e}function vN(n){n.lView[Vt]!==n&&(n.lView=null,sC.push(n))}var _N=Se(q({},uf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{nl(n.lView)},consumerOnSignalRead(){this.lView[Vt]=this}});function wN(n){let e=n[Vt]??Object.create(IN);return e.lView=n,e}var IN=Se(q({},uf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ri(n.lView);for(;e&&!aC(e[de]);)e=ri(e);e&&ZE(e)},consumerOnSignalRead(){this.lView[Vt]=this}});function aC(n){return n.type!==2}var EN=100;function uC(n,e=!0,t=0){let r=n[kn],i=r.rendererFactory,o=!1;o||i.begin?.();try{DN(n,t)}catch(s){throw e&&lN(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function DN(n,e){let t=rD();try{ZI(!0),hp(n,e);let r=0;for(;tl(n);){if(r===EN)throw new ee(103,!1);r++,hp(n,1)}}finally{ZI(t)}}function CN(n,e,t,r){let i=e[re];if((i&256)===256)return;let o=!1,s=!1;!o&&e[kn].inlineEffectRunner?.flush(),kp(e);let a=!0,c=null,l=null;o||(aC(n)?(l=mN(e),c=cf(l)):cI()===null?(a=!1,l=wN(e),c=cf(l)):e[Vt]&&(df(e[Vt]),e[Vt]=null));try{YE(e),Nx(n.bindingStartIndex),t!==null&&ZD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Sc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Ac(e,v,0,null),Of(e,0)}if(s||TN(e),cC(e,0),n.contentQueries!==null&&rC(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Sc(e,v)}else{let v=n.contentHooks;v!==null&&Ac(e,v,1),Of(e,1)}UM(n,e);let p=n.components;p!==null&&dC(e,p,0);let m=n.viewQuery;if(m!==null&&dp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Sc(e,v)}else{let v=n.viewHooks;v!==null&&Ac(e,v,2),Of(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[kf]){for(let v of e[kf])v();e[kf]=null}o||(e[re]&=-73)}catch(h){throw o||nl(e),h}finally{l!==null&&(lI(l,c),a&&vN(l)),Op()}}function cC(n,e){for(let t=MD(n);t!==null;t=ND(t))for(let r=jt;r<t.length;r++){let i=t[r];lC(i,e)}}function TN(n){for(let e=MD(n);e!==null;e=ND(e)){if(!(e[re]&Vc.HasTransplantedViews))continue;let t=e[Lc];for(let r=0;r<t.length;r++){let i=t[r];ZE(i)}}}function bN(n,e,t){let r=pa(e,n);lC(r,t)}function lC(n,e){Np(n)&&hp(n,e)}function hp(n,e){let r=n[de],i=n[re],o=n[Vt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&lf(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)CN(r,n,r.template,n[pr]);else if(i&8192){cC(n,1);let a=r.components;a!==null&&dC(n,a,1)}}function dC(n,e,t){for(let r=0;r<e.length;r++)bN(n,e[r],t)}function hC(n,e){let t=rD()?64:1088;for(n[kn].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=ri(n);if(Qf(n)&&!r)return n;n=r}return null}var fo=class{get rootNodes(){let e=this._lView,t=e[de];return qc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pr]}set context(e){this._lView[pr]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yt];if(Ln(e)){let t=e[Fc],r=t?t.indexOf(this):-1;r>-1&&(up(e,r),Pc(t,r))}this._attachedToViewContainer=!1}UD(this._lView[de],this._lView)}onDestroy(e){JE(this._lView,e)}markForCheck(){hC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){Zf(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,uC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qf(this._lView),t=this._lView[aa];t!==null&&!e&&Wp(t,this._lView),VD(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=Qf(this._lView),r=this._lView[aa];r!==null&&!t&&jD(r,this._lView),Zf(this._lView)}};var Hq=new RegExp(`^(\\d+)*(${yM}|${mM})*(.*)`);var SN=()=>null;function hE(n,e){return SN(n,e)}var po=class{},sl=new z("",{providedIn:"root",factory:()=>!1});var fC=new z(""),pC=new z(""),fp=class{},zc=class{};function AN(n){let e=Error(`No component factory found for ${At(n)}.`);return e[RN]=n,e}var RN="ngComponent";var pp=class{resolveComponentFactory(e){throw AN(e)}},go=class{static{this.NULL=new pp}},mo=class{};var xN=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>null})}}return n})();function gp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=LI(i,a);else if(o==2){let c=a,l=e[++s];r=LI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Gc=class extends go{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fr(e);return new yo(t,this.ngModule)}};function fE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:hr.None;e?t.push({propName:s,templateName:r,isSignal:(a&hr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function MN(n){let e=n.toLowerCase();return e==="svg"?_x:e==="math"?wx:null}var yo=class extends zc{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=fE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return fE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ZR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ee(null);try{i=i||this.ngModule;let s=i instanceof Rt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Xf(e,s):e,c=a.get(mo,null);if(c===null)throw new ee(407,!1);let l=a.get(xN,null),h=a.get(po,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?zM(m,r,this.componentDef.encapsulation,a):LD(m,v,MN(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=zp(b,a,!0));let V=eC(0,null,null,1,0,null,null,null,null,null,null),$=Yp(null,V,null,M,null,null,p,m,a,null,N);kp($);let O,Q,X=null;try{let Y=this.componentDef,I,y=null;Y.findHostDirectiveDefs?(I=[],y=new Map,Y.findHostDirectiveDefs(Y,I,y),I.push(Y)):I=[Y];let w=NN($,b);X=PN(w,b,Y,I,$,p,m),Q=Ix(V,ti),b&&FN(m,Y,b,r),t!==void 0&&LN(Q,this.ngContentSelectors,t),O=ON(X,Y,I,y,$,[VN]),oC(V,$,null)}catch(Y){throw X!==null&&sp(X),sp($),Y}finally{Op()}return new mp(this.componentType,O,Bp(Q,$),$,Q)}finally{Ee(o)}}},mp=class extends fp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new fo(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;iC(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=pa(this._tNode.index,o);hC(s,1)}}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function NN(n,e){let t=n[de],r=ti;return n[r]=e,Zp(t,r,2,"#host",null)}function PN(n,e,t,r,i,o,s){let a=i[de];kN(r,n,e,s);let c=null;e!==null&&(c=zp(e,i[lo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Yp(i,XD(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&lp(a,n,r.length-1),Jp(i,p),i[n.index]=p}function kN(n,e,t,r){for(let i of n)e.mergedAttrs=bp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(gp(e,e.mergedAttrs,!0),t!==null&&GD(r,t,e))}function ON(n,e,t,r,i,o){let s=jn(),a=i[de],c=Vn(s,i);tC(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=ca(i,a,p,s);ho(m,i)}nC(a,i,s),c&&ho(c,i);let l=ca(i,a,s.directiveStart+s.componentOffset,s);if(n[pr]=i[pr]=l,o!==null)for(let h of o)h(l,e);return JD(a,s,i),l}function FN(n,e,t,r){if(r)qf(n,t,["ng-version","18.2.8"]);else{let{attrs:i,classes:o}=JR(e.selectors[0]);i&&qf(n,t,i),o&&o.length>0&&zD(n,t,o.join(" "))}}function LN(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function VN(){let n=jn();fD(Kt()[de],n)}var al=(()=>{class n{static{this.__NG_ELEMENT_ID__=jN}}return n})();function jN(){let n=jn();return BN(n,Kt())}var UN=al,gC=class extends UN{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Bp(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){let e=Fp(this._hostTNode,this._hostLView);if(gD(e)){let t=Uc(e,this._hostLView),r=jc(e),i=t[de].data[r+8];return new ei(i,t)}else return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=hE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,dE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!px(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new yo(fr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(Rt,null);M&&(o=M)}let h=fr(c.componentType??{}),p=hE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,dE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Ex(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[yt],l=new gC(c,c[Qt],c[yt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return pN(s,i,o,r),e.attachToViewContainerRef(),AE(Uf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=up(this._lContainer,t);r&&(Pc(Uf(this._lContainer),t),UD(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=up(this._lContainer,t);return r&&Pc(Uf(this._lContainer),t)!=null?new fo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pE(n){return n[Fc]}function Uf(n){return n[Fc]||(n[Fc]=[])}function BN(n,e){let t,r=e[n.index];return Ln(r)?t=r:(t=cN(r,e,null,n),e[n.index]=t,Jp(e,t)),HN(t,e,n,r),new gC(t,n,e)}function $N(n,e){let t=n[dn],r=t.createComment(""),i=Vn(e,n),o=$D(t,i);return Hc(t,o,r,MM(t,i),!1),r}var HN=qN;function qN(n,e,t,r){if(n[ni])return;let i;t.type&8?i=gr(r):i=$N(e,t),n[ni]=i}var gE=new Set;function ul(n){gE.has(n)||(gE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var mr=class{},la=class{};var yp=class extends mr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gc(this);let o=FE(e);this._bootstrapComponents=FD(o.bootstrap),this._r3Injector=TD(e,t,[{provide:mr,useValue:this},{provide:go,useValue:this.componentFactoryResolver},...r],At(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vp=class extends la{constructor(e){super(),this.moduleType=e}create(e){return new yp(this.moduleType,e,[])}};var Wc=class extends mr{constructor(e){super(),this.componentFactoryResolver=new Gc(this),this.instance=null;let t=new oa([...e.providers,{provide:mr,useValue:this},{provide:go,useValue:this.componentFactoryResolver}],e.parent||xp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function cl(n,e,t=null){return new Wc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function zN(n){return(n.flags&32)===32}var oo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(oo||{}),mC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}}return n})(),_p=class n{constructor(){this.ngZone=F(he),this.scheduler=F(po),this.errorHandler=F(On,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[oo.EarlyRead,oo.Write,oo.MixedReadWrite,oo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}},wp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Xp(n,e){!e?.injector&&fx(Xp);let t=e?.injector??F(ut);return wM(t)?(ul("NgAfterNextRender"),WN(n,t,e,!0)):KN}function GN(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WN(n,e,t,r){let i=e.get(mC);i.impl??=e.get(_p);let o=t?.phase??oo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Vp):null,a=new wp(i.impl,GN(n,o),r,s);return i.impl.register(a),a}var KN={destroy(){}};function mE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";iC(n,t,o[s],s,r)}function QN(n,e,t,r,i,o){let s=e.consts,a=YI(s,i),c=Zp(e,n,2,r,a);return YM(e,t,c,YI(s,o)),c.attrs!==null&&gp(c,c.attrs,!1),c.mergedAttrs!==null&&gp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ll(n,e,t,r){let i=Kt(),o=Pp(),s=ti+n,a=i[dn],c=o.firstCreatePass?QN(s,o,i,e,t,r):o.data[s],l=YN(o,i,c,a,e,n);i[s]=l;let h=gx(c);return rl(c,!0),GD(a,l,c),!zN(c)&&dD()&&HD(o,i,l,c),Cx()===0&&ho(l,i),Tx(),h&&($M(o,i,c),JD(o,c,i)),r!==null&&HM(i,c),ll}function dl(){let n=jn();nD()?Mx():(n=n.parent,rl(n,!1));let e=n;Ax(e)&&Rx(),bx();let t=Pp();return t.firstCreatePass&&(fD(t,n),zE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&$x(e)&&mE(t,e,Kt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Hx(e)&&mE(t,e,Kt(),e.stylesWithoutHost,!1),dl}function ga(n,e,t,r){return ll(n,e,t,r),dl(),ga}var YN=(n,e,t,r,i,o)=>(hD(!0),LD(r,i,Vx()));var Kc="en-US";var ZN=Kc;function JN(n){typeof n=="string"&&(ZN=n.toLowerCase().replace(/_/g,"-"))}function yC(n,e=""){let t=Kt(),r=Pp(),i=n+ti,o=r.firstCreatePass?Zp(r,i,1,e,null):r.data[i],s=XN(r,t,o,e,n);t[i]=s,dD()&&HD(r,t,s,o),rl(o,!1)}var XN=(n,e,t,r,i)=>(hD(!0),EM(e[dn],r));var eP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=jE(!1,t.type),i=r.length>0?cl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(B(Rt))})}}return n})();function Eo(n){ul("NgStandalone"),n.getStandaloneInjector=e=>e.get(eP).getOrCreateStandaloneInjector(n)}var yr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},eg=new yr("18.2.8");var hl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var vC=new z("");function ma(n){return!!n&&typeof n.then=="function"}function _C(n){return!!n&&typeof n.subscribe=="function"}var fl=new z(""),wC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(fl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ma(o))t.push(o);else if(_C(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pl=new z("");function tP(){dI(()=>{throw new ee(600,!1)})}function nP(n){return n.isBoundToModule}var rP=10;function iP(n,e,t){try{let r=t();return ma(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var si=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(cM),this.afterRenderManager=F(mC),this.zonelessEnabled=F(sl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ve,this.afterTick=new Ve,this.componentTypes=[],this.components=[],this.isStable=F(Io).hasPendingTasks.pipe(J(t=>!t)),this._injector=F(Rt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof zc;if(!this._injector.get(wC).done){let m=!i&&OE(t),v=!1;throw new ee(405,v)}let s;i?s=t:s=this._injector.get(go).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=nP(s)?void 0:this._injector.get(mr),c=r||s.selector,l=s.create(ut.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(vC,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Rc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ee(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(mo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<rP;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)oP(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>tl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Rc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(pl,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Rc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oP(n,e,t,r){if(!t&&!tl(n))return;uC(n,e,t&&!r?0:1)}var Ip=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},gl=(()=>{class n{compileModuleSync(t){return new vp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=FE(t),o=FD(i.declarations).reduce((s,a)=>{let c=fr(a);return c&&s.push(new yo(c)),s},[]);return new Ip(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sP=(()=>{class n{constructor(){this.zone=F(he),this.changeDetectionScheduler=F(po),this.applicationRef=F(si)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aP=new z("",{factory:()=>!1});function IC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(Se(q({},DC()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:co,multi:!0,useFactory:()=>{let r=F(sP,{optional:!0});return()=>r.initialize()}},{provide:co,multi:!0,useFactory:()=>{let r=F(uP);return()=>{r.initialize()}}},e===!0?{provide:fC,useValue:!0}:[],{provide:pC,useValue:t??bD}]}function EC(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=IC({ngZoneFactory:()=>{let i=DC(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ul("NgZone_CoalesceEvent"),new he(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return fn([{provide:aP,useValue:!0},{provide:sl,useValue:!1},r])}function DC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uP=(()=>{class n{constructor(){this.subscription=new Oe,this.initialized=!1,this.zone=F(he),this.pendingTasks=F(Io)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var cP=(()=>{class n{constructor(){this.appRef=F(si),this.taskService=F(Io),this.ngZone=F(he),this.zonelessEnabled=F(sl),this.disableScheduling=F(fC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Oe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($c):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(pC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof op||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?rE:SD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($c+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lP(){return typeof $localize<"u"&&$localize.locale||Kc}var tg=new z("",{providedIn:"root",factory:()=>F(tg,ae.Optional|ae.SkipSelf)||lP()});var Ep=new z("");function Tc(n){return!n.moduleRef}function dP(n){let e=Tc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{Tc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(On,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Tc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ep);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ep);s.add(o),n.moduleRef.onDestroy(()=>{Rc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return iP(r,t,()=>{let o=e.get(wC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(tg,Kc);if(JN(s||Kc),Tc(n)){let a=e.get(si);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return hP(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function hP(n,e){let t=n.injector.get(si);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var xc=null;function fP(n=[],e){return ut.create({name:e,providers:[{provide:Zc,useValue:"platform"},{provide:Ep,useValue:new Set([()=>xc=null])},...n]})}function pP(n=[]){if(xc)return xc;let e=fP(n);return xc=e,tP(),gP(e),e}function gP(n){n.get(Hp,null)?.forEach(t=>t())}function ng(){return!1}var ya=(()=>{class n{static{this.__NG_ELEMENT_ID__=mP}}return n})();function mP(n){return yP(jn(),Kt(),(n&16)===16)}function yP(n,e,t){if(Mp(n)&&!t){let r=pa(n.index,e);return new fo(r,r)}else if(n.type&175){let r=e[hn];return new fo(r,e)}return null}function CC(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=pP(r),o=[IC({}),{provide:po,useExisting:cP},...t||[]],s=new Wc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return dP({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function TC(n){let e=fr(n);if(!e)return null;let t=new yo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var RC=null;function Do(){return RC}function xC(n){RC??=n}var ml=class{};var Ct=new z(""),og=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>F(EP),providedIn:"platform"})}}return n})(),MC=new z(""),EP=(()=>{class n extends og{constructor(){super(),this._doc=F(Ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Do().getBaseHref(this._doc)}onPopState(t){let r=Do().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Do().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function sg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function bC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Bn(n){return n&&n[0]!=="?"?"?"+n:n}var ai=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>F(ag),providedIn:"root"})}}return n})(),NC=new z(""),ag=(()=>{class n extends ai{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Bn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(og),B(NC,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PC=(()=>{class n extends ai{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=sg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(og),B(NC,8))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),Co=(()=>{class n{constructor(t){this._subject=new mt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=TP(bC(SC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Bn(r))}normalize(t){return n.stripTrailingSlash(CP(this._basePath,SC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Bn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Bn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Bn}static{this.joinWithSlash=sg}static{this.stripTrailingSlash=bC}static{this.\u0275fac=function(r){return new(r||n)(B(ai))}}static{this.\u0275prov=W({token:n,factory:()=>DP(),providedIn:"root"})}}return n})();function DP(){return new Co(B(ai))}function CP(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SC(n){return n.replace(/\/index.html$/,"")}function TP(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function kC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ug="browser",bP="server";function SP(n){return n===ug}function ui(n){return n===bP}var OC=(()=>{class n{static{this.\u0275prov=W({token:n,providedIn:"root",factory:()=>SP(F(vt))?new rg(F(Ct),window):new ig})}}return n})(),rg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=AP(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function AP(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ig=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},yl=class{};var dg=class extends ml{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hg=class n extends dg{static makeCurrent(){xC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=RP();return t==null?null:xP(t)}resetBaseElement(){va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kC(document.cookie,e)}},va=null;function RP(){return va=va||document.querySelector("base"),va?va.getAttribute("href"):null}function xP(n){return new URL(n,document.baseURI).pathname}var MP=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),fg=new z(""),jC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(B(fg),B(he))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),vl=class{constructor(e){this._doc=e}},cg="ng-app-id",UC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ui(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${cg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(cg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(cg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(B(Ct),B($p),B(qp,8),B(vt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),lg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gg=/%COMP%/g,BC="%COMP%",NP=`_nghost-${BC}`,PP=`_ngcontent-${BC}`,kP=!0,OP=new z("",{providedIn:"root",factory:()=>kP});function FP(n){return PP.replace(gg,n)}function LP(n){return NP.replace(gg,n)}function $C(n,e){return e.map(t=>t.replace(gg,n))}var FC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ui(a),this.defaultRenderer=new _a(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ln.ShadowDom&&(r=Se(q({},r),{encapsulation:ln.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof _l?i.applyToHost(t):i instanceof wa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case ln.Emulated:o=new _l(c,l,r,this.appId,h,s,a,p);break;case ln.ShadowDom:return new pg(c,l,t,r,s,a,this.nonce,p);default:o=new wa(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(B(jC),B(UC),B($p),B(OP),B(Ct),B(vt),B(he),B(qp))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),_a=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(lg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=lg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(oi.DashCase|oi.Important)?e.style.setProperty(t,r,i&oi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&oi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Do().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function LC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var pg=class extends _a{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=$C(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wa=class extends _a{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?$C(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_l=class extends wa{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=FP(l),this.hostAttr=LP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},VP=(()=>{class n extends vl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(B(Ct))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})(),VC=["alt","control","meta","shift"],jP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},BP=(()=>{class n extends vl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Do().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),VC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=jP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),VC.forEach(s=>{if(s!==i){let a=UP[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(B(Ct))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function HC(n,e){return CC(q({rootComponent:n},$P(e)))}function $P(n){return{appProviders:[...WP,...n?.providers??[]],platformProviders:GP}}function HP(){hg.makeCurrent()}function qP(){return new On}function zP(){return kD(document),document}var GP=[{provide:vt,useValue:ug},{provide:Hp,useValue:HP,multi:!0},{provide:Ct,useFactory:zP,deps:[]}];var WP=[{provide:Zc,useValue:"root"},{provide:On,useFactory:qP,deps:[]},{provide:fg,useClass:VP,multi:!0,deps:[Ct,he,vt]},{provide:fg,useClass:BP,multi:!0,deps:[Ct]},FC,UC,jC,{provide:mo,useExisting:FC},{provide:yl,useClass:MP,deps:[]},[]];var qC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(B(Ct))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",Fa=Symbol("RouteTitle"),wg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xo(n){return new wg(n)}function QP(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function YP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gn(n[t],e[t]))return!1;return!0}function gn(n,e){let t=n?Ig(n):void 0,r=e?Ig(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!tT(n[i],e[i]))return!1;return!0}function Ig(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function nT(n){return n.length>0?n[n.length-1]:null}function wr(n){return bf(n)?n:ma(n)?ye(Promise.resolve(n)):Z(n)}var ZP={exact:iT,subset:oT},rT={exact:JP,subset:XP,ignored:()=>!0};function zC(n,e,t){return ZP[t.paths](n.root,e.root,t.matrixParams)&&rT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function JP(n,e){return gn(n,e)}function iT(n,e,t){if(!li(n.segments,e.segments)||!El(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!iT(n.children[r],e.children[r],t))return!1;return!0}function XP(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tT(n[t],e[t]))}function oT(n,e,t){return sT(n,e,e.segments,t)}function sT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!li(i,t)||e.hasChildren()||!El(i,t,r))}else if(n.segments.length===t.length){if(!li(n.segments,t)||!El(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!li(n.segments,i)||!El(n.segments,i,r)||!n.children[oe]?!1:sT(n.children[oe],e,o,r)}}function El(n,e,t){return e.every((r,i)=>rT[t](n[i].parameters,r.parameters))}var Hn=class{constructor(e=new ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xo(this.queryParams),this._queryParamMap}toString(){return n1.serialize(this)}},ve=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dl(this)}},ci=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xo(this.parameters),this._parameterMap}toString(){return uT(this)}};function e1(n,e){return li(n,e)&&n.every((t,r)=>gn(t.parameters,e[r].parameters))}function li(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function t1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var La=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>new Mo,providedIn:"root"})}}return n})(),Mo=class{parse(e){let t=new Dg(e);return new Hn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ia(e.root,!0)}`,r=o1(e.queryParams),i=typeof e.fragment=="string"?`#${r1(e.fragment)}`:"";return`${t}${r}${i}`}},n1=new Mo;function Dl(n){return n.segments.map(e=>uT(e)).join("/")}function Ia(n,e){if(!n.hasChildren())return Dl(n);if(e){let t=n.children[oe]?Ia(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Ia(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=t1(n,(r,i)=>i===oe?[Ia(n.children[oe],!1)]:[`${i}:${Ia(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Dl(n)}/${t[0]}`:`${Dl(n)}/(${t.join("//")})`}}function aT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wl(n){return aT(n).replace(/%3B/gi,";")}function r1(n){return encodeURI(n)}function Eg(n){return aT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cl(n){return decodeURIComponent(n)}function GC(n){return Cl(n.replace(/\+/g,"%20"))}function uT(n){return`${Eg(n.path)}${i1(n.parameters)}`}function i1(n){return Object.entries(n).map(([e,t])=>`;${Eg(e)}=${Eg(t)}`).join("")}function o1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${wl(t)}=${wl(i)}`).join("&"):`${wl(t)}=${wl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var s1=/^[^\/()?;#]+/;function mg(n){let e=n.match(s1);return e?e[0]:""}var a1=/^[^\/()?;=#]+/;function u1(n){let e=n.match(a1);return e?e[0]:""}var c1=/^[^=?&#]+/;function l1(n){let e=n.match(c1);return e?e[0]:""}var d1=/^[^&#]+/;function h1(n){let e=n.match(d1);return e?e[0]:""}var Dg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new ve(e,t)),r}parseSegment(){let e=mg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new ci(Cl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=u1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=mg(this.remaining);i&&(r=i,this.capture(r))}e[Cl(t)]=Cl(r)}parseQueryParam(e){let t=l1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=h1(this.remaining);s&&(r=s,this.capture(r))}let i=GC(t),o=GC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new ve([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function cT(n){return n.segments.length>0?new ve([],{[oe]:n}):n}function lT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=lT(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ve(n.segments,e);return f1(t)}function f1(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new ve(n.segments.concat(e.segments),e.children)}return n}function Sa(n){return n instanceof Hn}function p1(n,e,t=null,r=null){let i=dT(n);return hT(i,e,t,r)}function dT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new ve(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=cT(r);return e??i}function hT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return yg(i,i,i,t,r);let o=g1(e);if(o.toRoot())return yg(i,i,new ve([],{}),t,r);let s=m1(o,i,n),a=s.processChildren?Ca(s.segmentGroup,s.index,o.commands):pT(s.segmentGroup,s.index,o.commands);return yg(i,s.segmentGroup,a,t,r)}function Tl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Aa(n){return typeof n=="object"&&n!=null&&n.outlets}function yg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=fT(n,e,t);let a=cT(lT(s));return new Hn(a,o,i)}function fT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=fT(o,e,t)}),new ve(n.segments,r)}var bl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tl(r[0]))throw new ee(4003,!1);let i=r.find(Aa);if(i&&i!==nT(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function g1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new bl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new bl(t,e,r)}var So=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function m1(n,e,t){if(n.isAbsolute)return new So(e,!0,0);if(!t)return new So(e,!1,NaN);if(t.parent===null)return new So(t,!0,0);let r=Tl(n.commands[0])?0:1,i=t.segments.length-1+r;return y1(t,i,n.numberOfDoubleDots)}function y1(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new So(r,!1,i-o)}function v1(n){return Aa(n[0])?n[0].outlets:{[oe]:n}}function pT(n,e,t){if(n??=new ve([],{}),n.segments.length===0&&n.hasChildren())return Ca(n,e,t);let r=_1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ve(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new ve(n.segments.slice(r.pathIndex),n.children),Ca(o,0,i)}else return r.match&&i.length===0?new ve(n.segments,{}):r.match&&!n.hasChildren()?Cg(n,e,t):r.match?Ca(n,0,i):Cg(n,e,t)}function Ca(n,e,t){if(t.length===0)return new ve(n.segments,{});{let r=v1(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Ca(n.children[oe],e,t);return new ve(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=pT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(n.segments,i)}}function _1(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Aa(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!KC(c,l,s))return o;r+=2}else{if(!KC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Aa(o)){let c=w1(o.outlets);return new ve(r,c)}if(i===0&&Tl(t[0])){let c=n.segments[e];r.push(new ci(c.path,WC(t[0]))),i++;continue}let s=Aa(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Tl(a)?(r.push(new ci(s,WC(a))),i+=2):(r.push(new ci(s,{})),i++)}return new ve(r,{})}function w1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Cg(new ve([],{}),0,r))}),e}function WC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function KC(n,e,t){return n==t.path&&gn(e,t.parameters)}var Ta="imperative",Ze=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ze||{}),Ut=class{constructor(e,t){this.id=e,this.url=t}},No=class extends Ut{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ze.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends Ut{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ze.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Mt||{}),Sl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Sl||{}),$n=class extends Ut{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ze.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vr=class extends Ut{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ze.NavigationSkipped}},Ra=class extends Ut{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ze.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Al=class extends Ut{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ze.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tg=class extends Ut{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ze.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bg=class extends Ut{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ze.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Sg=class extends Ut{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ze.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ag=class extends Ut{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ze.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rg=class{constructor(e){this.route=e,this.type=Ze.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xg=class{constructor(e){this.route=e,this.type=Ze.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mg=class{constructor(e){this.snapshot=e,this.type=Ze.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ng=class{constructor(e){this.snapshot=e,this.type=Ze.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pg=class{constructor(e){this.snapshot=e,this.type=Ze.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kg=class{constructor(e){this.snapshot=e,this.type=Ze.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ze.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},xa=class{},Po=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function I1(n,e){return n.providers&&!n._injector&&(n._injector=cl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Yt(n){return n.outlet||oe}function E1(n,e){let t=n.filter(r=>Yt(r)===e);return t.push(...n.filter(r=>Yt(r)!==e)),t}function Va(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Og=class{get injector(){return Va(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ja(this.rootInjector),this.attachRef=null}},ja=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Og(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(B(Rt))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Fg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Fg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Lg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Lg(e,this._root).map(t=>t.value)}};function Fg(n,e){if(n===e.value)return e;for(let t of e.children){let r=Fg(n,t);if(r)return r}return null}function Lg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Lg(n,t);if(r.length)return r.unshift(e),r}return[]}var xt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function bo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ml=class extends xl{constructor(e,t){super(e),this.snapshot=t,Gg(this,e)}toString(){return this.snapshot.toString()}};function gT(n){let e=D1(n),t=new Xe([new ci("",{})]),r=new Xe({}),i=new Xe({}),o=new Xe({}),s=new Xe(""),a=new di(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new Ml(new xt(a,[]),e)}function D1(n){let e={},t={},r={},i="",o=new Ao([],e,r,i,t,oe,n,null,{});return new Pl("",new xt(o,[]))}var di=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(J(l=>l[Fa]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&yT(i)&&(r.resolve[Fa]=i.title),r}var Ao=class{get title(){return this.data?.[Fa]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Pl=class extends xl{constructor(e,t){super(t),this.url=e,Gg(this,t)}toString(){return mT(this._root)}};function Gg(n,e){e.value._routerState=n,e.children.forEach(t=>Gg(n,t))}function mT(n){let e=n.children.length>0?` { ${n.children.map(mT).join(", ")} } `:"";return`${n.value}${e}`}function vg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),gn(e.params,t.params)||n.paramsSubject.next(t.params),YP(e.url,t.url)||n.urlSubject.next(t.url),gn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vg(n,e){let t=gn(n.params,e.params)&&e1(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Vg(n.parent,e.parent))}function yT(n){return typeof n.title=="string"||n.title===null}var Wg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new mt,this.deactivateEvents=new mt,this.attachEvents=new mt,this.detachEvents=new mt,this.parentContexts=F(ja),this.location=F(al),this.changeDetector=F(ya),this.inputBinder=F(Ll,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new jg(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ap({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[el]})}}return n})(),jg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===di?this.route:e===ja?this.childContexts:this.parent.get(e,t)}},Ll=new z(""),QC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Js([r.queryParams,r.params,r.data]).pipe(Fe(([o,s,a],c)=>(a=q(q(q({},o),s),a),c===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=TC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function C1(n,e,t){let r=Ma(n,e._root,t?t._root:void 0);return new Ml(r,e)}function Ma(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=T1(n,e,t);return new xt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ma(n,a)),s}}let r=b1(e.value),i=e.children.map(o=>Ma(n,o));return new xt(r,i)}}function T1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ma(n,r,i);return Ma(n,r)})}function b1(n){return new di(new Xe(n.url),new Xe(n.params),new Xe(n.queryParams),new Xe(n.fragment),new Xe(n.data),n.outlet,n.component,n)}var Na=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},vT="ngNavigationCancelingError";function kl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Sa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_T(!1,Mt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function _T(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vT]=!0,t.cancellationCode=e,t}function S1(n){return wT(n)&&Sa(n.url)}function wT(n){return!!n&&n[vT]}var A1=(n,e,t,r)=>J(i=>(new Ug(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ug=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=bo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=bo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ng(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(vg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),vg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ol=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ro=class{constructor(e,t){this.component=e,this.route=t}};function R1(n,e,t){let r=n._root,i=e?e._root:null;return Ea(r,i,t,[r.value])}function x1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Oo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!wE(n)?n:e.get(n):r}function Ea(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=bo(e);return n.children.forEach(s=>{M1(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ba(a,t.getContext(s),i)),i}function M1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=N1(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ol(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ea(n,e,a?a.children:null,r,i):Ea(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ro(a.outlet.component,s))}else s&&ba(e,a,i),i.canActivateChecks.push(new Ol(r)),o.component?Ea(n,null,a?a.children:null,r,i):Ea(n,null,t,r,i);return i}function N1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!li(n.url,e.url);case"pathParamsOrQueryParamsChange":return!li(n.url,e.url)||!gn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vg(n,e)||!gn(n.queryParams,e.queryParams);case"paramsChange":default:return!Vg(n,e)}}function ba(n,e,t){let r=bo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ba(s,e.children.getContext(o),t):ba(s,null,t):ba(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ro(e.outlet.component,i)):t.canDeactivateChecks.push(new Ro(null,i)):t.canDeactivateChecks.push(new Ro(null,i))}function Ua(n){return typeof n=="function"}function P1(n){return typeof n=="boolean"}function k1(n){return n&&Ua(n.canLoad)}function O1(n){return n&&Ua(n.canActivate)}function F1(n){return n&&Ua(n.canActivateChild)}function L1(n){return n&&Ua(n.canDeactivate)}function V1(n){return n&&Ua(n.canMatch)}function IT(n){return n instanceof Nn||n?.name==="EmptyError"}var Il=Symbol("INITIAL_VALUE");function ko(){return Fe(n=>Js(n.map(e=>e.pipe(Pn(1),Jr(Il)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===Il)return Il;if(t===!1||j1(t))return t}return!0}),et(e=>e!==Il),Pn(1)))}function j1(n){return Sa(n)||n instanceof Na}function U1(n,e){return He(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(Se(q({},t),{guardsResult:!0})):B1(s,r,i,n).pipe(He(a=>a&&P1(a)?$1(r,o,n,e):Z(a)),J(a=>Se(q({},t),{guardsResult:a})))})}function B1(n,e,t,r){return ye(n).pipe(He(i=>W1(i.component,i.route,t,e,r)),Ot(i=>i!==!0,!0))}function $1(n,e,t,r){return ye(e).pipe(Yr(i=>eo(q1(i.route.parent,r),H1(i.route,r),G1(n,i.path,t),z1(n,i.route,t))),Ot(i=>i!==!0,!0))}function H1(n,e){return n!==null&&e&&e(new Pg(n)),Z(!0)}function q1(n,e){return n!==null&&e&&e(new Mg(n)),Z(!0)}function z1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>wc(()=>{let s=Va(e)??t,a=Oo(o,s),c=O1(a)?a.canActivate(e,n):pn(s,()=>a(e,n));return wr(c).pipe(Ot())}));return Z(i).pipe(ko())}function G1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>x1(s)).filter(s=>s!==null).map(s=>wc(()=>{let a=s.guards.map(c=>{let l=Va(s.node)??t,h=Oo(c,l),p=F1(h)?h.canActivateChild(r,n):pn(l,()=>h(r,n));return wr(p).pipe(Ot())});return Z(a).pipe(ko())}));return Z(o).pipe(ko())}function W1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let c=Va(e)??i,l=Oo(a,c),h=L1(l)?l.canDeactivate(n,e,t,r):pn(c,()=>l(n,e,t,r));return wr(h).pipe(Ot())});return Z(s).pipe(ko())}function K1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Oo(s,n),c=k1(a)?a.canLoad(e,t):pn(n,()=>a(e,t));return wr(c)});return Z(o).pipe(ko(),ET(r))}function ET(n){return wf(Ke(e=>{if(typeof e!="boolean")throw kl(n,e)}),J(e=>e===!0))}function Q1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Oo(s,n),c=V1(a)?a.canMatch(e,t):pn(n,()=>a(e,t));return wr(c)});return Z(o).pipe(ko(),ET(r))}var Pa=class{constructor(e){this.segmentGroup=e||null}},ka=class extends Error{constructor(e){super(),this.urlTree=e}};function To(n){return Xi(new Pa(n))}function Y1(n){return Xi(new ee(4e3,!1))}function Z1(n){return Xi(_T(!1,Mt.GuardRejected))}var Bg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[oe])return Y1(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=pn(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof Hn)throw new ka(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ka(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Hn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ve(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},$g={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J1(n,e,t,r,i){let o=DT(n,e,t);return o.matched?(r=I1(e,r),Q1(r,e,t,i).pipe(J(s=>s===!0?o:q({},$g)))):Z(o)}function DT(n,e,t){if(e.path==="**")return X1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},$g):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||QP)(t,n,e);if(!i)return q({},$g);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?q(q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function X1(n){return{matched:!0,parameters:n.length>0?nT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function YC(n,e,t,r){return t.length>0&&nk(n,t,r)?{segmentGroup:new ve(e,tk(r,new ve(t,n.children))),slicedSegments:[]}:t.length===0&&rk(n,t,r)?{segmentGroup:new ve(n.segments,ek(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ve(n.segments,n.children),slicedSegments:t}}function ek(n,e,t,r){let i={};for(let o of t)if(Vl(n,e,o)&&!r[Yt(o)]){let s=new ve([],{});i[Yt(o)]=s}return q(q({},r),i)}function tk(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&Yt(r)!==oe){let i=new ve([],{});t[Yt(r)]=i}return t}function nk(n,e,t){return t.some(r=>Vl(n,e,r)&&Yt(r)!==oe)}function rk(n,e,t){return t.some(r=>Vl(n,e,r))}function Vl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function ik(n,e,t){return e.length===0&&!n.children[t]}var Hg=class{};function ok(n,e,t,r,i,o,s="emptyOnly"){return new qg(n,e,t,r,i,s,o).recognize()}var sk=31,qg=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Bg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=YC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new xt(r,t),o=new Pl("",i),s=p1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ao([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(J(r=>({children:r,rootSnapshot:t})),ar(r=>{if(r instanceof ka)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pa?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof xt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ye(o).pipe(Yr(s=>{let a=r.children[s],c=E1(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Zr((s,a)=>(s.push(...a),s)),ur(null),xf(),He(s=>{if(s===null)return To(r);let a=CT(s);return ak(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return ye(t).pipe(Yr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ar(l=>{if(l instanceof Pa)return Z(null);throw l}))),Ot(c=>!!c),ar(c=>{if(IT(c))return ik(r,i,o)?Z(new Hg):To(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Yt(r)!==s&&(s===oe||!Vl(i,o,r))?To(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):To(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=DT(t,i,o);if(!c)return To(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sk&&(this.allowRedirects=!1));let v=new Ao(o,l,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,ZC(i),Yt(i),i.component??i._loadedComponent??null,i,JC(i)),b=Nl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(He(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=J1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Fe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Fe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new Ao(m,p,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,ZC(r),Yt(r),r.component??r._loadedComponent??null,r,JC(r)),M=Nl(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:V}=YC(t,m,v,l);if(V.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(J(O=>new xt(b,O)));if(l.length===0&&V.length===0)return Z(new xt(b,[]));let $=Yt(r)===o;return this.processSegment(h,l,N,V,$?oe:o,!0,b).pipe(J(O=>new xt(b,O instanceof xt?[O]:[])))}))):To(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):K1(e,t,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Z1(t))):Z({routes:[],injector:e})}};function ak(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function uk(n){let e=n.value.routeConfig;return e&&e.path===""}function CT(n){let e=[],t=new Set;for(let r of n){if(!uk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=CT(r.children);e.push(new xt(r.value,i))}return e.filter(r=>!t.has(r))}function ZC(n){return n.data||{}}function JC(n){return n.resolve||{}}function ck(n,e,t,r,i,o){return He(s=>ok(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:c})=>Se(q({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function lk(n,e){return He(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of TT(c))s.add(l);let a=0;return ye(s).pipe(Yr(c=>o.has(c)?dk(c,r,n,e):(c.data=Nl(c,c.parent,n).resolve,Z(void 0))),Ke(()=>a++),to(1),He(c=>a===s.size?Z(t):gt))})}function TT(n){let e=n.children.map(t=>TT(t)).flat();return[n,...e]}function dk(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!yT(i)&&(o[Fa]=i.title),hk(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=Nl(n,n.parent,t).resolve,null)))}function hk(n,e,t,r){let i=Ig(n);if(i.length===0)return Z({});let o={};return ye(i).pipe(He(s=>fk(n[s],e,t,r).pipe(Ot(),Ke(a=>{if(a instanceof Na)throw kl(new Mo,a);o[s]=a}))),to(1),Af(o),ar(s=>IT(s)?gt:Xi(s)))}function fk(n,e,t,r){let i=Va(e)??r,o=Oo(n,i),s=o.resolve?o.resolve(e,t):pn(i,()=>o(e,t));return wr(s)}function _g(n){return Fe(e=>{let t=n(e);return t?ye(t).pipe(J(()=>e)):Z(e)})}var bT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[Fa]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>F(pk),providedIn:"root"})}}return n})(),pk=(()=>{class n extends bT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(B(qC))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ba=new z("",{providedIn:"root",factory:()=>({})}),gk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=_o({type:n,selectors:[["ng-component"]],standalone:!0,features:[Eo],decls:1,vars:0,template:function(r,i){r&1&&ga(0,"router-outlet")},dependencies:[Wg],encapsulation:2})}}return n})();function Kg(n){let e=n.children&&n.children.map(Kg),t=e?Se(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=gk),t}var Oa=new z(""),Qg=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(gl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=wr(t.loadComponent()).pipe(J(ST),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Xs(()=>{this.componentLoaders.delete(t)})),i=new Qi(r,()=>new Ve).pipe(Ki());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=mk(r,this.compiler,t,this.onLoadEndListener).pipe(Xs(()=>{this.childrenLoaders.delete(r)})),s=new Qi(o,()=>new Ve).pipe(Ki());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mk(n,e,t,r){return wr(n.loadChildren()).pipe(J(ST),He(i=>i instanceof la||Array.isArray(i)?Z(i):ye(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Oa,[],{optional:!0,self:!0}).flat()),{routes:s.map(Kg),injector:o}}))}function yk(n){return n&&typeof n=="object"&&"default"in n}function ST(n){return yk(n)?n.default:n}var Yg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>F(vk),providedIn:"root"})}}return n})(),vk=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),AT=new z(""),RT=new z("");function _k(n,e,t){let r=n.get(RT),i=n.get(Ct);return n.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),wk(n))),{onViewTransitionCreated:c}=r;return c&&pn(n,()=>c({transition:a,from:e,to:t})),s})}function wk(n){return new Promise(e=>{Xp({read:()=>setTimeout(e)},{injector:n})})}var Ik=new z(""),Zg=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.transitionAbortSubject=new Ve,this.configLoader=F(Qg),this.environmentInjector=F(Rt),this.urlSerializer=F(La),this.rootContexts=F(ja),this.location=F(Co),this.inputBindingEnabled=F(Ll,{optional:!0})!==null,this.titleStrategy=F(bT),this.options=F(Ba,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Yg),this.createViewTransition=F(AT,{optional:!0}),this.navigationErrorHandler=F(Ik,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Rg(i)),r=i=>this.events.next(new xg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Se(q(q({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Xe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ta,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(et(o=>o.id!==0),J(o=>Se(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fe(o=>{let s=!1,a=!1;return Z(o).pipe(Fe(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Mt.SupersededByNewNavigation),gt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Se(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new vr(c.id,this.urlSerializer.serialize(c.rawUrl),p,Sl.IgnoredSameUrlNavigation)),c.resolve(!1),gt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(Fe(p=>{let m=this.transitions?.getValue();return this.events.next(new No(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?gt:Promise.resolve(p)}),ck(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Se(q({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Al(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=c,N=new No(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let V=gT(this.rootComponentType).snapshot;return this.currentTransition=o=Se(q({},c),{targetSnapshot:V,urlAfterRedirects:m,extras:Se(q({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Z(o)}else{let p="";return this.events.next(new vr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Sl.IgnoredByUrlHandlingStrategy)),c.resolve(!1),gt}}),Ke(c=>{let l=new Tg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),J(c=>(this.currentTransition=o=Se(q({},c),{guards:R1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),U1(this.environmentInjector,c=>this.events.next(c)),Ke(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw kl(this.urlSerializer,c.guardsResult);let l=new bg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),et(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Mt.GuardRejected),!1)),_g(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(Ke(l=>{let h=new Sg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Fe(l=>{let h=!1;return Z(l).pipe(lk(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Mt.NoDataFromResolver)}}))}),Ke(l=>{let h=new Ag(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),_g(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ke(m=>{h.component=m}),J(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Js(l(c.targetSnapshot.root)).pipe(ur(null),Pn(1))}),_g(()=>this.afterPreactivation()),Fe(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?ye(h).pipe(J(()=>o)):Z(o)}),J(c=>{let l=C1(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Se(q({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ke(()=>{this.events.next(new xa)}),A1(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pn(1),Ke({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Nf(this.transitionAbortSubject.pipe(Ke(c=>{throw c}))),Xs(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Mt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ar(c=>{if(a=!0,wT(c))this.events.next(new $n(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),S1(c)?this.events.next(new Po(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ra(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=pn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Na){let{message:p,cancellationCode:m}=kl(this.urlSerializer,h);this.events.next(new $n(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Po(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return gt}))}))}cancelNavigationTransition(t,r,i){let o=new $n(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ek(n){return n!==Ta}var Dk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>F(Ck),providedIn:"root"})}}return n})(),zg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Ck=(()=>{class n extends zg{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lp(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:()=>F(Tk),providedIn:"root"})}}return n})(),Tk=(()=>{class n extends xT{constructor(){super(...arguments),this.location=F(Co),this.urlSerializer=F(La),this.options=F(Ba,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Yg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof No)this.stateMemento=this.createStateMemento();else if(t instanceof vr)this.rawUrlTree=r.initialUrl;else if(t instanceof Al){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof xa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof $n&&(t.code===Mt.GuardRejected||t.code===Mt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ra?this.restoreHistory(r,!0):t instanceof qn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Hn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=q(q({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lp(n)))(i||n)}})()}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Da=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Da||{});function MT(n,e){n.events.pipe(et(t=>t instanceof qn||t instanceof $n||t instanceof Ra||t instanceof vr),J(t=>t instanceof qn||t instanceof vr?Da.COMPLETE:(t instanceof $n?t.code===Mt.Redirect||t.code===Mt.SupersededByNewNavigation:!1)?Da.REDIRECTING:Da.FAILED),et(t=>t!==Da.REDIRECTING),Pn(1)).subscribe(()=>{e()})}function bk(n){throw n}var Sk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ak={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_r=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(hl),this.stateManager=F(xT),this.options=F(Ba,{optional:!0})||{},this.pendingTasks=F(Io),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(Zg),this.urlSerializer=F(La),this.location=F(Co),this.urlHandlingStrategy=F(Yg),this._events=new Ve,this.errorHandler=this.options.errorHandler||bk,this.navigated=!1,this.routeReuseStrategy=F(Dk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Oa,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Ll,{optional:!0}),this.eventsSubscription=new Oe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof $n&&r.code!==Mt.Redirect&&r.code!==Mt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qn)this.navigated=!0;else if(r instanceof Po){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ek(i.source)},s);this.scheduleNavigation(a,Ta,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}xk(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ta,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Kg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=dT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return hT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Sa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ta,null,r)}navigate(t,r={skipLocationChange:!1}){return Rk(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=q({},Sk):r===!1?i=q({},Ak):i=r,Sa(t))return zC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return zC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return MT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rk(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function xk(n){return!(n instanceof xa)&&!(n instanceof Po)}var Fl=class{};var Mk=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(et(t=>t instanceof qn),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=cl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ye(i).pipe(sr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(He(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return ye([o,s]).pipe(sr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(B(_r),B(gl),B(Rt),B(Fl),B(Qg))}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),NT=new z(""),Nk=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof No?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof vr&&t.code===Sl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Rl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Rl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){KD()}}static{this.\u0275prov=W({token:n,factory:n.\u0275fac})}}return n})();function PT(n,...e){return fn([{provide:Oa,multi:!0,useValue:n},[],{provide:di,useFactory:kT,deps:[_r]},{provide:pl,multi:!0,useFactory:OT},e.map(t=>t.\u0275providers)])}function kT(n){return n.routerState.root}function $a(n,e){return{\u0275kind:n,\u0275providers:e}}function OT(){let n=F(ut);return e=>{let t=n.get(si);if(e!==t.components[0])return;let r=n.get(_r),i=n.get(FT);n.get(Jg)===1&&r.initialNavigation(),n.get(LT,null,ae.Optional)?.setUpPreloading(),n.get(NT,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FT=new z("",{factory:()=>new Ve}),Jg=new z("",{providedIn:"root",factory:()=>1});function Pk(){return $a(2,[{provide:Jg,useValue:0},{provide:fl,multi:!0,deps:[ut],useFactory:e=>{let t=e.get(MC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(_r),o=e.get(FT);MT(i,()=>{r(!0)}),e.get(Zg).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}])}function kk(){return $a(3,[{provide:fl,multi:!0,useFactory:()=>{let e=F(_r);return()=>{e.setUpLocationChangeListener()}}},{provide:Jg,useValue:2}])}var LT=new z("");function Ok(n){return $a(0,[{provide:LT,useExisting:Mk},{provide:Fl,useExisting:n}])}function Fk(){return $a(8,[QC,{provide:Ll,useExisting:QC}])}function Lk(n){let e=[{provide:AT,useValue:_k},{provide:RT,useValue:q({skipNextTransition:!!n?.skipInitialTransition},n)}];return $a(9,e)}var XC=new z("ROUTER_FORROOT_GUARD"),Vk=[Co,{provide:La,useClass:Mo},_r,ja,{provide:di,useFactory:kT,deps:[_r]},Qg,[]],VT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Vk,[],{provide:Oa,multi:!0,useValue:t},{provide:XC,useFactory:$k,deps:[[_r,new ct,new SE]]},{provide:Ba,useValue:r||{}},r?.useHash?Uk():Bk(),jk(),r?.preloadingStrategy?Ok(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Hk(r):[],r?.bindToComponentInputs?Fk().\u0275providers:[],r?.enableViewTransitions?Lk().\u0275providers:[],qk()]}}static forChild(t){return{ngModule:n,providers:[{provide:Oa,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(B(XC,8))}}static{this.\u0275mod=wo({type:n})}static{this.\u0275inj=vo({})}}return n})();function jk(){return{provide:NT,useFactory:()=>{let n=F(OC),e=F(he),t=F(Ba),r=F(Zg),i=F(La);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Nk(i,r,n,e,t)}}}function Uk(){return{provide:ai,useClass:PC}}function Bk(){return{provide:ai,useClass:ag}}function $k(n){return"guarded"}function Hk(n){return[n.initialNavigation==="disabled"?kk().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Pk().\u0275providers:[]]}var eT=new z("");function qk(){return[{provide:eT,useFactory:OT},{provide:pl,multi:!0,useExisting:eT}]}var zk="firebase",Gk="10.14.1";at(zk,Gk,"app");var zn=new yr("ANGULARFIRE2_VERSION");function Ul(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ha=(n,e)=>{let t=e?[e]:ec(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Zt=class{constructor(){return Ha(Wk)}},Wk="app-check";function Fo(){}var jl=class{zone;delegate;constructor(e,t=Cf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Xg=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fo,{},Fo,Fo)),t.pipe(Ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new jl(Zone.current)),this.insideAngular=t.run(()=>new jl(Zone.current,Zs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(he))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bl(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Kk(n){return Bl().ngZone.runOutsideAngular(()=>n())}function hi(n){return Bl().ngZone.run(()=>n())}function _t(n){return Qk(Bl())(n)}function Qk(n){return function(t){return t=t.lift(new Xg(n.ngZone)),t.pipe(kt(n.outsideAngular),St(n.insideAngular))}}var Yk=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),hi(()=>n.apply(void 0,r))},Lo=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=hi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fo,{},Fo,Fo))),r[o]=Yk(r[o],t));let i=Kk(()=>n.apply(this,r));if(!e)if(i instanceof ce){let o=Bl();return i.pipe(kt(o.outsideAngular),St(o.insideAngular))}else return hi(()=>i);return i instanceof ce?i.pipe(_t):i instanceof Promise?hi(()=>new Promise((o,s)=>i.then(a=>hi(()=>o(a)),a=>hi(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:hi(()=>i)};var Gn=class{constructor(e){return e}},fi=class{constructor(){return ec()}};function Zk(n){return n&&n.length===1?n[0]:new Gn(Ws())}var em=new z("angularfire2._apps"),Jk={provide:Gn,useFactory:Zk,deps:[[new ct,em]]},Xk={provide:fi,deps:[[new ct,em]]};function eO(n){return(e,t)=>{let r=t.get(vt);at("angularfire",zn.full,"core"),at("angularfire",zn.full,"app"),at("angular",eg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Gn(i)}}function UT(n,...e){return fn([Jk,Xk,{provide:em,useFactory:eO(n),multi:!0,deps:[he,ut,mn,...e]}])}var BT=Lo(aI,!0);var tO=new Map,nO={activated:!1,tokenObservers:[]},rO={initialized:!1,enabled:!1};function Jt(n){return tO.get(n)||Object.assign({},nO)}function GT(){return rO}var iO="https://content-firebaseappcheck.googleapis.com/v1";var oO="exchangeDebugToken",$T={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Kz=24*60*60*1e3;var nm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new ef,this.pending.promise.catch(t=>{}),yield sO(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ef,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function sO(n){return new Promise(e=>{setTimeout(e,n)})}var aO={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ir=new oI("appCheck","AppCheck",aO);function WT(n){if(!Jt(n).activated)throw Ir.create("use-before-activation",{appName:n.name})}function KT(r,i){return x(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Ir.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Ir.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Ir.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function QT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${iO}/projects/${t}/apps/${r}:${oO}?key=${i}`,body:{debug_token:e}}}var uO="firebase-app-check-database",cO=1,rm="firebase-app-check-store";var $l=null;function lO(){return $l||($l=new Promise((n,e)=>{try{let t=indexedDB.open(uO,cO);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ir.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rm,{keyPath:"compositeKey"})}}}catch(t){e(Ir.create("storage-open",{originalErrorMessage:t?.message}))}}),$l)}function dO(n,e){return hO(fO(n),e)}function hO(n,e){return x(this,null,function*(){let r=(yield lO()).transaction(rm,"readwrite"),o=r.objectStore(rm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ir.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function fO(n){return`${n.options.appId}-${n.name}`}var im=new Xu("@firebase/app-check");function tm(n,e){return Ju()?dO(n,e).catch(t=>{im.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YT(){return GT().enabled}function ZT(){return x(this,null,function*(){let n=GT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pO={error:"UNKNOWN_ERROR"};function gO(n){return tI.encodeString(JSON.stringify(n),!1)}function om(n,e=!1){return x(this,null,function*(){let t=n.app;WT(t);let r=Jt(t),i=r.token,o;if(i&&!qa(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(qa(c)?i=c:yield tm(t,void 0))}if(!e&&i&&qa(i))return{token:i.token};let s=!1;if(YT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=KT(QT(t,yield ZT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield tm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Jt(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?im.warn(c.message):im.error(c),o=c}let a;return i?o?qa(i)?a={token:i.token,internalError:o}:a=qT(o):(a={token:i.token},r.token=i,yield tm(t,i)):a=qT(o),s&&_O(t,a),a})}function mO(n){return x(this,null,function*(){let e=n.app;WT(e);let{provider:t}=Jt(e);if(YT()){let r=yield ZT(),{token:i}=yield KT(QT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yO(n,e,t,r){let{app:i}=n,o=Jt(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&qa(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),HT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>HT(n))}function JT(n,e){let t=Jt(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HT(n){let{app:e}=n,t=Jt(e),r=t.tokenRefresher;r||(r=vO(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vO(n){let{app:e}=n;return new nm(()=>x(this,null,function*(){let t=Jt(e),r;if(t.token?r=yield om(n,!0):r=yield om(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Jt(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$T.RETRIAL_MIN_WAIT,$T.RETRIAL_MAX_WAIT)}function _O(n,e){let t=Jt(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qa(n){return n.expireTimeMillis-Date.now()>0}function qT(n){return{token:gO(pO),error:n}}var sm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Jt(this.app);for(let t of e)JT(this.app,t.next);return Promise.resolve()}};function wO(n,e){return new sm(n,e)}function IO(n){return{getToken:e=>om(n,e),getLimitedUseToken:()=>mO(n),addTokenListener:e=>yO(n,"INTERNAL",e),removeTokenListener:e=>JT(n.app,e)}}var EO="@firebase/app-check",DO="0.8.8";var CO="app-check",zT="app-check-internal";function TO(){Gs(new Gr(CO,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return wO(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zT).initialize()})),Gs(new Gr(zT,n=>{let e=n.getProvider("app-check").getImmediate();return IO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),at(EO,DO)}TO();var bO=["localhost","0.0.0.0","127.0.0.1"],s9=typeof window<"u"&&bO.includes(window.location.hostname);var SO="firebase",AO="10.14.1";sn.registerVersion(SO,AO,"app-compat");var RO=["ngOnDestroy"],tb=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(RO.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var am=class{constructor(e){return e}},Hl=new z("angularfire2.app.options"),ql=new z("angularfire2.app.name");function zl(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=sn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>sn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;xO("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new am(s)}var xO=(n,...e)=>{ng()&&typeof console<"u"&&console[n](...e)};function Gl(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return MO(i,s)||(eb("error",`${e} was already initialized on the ${t} Firebase App with different settings.${NO?" You may need to reload as Firebase is not HMR aware.":""}`),eb("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function MO(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var NO=typeof module<"u"&&!!module.hot,eb=(n,...e)=>{ng()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var um=new z("angularfire2.auth.use-emulator"),cm=new z("angularfire2.auth.settings"),lm=new z("angularfire2.auth.tenant-id"),dm=new z("angularfire2.auth.langugage-code"),hm=new z("angularfire2.auth.use-device-language"),fm=new z("angularfire.auth.persistence"),pm=(n,e,t,r,i,o,s,a)=>Gl(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),nb=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new Ve,M=Z(void 0).pipe(St(s.outsideAngular),Fe(()=>o.runOutsideAngular(()=>import("./chunk-FUK65WA4.js"))),J(()=>zl(t,o,r)),J(N=>pm(N,o,a,l,h,p,c,m)),Ec({bufferSize:1,refCount:!1}));if(ui(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{M.pipe(Ot()).subscribe();let N=M.pipe(Fe(O=>O.getRedirectResult().then(Q=>Q,()=>null)),_t,Ec({bufferSize:1,refCount:!1})),V=M.pipe(Fe(O=>new ce(Q=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(X=>Q.next(X),X=>Q.error(X),()=>Q.complete()))})))),$=M.pipe(Fe(O=>new ce(Q=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(X=>Q.next(X),X=>Q.error(X),()=>Q.complete()))}))));this.authState=N.pipe(Dc(V),kt(s.outsideAngular),St(s.insideAngular)),this.user=N.pipe(Dc($),kt(s.outsideAngular),St(s.insideAngular)),this.idToken=this.user.pipe(Fe(O=>O?ye(O.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Fe(O=>O?ye(O.getIdTokenResult()):Z(null))),this.credential=Sf(N,b,this.authState.pipe(et(O=>!O))).pipe(J(O=>O?.user?O:null),kt(s.outsideAngular),St(s.insideAngular))}return tb(this,M,o,{spy:{apply:(N,V,$)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&$.then(O=>b.next(O))}}})}static \u0275fac=function(r){return new(r||n)(B(Hl),B(ql,8),B(vt),B(he),B(mn),B(um,8),B(cm,8),B(lm,8),B(dm,8),B(hm,8),B(fm,8),B(Zt,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var rb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ib={};var Er,gm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),An=2;An<arguments.length;An++)_[An-2]=arguments[An];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Q(w,y).g;w=V(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=V(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,An=I.i(D)>>>16,bs=I.i(D)&65535;w[2*E+2*D]+=_*bs,$(w,2*E+2*D),w[2*E+2*D+1]+=T*bs,$(w,2*E+2*D+1),w[2*E+2*D+1]+=_*An,$(w,2*E+2*D+1),w[2*E+2*D+2]+=T*An,$(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function $(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function O(I,y){this.g=I,this.h=y}function Q(I,y){if(b(y))throw Error("division by zero");if(b(I))return new O(p,p);if(M(I))return y=Q(N(I),y),new O(N(y.g),N(y.h));if(M(y))return y=Q(I,N(y)),new O(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=X(w),E=X(E);var D=Y(w,1),T=Y(E,1);for(E=Y(E,2),w=Y(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Y(E,1),w=Y(w,1)}return y=V(I,D.j(y)),new O(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=V(I,_)}return new O(D,I)}n.A=function(I){return Q(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function X(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Y(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gm=ib.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Er=ib.Integer=s}).apply(typeof rb<"u"?rb:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wn={};var mm,kO,Vo,ym,za,Kl,vm,_m,wm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)L[Ie-2]=arguments[Ie];return d.prototype[C].apply(g,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class V{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var X=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Y(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Ah;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class An{constructor(){this.h=this.g=null}add(d,f){let g=bs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var bs=new V(()=>new fA,u=>u.reset());class fA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ss,As=!1,Ah=new An,Z_=()=>{let u=a.Promise.resolve(void 0);Ss=()=>{u.then(pA)}};var pA=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=bs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}As=!1};function nr(){this.s=this.s,this.C=this.C}nr.prototype.s=!1,nr.prototype.ma=function(){this.s||(this.s=!0,this.N())},nr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var gA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Rs(u,d){if(rt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(X){e:{try{Q(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:mA[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Rs.aa.h.call(this)}}b(Rs,rt);var mA={2:"touch",3:"pen",4:"mouse"};Rs.prototype.h=function(){Rs.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xs="closure_listenable_"+(1e6*Math.random()|0),yA=0;function vA(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++yA,this.da=this.fa=!1}function ku(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ou(u){this.src=u,this.g={},this.h=0}Ou.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=xh(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new vA(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Rh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(ku(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function xh(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Mh="closure_lm_"+(1e6*Math.random()|0),Nh={};function J_(u,d,f,g,C){if(g&&g.once)return ew(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)J_(u,d[A],f,g,C);return null}return f=Fh(f),u&&u[xs]?u.K(d,f,l(g)?!!g.capture:!!g,C):X_(u,d,f,!1,g,C)}function X_(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Ie=kh(u);if(Ie||(u[Mh]=Ie=new Ou(u)),f=Ie.add(d,f,g,L,A),f.proxy)return f;if(g=_A(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)gA||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(nw(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function _A(){function u(f){return d.call(u.src,u.listener,f)}let d=wA;return u}function ew(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)ew(u,d[A],f,g,C);return null}return f=Fh(f),u&&u[xs]?u.L(d,f,l(g)?!!g.capture:!!g,C):X_(u,d,f,!0,g,C)}function tw(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)tw(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Fh(f),u&&u[xs]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=xh(A,f,g,C),-1<f&&(ku(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=kh(u))&&(d=u.g[d.toString()],u=-1,d&&(u=xh(d,f,g,C)),(f=-1<u?d[u]:null)&&Ph(f))}function Ph(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[xs])Rh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(nw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=kh(d))?(Rh(f,u),f.h==0&&(f.src=null,d[Mh]=null)):ku(u)}}}function nw(u){return u in Nh?Nh[u]:Nh[u]="on"+u}function wA(u,d){if(u.da)u=!0;else{d=new Rs(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Ph(u),u=f.call(g,d)}return u}function kh(u){return u=u[Mh],u instanceof Ou?u:null}var Oh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fh(u){return typeof u=="function"?u:(u[Oh]||(u[Oh]=function(d){return u.handleEvent(d)}),u[Oh])}function it(){nr.call(this),this.i=new Ou(this),this.M=this,this.F=null}b(it,nr),it.prototype[xs]=!0,it.prototype.removeEventListener=function(u,d,f,g){tw(this,u,d,f,g)};function ht(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new rt(d,u);else if(d instanceof rt)d.target=d.target||u;else{var C=d;d=new rt(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Fu(L,g,!0,d)&&C}if(L=d.g=u,C=Fu(L,g,!0,d)&&C,C=Fu(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Fu(L,g,!1,d)&&C}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)ku(f[g]);delete u.g[d],u.h--}}this.F=null},it.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},it.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function Fu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Ie=L.listener,Je=L.ha||L.src;L.fa&&Rh(u.i,L),C=Ie.call(Je,g)!==!1&&C}}return C&&!g.defaultPrevented}function rw(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function iw(u){u.g=rw(()=>{u.g=null,u.i&&(u.i=!1,iw(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class IA extends nr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:iw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(u){nr.call(this),this.h=u,this.g={}}b(Ms,nr);var ow=[];function sw(u){Y(u.g,function(d,f){this.g.hasOwnProperty(f)&&Ph(d)},u),u.g={}}Ms.prototype.N=function(){Ms.aa.N.call(this),sw(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lh=a.JSON.stringify,EA=a.JSON.parse,DA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Vh(){}Vh.prototype.h=null;function aw(u){return u.h||(u.h=u.i())}function uw(){}var Ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jh(){rt.call(this,"d")}b(jh,rt);function Uh(){rt.call(this,"c")}b(Uh,rt);var $r={},cw=null;function Lu(){return cw=cw||new it}$r.La="serverreachability";function lw(u){rt.call(this,$r.La,u)}b(lw,rt);function Ps(u){let d=Lu();ht(d,new lw(d))}$r.STAT_EVENT="statevent";function dw(u,d){rt.call(this,$r.STAT_EVENT,u),this.stat=d}b(dw,rt);function ft(u){let d=Lu();ht(d,new dw(d,u))}$r.Ma="timingevent";function hw(u,d){rt.call(this,$r.Ma,u),this.size=d}b(hw,rt);function ks(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function CA(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",Ie=A.split("&"),Je=0;Je<Ie.length;Je++){var me=Ie[Je].split("=");if(1<me.length){var ot=me[0];me=me[1];var st=ot.split("_");L=2<=st.length&&st[1]=="type"?L+(ot+"="+me+"&"):L+(ot+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function TA(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function Ui(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+SA(u,f)+(g?" "+g:"")})}function bA(u,d){u.info(function(){return"TIMEOUT: "+d})}Os.prototype.info=function(){};function SA(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Lh(f)}catch{return d}}var Vu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bh;function ju(){}b(ju,Vh),ju.prototype.g=function(){return new XMLHttpRequest},ju.prototype.i=function(){return{}},Bh=new ju;function rr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pw}function pw(){this.i=null,this.g="",this.h=!1}var gw={},$h={};function Hh(u,d,f){u.L=1,u.v=Hu(Rn(d)),u.m=f,u.P=!0,mw(u,null)}function mw(u,d){u.F=Date.now(),Uu(u),u.A=Rn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),xw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new pw,u.g=Kw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new IA(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(ow[0]=C.toString()),C=ow);for(var A=0;A<C.length;A++){var L=J_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Ps(),CA(u.i,u.u,u.A,u.l,u.R,u.m)}rr.prototype.ca=function(u){u=u.target;let d=this.M;d&&xn(u)==3?d.j():this.Y(u)},rr.prototype.Y=function(u){try{if(u==this.g)e:{let st=xn(this.g);var d=this.g.Ba();let Hi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Lw(this.g)))){this.J||st!=4||d==7||(d==8||0>=Hi?Ps(3):Ps(2)),qh(this);var f=this.g.Z();this.X=f;t:if(yw(this)){var g=Lw(this.g);u="";var C=g.length,A=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Fs(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,TA(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Je=this.g;if((Ie=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ie)){var me=Ie;break t}}me=null}if(f=me)Ui(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zh(this,f);else{this.o=!1,this.s=3,ft(12),Hr(this),Fs(this);break e}}if(this.P){f=!0;let qt;for(;!this.J&&this.C<L.length;)if(qt=AA(this,L),qt==$h){st==4&&(this.s=4,ft(14),f=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==gw){this.s=4,ft(15),Ui(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Ui(this.i,this.l,qt,null),zh(this,qt);if(yw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||L.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)Ui(this.i,this.l,L,"[Invalid Chunked Response]"),Hr(this),Fs(this);else if(0<L.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Zh(ot),ot.M=!0,ft(11))}}else Ui(this.i,this.l,L,null),zh(this,L);st==4&&Hr(this),this.o&&!this.J&&(st==4?qw(this.j,this):(this.o=!1,Uu(this)))}else zA(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Hr(this),Fs(this)}}}catch{}finally{}};function yw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function AA(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?$h:(f=Number(d.substring(f,g)),isNaN(f)?gw:(g+=1,g+f>d.length?$h:(d=d.slice(g,g+f),u.C=g+f,d)))}rr.prototype.cancel=function(){this.J=!0,Hr(this)};function Uu(u){u.S=Date.now()+u.I,vw(u,u.I)}function vw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ks(m(u.ba,u),d)}function qh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}rr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(bA(this.i,this.A),this.L!=2&&(Ps(),ft(17)),Hr(this),this.s=2,Fs(this)):vw(this,this.S-u)};function Fs(u){u.j.G==0||u.J||qw(u.j,u)}function Hr(u){qh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,sw(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function zh(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Gh(f.h,u))){if(!u.K&&Gh(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Ku(f),Gu(f);else break e;Yh(f),ft(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ks(m(f.Za,f),6e3));if(1>=Iw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zr(f,11)}else if((u.K||f.g==u)&&Ku(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let me=C[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let ot=me[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let st=me[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));let Hi=me[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(g=1.5*Hi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let qt=u.g;if(qt){let Yu=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yu){var A=g.h;A.g||Yu.indexOf("spdy")==-1&&Yu.indexOf("quic")==-1&&Yu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Wh(A,A.h),A.h=null))}if(g.D){let Jh=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jh&&(g.ya=Jh,be(g.I,g.D,Jh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=Ww(g,g.J?g.ia:null,g.W),L.K){Ew(g.h,L);var Ie=L,Je=g.L;Je&&(Ie.I=Je),Ie.B&&(qh(Ie),Uu(Ie)),g.g=L}else $w(g);0<f.i.length&&Wu(f)}else me[0]!="stop"&&me[0]!="close"||zr(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?zr(f,7):Qh(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Ps(4)}catch{}}var RA=class{constructor(u,d){this.g=u,this.map=d}};function _w(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ww(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Iw(u){return u.h?1:u.g?u.g.size:0}function Gh(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Wh(u,d){u.g?u.g.add(d):u.h=d}function Ew(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}_w.prototype.cancel=function(){if(this.i=Dw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Dw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function xA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function MA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function Cw(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=MA(u),g=xA(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var Tw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NA(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function qr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof qr){this.h=u.h,Bu(this,u.j),this.o=u.o,this.g=u.g,$u(this,u.s),this.l=u.l;var d=u.i,f=new js;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bw(this,f),this.m=u.m}else u&&(d=String(u).match(Tw))?(this.h=!1,Bu(this,d[1]||"",!0),this.o=Ls(d[2]||""),this.g=Ls(d[3]||"",!0),$u(this,d[4]),this.l=Ls(d[5]||"",!0),bw(this,d[6]||"",!0),this.m=Ls(d[7]||"")):(this.h=!1,this.i=new js(null,this.h))}qr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Vs(d,Sw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Vs(d,Sw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Vs(f,f.charAt(0)=="/"?OA:kA,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Vs(f,LA)),u.join("")};function Rn(u){return new qr(u)}function Bu(u,d,f){u.j=f?Ls(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function $u(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function bw(u,d,f){d instanceof js?(u.i=d,VA(u.i,u.h)):(f||(d=Vs(d,FA)),u.i=new js(d,u.h))}function be(u,d,f){u.i.set(d,f)}function Hu(u){return be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ls(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vs(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,PA),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function PA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Sw=/[#\/\?@]/g,kA=/[#\?:]/g,OA=/[#\?]/g,FA=/[#\?@]/g,LA=/#/g;function js(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function ir(u){u.g||(u.g=new Map,u.h=0,u.i&&NA(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=js.prototype,n.add=function(u,d){ir(this),this.i=null,u=Bi(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Aw(u,d){ir(u),d=Bi(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Rw(u,d){return ir(u),d=Bi(u,d),u.g.has(d)}n.forEach=function(u,d){ir(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){ir(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){ir(this);let d=[];if(typeof u=="string")Rw(this,u)&&(d=d.concat(this.g.get(Bi(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return ir(this),this.i=null,u=Bi(this,u),Rw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function xw(u,d,f){Aw(u,d),0<f.length&&(u.i=null,u.g.set(Bi(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function Bi(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function VA(u,d){d&&!u.j&&(ir(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Aw(this,g),xw(this,C,f))},u)),u.j=d}function jA(u,d){let f=new Os;if(a.Image){let g=new Image;g.onload=v(or,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(or,f,"TestLoadImage: error",!1,d,g),g.onabort=v(or,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(or,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function UA(u,d){let f=new Os,g=new AbortController,C=setTimeout(()=>{g.abort(),or(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?or(f,"TestPingServer: ok",!0,d):or(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),or(f,"TestPingServer: error",!1,d)})}function or(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function BA(){this.g=new DA}function $A(u,d,f){let g=f||"";try{Cw(u,function(C,A){let L=C;l(C)&&(L=Lh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Us(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Us,Vh),Us.prototype.g=function(){return new qu(this.l,this.j)},Us.prototype.i=function(u){return function(){return u}}({});function qu(u,d){it.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(qu,it),n=qu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,$s(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Mw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Bs(this):$s(this),this.readyState==3&&Mw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Bs(this))},n.Qa=function(u){this.g&&(this.response=u,Bs(this))},n.ga=function(){this.g&&Bs(this)};function Bs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,$s(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function $s(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nw(u){let d="";return Y(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Kh(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Nw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):be(u,d,f))}function ke(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ke,it);var HA=/^https?$/i,qA=["POST","PUT"];n=ke.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bh.g(),this.v=this.o?aw(this.o):aw(Bh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){Pw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qA,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){Pw(this,A)}};function Pw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,kw(u),zu(u)}function kw(u){u.A||(u.A=!0,ht(u,"complete"),ht(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ht(this,"complete"),ht(this,"abort"),zu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zu(this,!0)),ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ow(this):this.bb())},n.bb=function(){Ow(this)};function Ow(u){if(u.h&&typeof s<"u"&&(!u.v[1]||xn(u)!=4||u.Z()!=2)){if(u.u&&xn(u)==4)rw(u.Ea,0,u);else if(ht(u,"readystatechange"),xn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(Tw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!HA.test(C?C.toLowerCase():"")}f=g}if(f)ht(u,"complete"),ht(u,"success");else{u.m=6;try{var A=2<xn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",kw(u)}}finally{zu(u)}}}}function zu(u,d){if(u.g){Fw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||ht(u,"ready");try{f.onreadystatechange=g}catch{}}}function Fw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function xn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),EA(d)}};function Lw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zA(u){let d={};u=(u.g&&2<=xn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if($(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function Vw(u){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hs("baseRetryDelayMs",5e3,u),this.cb=Hs("retryDelaySeedMs",1e4,u),this.Wa=Hs("forwardChannelMaxRetries",2,u),this.wa=Hs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _w(u&&u.concurrentRequestLimit),this.Da=new BA,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Vw.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){ft(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Ww(this,null,this.W),Wu(this)};function Qh(u){if(jw(u),u.G==3){var d=u.U++,f=Rn(u.I);if(be(f,"SID",u.K),be(f,"RID",d),be(f,"TYPE","terminate"),qs(u,f),d=new rr(u,u.j,d),d.L=2,d.v=Hu(Rn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Kw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Uu(d)}Gw(u)}function Gu(u){u.g&&(Zh(u),u.g.cancel(),u.g=null)}function jw(u){Gu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ku(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Wu(u){if(!ww(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ss||Z_(),As||(Ss(),As=!0),Ah.add(d,u),u.B=0}}function GA(u,d){return Iw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ks(m(u.Ga,u,d),zw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new rr(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Bw(this,C,d),f=Rn(this.I),be(f,"RID",u),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),qs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Nw(A)))+"&"+d:this.m&&Kh(f,this.m,A)),Wh(this.h,C),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),C.T=!0,Hh(C,f,null)):Hh(C,f,d),this.G=2}}else this.G==3&&(u?Uw(this,u):this.i.length==0||ww(this.h)||Uw(this))};function Uw(u,d){var f;d?f=d.l:f=u.U++;let g=Rn(u.I);be(g,"SID",u.K),be(g,"RID",f),be(g,"AID",u.T),qs(u,g),u.m&&u.o&&Kh(g,u.m,u.o),f=new rr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Bw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Wh(u.h,f),Hh(f,g,d)}function qs(u,d){u.H&&Y(u.H,function(f,g){be(d,g,f)}),u.l&&Cw({},function(f,g){be(d,g,f)})}function Bw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Ie=!0;for(let Je=0;Je<f;Je++){let me=C[Je].g,ot=C[Je].map;if(me-=A,0>me)A=Math.max(0,C[Je].g-100),Ie=!1;else try{$A(ot,L,"req"+me+"_")}catch{g&&g(ot)}}if(Ie){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function $w(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ss||Z_(),As||(Ss(),As=!0),Ah.add(d,u),u.v=0}}function Yh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ks(m(u.Fa,u),zw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Hw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ks(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Gu(this),Hw(this))};function Zh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Hw(u){u.g=new rr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Rn(u.qa);be(d,"RID","rpc"),be(d,"SID",u.K),be(d,"AID",u.T),be(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&be(d,"TO",u.ja),be(d,"TYPE","xmlhttp"),qs(u,d),u.m&&u.o&&Kh(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Hu(Rn(d)),f.m=null,f.P=!0,mw(f,u)}n.Za=function(){this.C!=null&&(this.C=null,Gu(this),Yh(this),ft(19))};function Ku(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qw(u,d){var f=null;if(u.g==d){Ku(u),Zh(u),u.g=null;var g=2}else if(Gh(u.h,d))f=d.D,Ew(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=Lu(),ht(g,new hw(g,f)),Wu(u)}else $w(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&GA(u,d)||g==2&&Yh(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:zr(u,5);break;case 4:zr(u,10);break;case 3:zr(u,6);break;default:zr(u,2)}}}function zw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function zr(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new qr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bu(g,"https"),Hu(g),C?jA(g.toString(),f):UA(g.toString(),f)}else ft(2);u.G=0,u.l&&u.l.sa(d),Gw(u),jw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Gw(u){if(u.G=0,u.ka=[],u.l){let d=Dw(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function Ww(u,d,f){var g=f instanceof qr?Rn(f):new qr(f);if(g.g!="")d&&(g.g=d+"."+g.g),$u(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new qr(null);g&&Bu(A,g),d&&(A.g=d),C&&$u(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&be(g,f,d),be(g,"VER",u.la),qs(u,g),g}function Kw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new ke(new Us({eb:f})):new ke(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qw(){}n=Qw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qu(){}Qu.prototype.g=function(u,d){return new bt(u,d)};function bt(u,d){it.call(this),this.g=new Vw(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!$(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new $i(this)}b(bt,it),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Qh(this.g)},bt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Lh(u),u=f);d.i.push(new RA(d.Ya++,u)),d.G==3&&Wu(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,Qh(this.g),delete this.g,bt.aa.N.call(this)};function Yw(u){jh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b(Yw,jh);function Zw(){Uh.call(this),this.status=1}b(Zw,Uh);function $i(u){this.g=u}b($i,Qw),$i.prototype.ua=function(){ht(this.g,"a")},$i.prototype.ta=function(u){ht(this.g,new Yw(u))},$i.prototype.sa=function(u){ht(this.g,new Zw)},$i.prototype.ra=function(){ht(this.g,"b")},Qu.prototype.createWebChannel=Qu.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,wm=Wn.createWebChannelTransport=function(){return new Qu},_m=Wn.getStatEventTarget=function(){return Lu()},vm=Wn.Event=$r,Kl=Wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vu.NO_ERROR=0,Vu.TIMEOUT=8,Vu.HTTP_ERROR=6,za=Wn.ErrorCode=Vu,fw.COMPLETE="complete",ym=Wn.EventType=fw,uw.EventType=Ns,Ns.OPEN="a",Ns.CLOSE="b",Ns.ERROR="c",Ns.MESSAGE="d",it.prototype.listen=it.prototype.K,Vo=Wn.WebChannel=uw,kO=Wn.FetchXmlHttpFactory=Us,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,mm=Wn.XhrIo=ke}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});var ob="@firebase/firestore";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var gs="10.14.0";var Rr=new Xu("@firebase/firestore");function Ho(){return Rr.logLevel}function Tv(n){Rr.setLogLevel(n)}function k(n,...e){if(Rr.logLevel<=on.DEBUG){let t=e.map(bv);Rr.debug(`Firestore (${gs}): ${n}`,...t)}}function je(n,...e){if(Rr.logLevel<=on.ERROR){let t=e.map(bv);Rr.error(`Firestore (${gs}): ${n}`,...t)}}function Xt(n,...e){if(Rr.logLevel<=on.WARN){let t=e.map(bv);Rr.warn(`Firestore (${gs}): ${n}`,...t)}}function bv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${gs}) INTERNAL ASSERTION FAILED: `+n;throw je(e),new Error(e)}function G(n,e){n||H()}function u0(n,e){n||H()}function j(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends iI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var id=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ge.UNAUTHENTICATED))}shutdown(){}},Sm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Am=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){G(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>x(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(G(typeof r.accessToken=="string"),new id(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return G(e===null||typeof e=="string"),new Ge(e)}},Rm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},xm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Rm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Nm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){G(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(G(typeof t.token=="string"),this.R=t.token,new Mm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function OO(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var od=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=OO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ne(n,e){return n<e?-1:n>e?1:0}function Jo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function c0(n){return n+"\0"}var Ne=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var K=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ne(0,0))}static max(){return new n(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(),r===void 0?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},pe=class n extends sd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},FO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ue=class n extends sd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return FO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};var Xo=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Pm(n){return n.fields.find(e=>e.kind===2)}function gi(n){return n.fields.filter(e=>e.kind!==2)}Xo.UNKNOWN_ID=-1;var Qo=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ru=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,$t.min())}};function l0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new Ne(t+1,0):new Ne(t,r));return new $t(i,U.empty(),e)}function d0(n){return new $t(n.readTime,n.key,-1)}var $t=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),U.empty(),-1)}static max(){return new n(K.max(),U.empty(),-1)}};function Sv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:ne(n.largestBatchId,e.largestBatchId))}var h0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ad=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function jr(n){return x(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==h0)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var ud=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ii(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Av(r.target.error);this.V.reject(new Ii(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Ii(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Om(t)}},xr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(zs())===12.2&&je("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),mi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ju())return!1;if(n.v())return!0;let e=zs(),t=n.S(e),r=0<t&&t<10,i=f0(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return x(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Ii(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ii(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return x(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=ud.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function f0(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var km=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return mi(this.B.delete())}},Ii=class extends P{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ur(n){return n.name==="IndexedDbTransactionError"}var Om=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),mi(this.store.add(e))}get(e){return mi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),mi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),mi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Av(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new km(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function mi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Av(r.target.error);t(i)}})}var sb=!1;function Av(n){let e=xr.S(zs());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sb||(sb=!0,setTimeout(()=>{throw r},0)),r}}return n}var Fm=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Ur(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield jr(t)}yield this.X(6e4)}))}},Lm=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=d0(o);Sv(s,r)>0&&(r=s)}),new $t(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Nt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Cu(n){return n==null}function iu(n){return n===0&&1/n==-1/0}function p0(n){return typeof n=="number"&&Number.isInteger(n)&&!iu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function wt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ab(e)),e=LO(n.get(t),e);return ab(e)}function LO(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function ab(n){return n+""}function yn(n){let e=n.length;if(G(e>=2),e===2)return G(n.charAt(0)===""&&n.charAt(1)===""),pe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&H(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:H()}o=s+2}return new pe(r)}var ub=["userId","batchId"];function Xl(n,e){return[n,wt(e)]}function g0(n,e,t){return[n,wt(e),t]}var VO={},jO=["prefixPath","collectionGroup","readTime","documentId"],UO=["prefixPath","collectionGroup","documentId"],BO=["collectionGroup","readTime","prefixPath","documentId"],$O=["canonicalId","targetId"],HO=["targetId","path"],qO=["path","targetId"],zO=["collectionId","parent"],GO=["indexId","uid"],WO=["uid","sequenceNumber"],KO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QO=["indexId","uid","orderedDocumentKey"],YO=["userId","collectionPath","documentId"],ZO=["userId","collectionPath","largestBatchId"],JO=["userId","collectionGroup","largestBatchId"],m0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XO=[...m0,"documentOverlays"],y0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],v0=y0,Rv=[...v0,"indexConfiguration","indexState","indexEntries"],eF=Rv,tF=[...Rv,"globals"];var ou=class extends ad{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Ye(n,e){let t=j(n);return xr.F(t._e,e)}function cb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ae=class n{constructor(e,t){this.comparator=e,this.root=t||_n.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}},Ko=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_n=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,r,i,o){return this}insert(e,t,r){return new _n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class n{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cd(this.data.getIterator())}getIteratorFrom(e){return new cd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},cd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function jo(n){return n.hasNext()?n.getNext():void 0}var Pt=class n{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ce(Ue.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ld=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function w0(){return typeof atob<"u"}var $e=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ld("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};$e.EMPTY_BYTE_STRING=new $e("");var nF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(n){if(G(!!n),typeof n=="string"){let e=0,t=nF.exec(n);if(G(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(n.seconds),nanos:Re(n.nanos)}}function Re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mr(n){return typeof n=="string"?$e.fromBase64String(n):$e.fromUint8Array(n)}function th(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function xv(n){let e=n.mapValue.fields.__previous_value__;return th(e)?xv(e):e}function su(n){let e=Yn(n.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}var Vm=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Nr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Sr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ed={nullValue:"NULL_VALUE"};function Ei(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?th(n)?4:I0(n)?9007199254740991:nh(n)?10:11:H()}function En(n,e){if(n===e)return!0;let t=Ei(n);if(t!==Ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return su(n).isEqual(su(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Yn(i.timestampValue),a=Yn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Mr(i.bytesValue).isEqual(Mr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Re(i.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Re(i.integerValue)===Re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Re(i.doubleValue),a=Re(o.doubleValue);return s===a?iu(s)===iu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Jo(n.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cb(s)!==cb(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!En(s[c],a[c])))return!1;return!0}(n,e);default:return H()}}function au(n,e){return(n.values||[]).find(t=>En(t,e))!==void 0}function Pr(n,e){if(n===e)return 0;let t=Ei(n),r=Ei(e);if(t!==r)return ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Re(o.integerValue||o.doubleValue),c=Re(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return lb(n.timestampValue,e.timestampValue);case 4:return lb(su(n),su(e));case 5:return ne(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Mr(o),c=Mr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ne(a[l],c[l]);if(h!==0)return h}return ne(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ne(Re(o.latitude),Re(s.latitude));return a!==0?a:ne(Re(o.longitude),Re(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return db(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=ne(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:db(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Sr.mapValue&&s===Sr.mapValue)return 0;if(o===Sr.mapValue)return 1;if(s===Sr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ne(c[p],h[p]);if(m!==0)return m;let v=Pr(a[c[p]],l[h[p]]);if(v!==0)return v}return ne(c.length,h.length)}(n.mapValue,e.mapValue);default:throw H()}}function lb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ne(n,e);let t=Yn(n),r=Yn(e),i=ne(t.seconds,r.seconds);return i!==0?i:ne(t.nanos,r.nanos)}function db(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Pr(t[i],r[i]);if(o)return o}return ne(t.length,r.length)}function es(n){return jm(n)}function jm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Yn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Mr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=jm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${jm(t.fields[s])}`;return i+"}"}(n.mapValue):H()}function Di(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Um(n){return!!n&&"integerValue"in n}function uu(n){return!!n&&"arrayValue"in n}function hb(n){return!!n&&"nullValue"in n}function fb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function td(n){return!!n&&"mapValue"in n}function nh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ja(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Pi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ja(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ja(n.arrayValue.values[t]);return e}return Object.assign({},n)}function I0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var E0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rF(n){return"nullValue"in n?ed:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Di(Nr.empty(),U.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nh(n)?E0:{mapValue:{}}:H()}function iF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Di(Nr.empty(),U.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?E0:"mapValue"in n?nh(n)?{mapValue:{}}:Sr:H()}function pb(n,e){let t=Pr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gb(n,e){let t=Pr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!td(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(t)}setAll(e){let t=Ue.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ja(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());td(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ja(this.value))}};function D0(n){let e=[];return Pi(n.fields,(t,r)=>{let i=new Ue([t]);if(td(r)){let o=D0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pt(e)}var We=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Dn=class{constructor(e,t){this.position=e,this.inclusive=t}};function mb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),t.key):r=Pr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function yb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!En(n.position[t],e.position[t]))return!1;return!0}var Ci=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function oF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var dd=class{},le=class n extends dd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Hm(e,t,r):t==="array-contains"?new Gm(e,r):t==="in"?new hd(e,r):t==="not-in"?new Wm(e,r):t==="array-contains-any"?new Km(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new qm(e,r):new zm(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Pr(t,this.value)):t!==null&&Ei(this.value)===Ei(t)&&this.matchesComparison(Pr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},_e=class n extends dd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ts(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ts(n){return n.op==="and"}function Bm(n){return n.op==="or"}function Mv(n){return C0(n)&&ts(n)}function C0(n){for(let e of n.filters)if(e instanceof _e)return!1;return!0}function $m(n){if(n instanceof le)return n.field.canonicalString()+n.op.toString()+es(n.value);if(Mv(n))return n.filters.map(e=>$m(e)).join(",");{let e=n.filters.map(t=>$m(t)).join(",");return`${n.op}(${e})`}}function T0(n,e){return n instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)}(n,e):n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&T0(s,i.filters[a]),!0):!1}(n,e):void H()}function b0(n,e){let t=n.filters.concat(e);return _e.create(t,n.op)}function S0(n){return n instanceof le?function(t){return`${t.field.canonicalString()} ${t.op} ${es(t.value)}`}(n):n instanceof _e?function(t){return t.op.toString()+" {"+t.getFilters().map(S0).join(" ,")+"}"}(n):"Filter"}var Hm=class extends le{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},qm=class extends le{constructor(e,t){super(e,"in",t),this.keys=A0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},zm=class extends le{constructor(e,t){super(e,"not-in",t),this.keys=A0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function A0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var Gm=class extends le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return uu(t)&&au(t.arrayValue,this.value)}},hd=class extends le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&au(this.value.arrayValue,t)}},Wm=class extends le{constructor(e,t){super(e,"not-in",t)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!au(this.value.arrayValue,t)}},Km=class extends le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!uu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>au(this.value.arrayValue,r))}};var Qm=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Ym(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Qm(n,e,t,r,i,o,s)}function Ti(n){let e=j(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$m(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>es(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>es(r)).join(",")),e.ue=t}return e.ue}function Tu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!T0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yb(n.startAt,e.startAt)&&yb(n.endAt,e.endAt)}function fd(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function pd(n,e){return n.filters.filter(t=>t instanceof le&&t.field.isEqual(e))}function vb(n,e,t){let r=ed,i=!0;for(let o of pd(n,e)){let s=ed,a=!0;switch(o.op){case"<":case"<=":s=rF(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ed}pb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];pb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function _b(n,e,t){let r=Sr,i=!0;for(let o of pd(n,e)){let s=Sr,a=!0;switch(o.op){case">=":case">":s=iF(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Sr}gb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];gb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var en=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function R0(n,e,t,r,i,o,s,a){return new en(n,e,t,r,i,o,s,a)}function ms(n){return new en(n)}function wb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Nv(n){return n.collectionGroup!==null}function Yo(n){let e=j(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ce(Ue.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ci(o,r))}),t.has(Ue.keyField().canonicalString())||e.ce.push(new Ci(Ue.keyField(),r))}return e.ce}function It(n){let e=j(n);return e.le||(e.le=sF(e,Yo(n))),e.le}function sF(n,e){if(n.limitType==="F")return Ym(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ci(i.field,o)});let t=n.endAt?new Dn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dn(n.startAt.position,n.startAt.inclusive):null;return Ym(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zm(n,e){let t=n.filters.concat([e]);return new en(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gd(n,e,t){return new en(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bu(n,e){return Tu(It(n),It(e))&&n.limitType===e.limitType}function x0(n){return`${Ti(It(n))}|lt:${n.limitType}`}function qo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>S0(i)).join(", ")}]`),Cu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>es(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>es(i)).join(",")),`Target(${r})`}(It(n))}; limitType=${n.limitType})`}function Su(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Yo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=mb(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Yo(r),i)||r.endAt&&!function(s,a,c){let l=mb(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Yo(r),i))}(n,e)}function M0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function N0(n){return(e,t)=>{let r=!1;for(let i of Yo(n)){let o=aF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aF(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Pr(c,l):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var Cn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return _0(this.inner)}size(){return this.innerSize}};var uF=new Ae(U.comparator);function Tt(){return uF}var P0=new Ae(U.comparator);function Ya(...n){let e=P0;for(let t of n)e=e.insert(t.key,t);return e}function k0(n){let e=P0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vn(){return Xa()}function O0(){return Xa()}function Xa(){return new Cn(n=>n.toString(),(n,e)=>n.isEqual(e))}var cF=new Ae(U.comparator),lF=new Ce(U.comparator);function ie(...n){let e=lF;for(let t of n)e=e.add(t);return e}var dF=new Ce(ne);function Pv(){return dF}function kv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function F0(n){return{integerValue:""+n}}function L0(n,e){return p0(e)?F0(e):kv(n,e)}var ns=class{constructor(){this._=void 0}};function hF(n,e,t){return n instanceof kr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&th(o)&&(o=xv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Zn?j0(n,e):n instanceof Jn?U0(n,e):function(i,o){let s=V0(i,o),a=Ib(s)+Ib(i.Pe);return Um(s)&&Um(i.Pe)?F0(a):kv(i.serializer,a)}(n,e)}function fF(n,e,t){return n instanceof Zn?j0(n,e):n instanceof Jn?U0(n,e):t}function V0(n,e){return n instanceof Or?function(r){return Um(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var kr=class extends ns{},Zn=class extends ns{constructor(e){super(),this.elements=e}};function j0(n,e){let t=B0(e);for(let r of n.elements)t.some(i=>En(i,r))||t.push(r);return{arrayValue:{values:t}}}var Jn=class extends ns{constructor(e){super(),this.elements=e}};function U0(n,e){let t=B0(e);for(let r of n.elements)t=t.filter(i=>!En(i,r));return{arrayValue:{values:t}}}var Or=class extends ns{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Ib(n){return Re(n.integerValue||n.doubleValue)}function B0(n){return uu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var bi=class{constructor(e,t){this.field=e,this.transform=t}};function pF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Zn&&i instanceof Zn||r instanceof Jn&&i instanceof Jn?Jo(r.elements,i.elements,En):r instanceof Or&&i instanceof Or?En(r.Pe,i.Pe):r instanceof kr&&i instanceof kr}(n.transform,e.transform)}var Jm=class{constructor(e,t){this.version=e,this.transformResults=t}},Le=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function nd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var rs=class{};function $0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lr(n.key,Le.none()):new Fr(n.key,n.data,Le.none());{let t=n.data,r=dt.empty(),i=new Ce(Ue.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new tn(n.key,r,new Pt(i.toArray()),Le.none())}}function gF(n,e,t){n instanceof Fr?function(i,o,s){let a=i.value.clone(),c=Db(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof tn?function(i,o,s){if(!nd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Db(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(H0(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function eu(n,e,t,r){return n instanceof Fr?function(o,s,a,c){if(!nd(o.precondition,s))return a;let l=o.value.clone(),h=Cb(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof tn?function(o,s,a,c){if(!nd(o.precondition,s))return a;let l=Cb(o.fieldTransforms,c,s),h=s.data;return h.setAll(H0(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return nd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function mF(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=V0(r.transform,i||null);o!=null&&(t===null&&(t=dt.empty()),t.set(r.field,o))}return t||null}function Eb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jo(r,i,(o,s)=>pF(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fr=class extends rs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},tn=class extends rs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function H0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Db(n,e,t){let r=new Map;G(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fF(s,a,t[i]))}return r}function Cb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,hF(o,s,e))}return r}var Lr=class extends rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cu=class extends rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gF(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=eu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=eu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=O0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=$0(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,r)=>Eb(t,r))&&Jo(this.baseMutations,e.baseMutations,(t,r)=>Eb(t,r))}},Xm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){G(e.mutations.length===r.length);let i=function(){return cF}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var du=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ey=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var qe,fe;function q0(n){switch(n){default:return H();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function z0(n){if(n===void 0)return je("GRPC error has no .code"),R.UNKNOWN;switch(n){case qe.OK:return R.OK;case qe.CANCELLED:return R.CANCELLED;case qe.UNKNOWN:return R.UNKNOWN;case qe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case qe.INTERNAL:return R.INTERNAL;case qe.UNAVAILABLE:return R.UNAVAILABLE;case qe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case qe.NOT_FOUND:return R.NOT_FOUND;case qe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case qe.ABORTED:return R.ABORTED;case qe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case qe.DATA_LOSS:return R.DATA_LOSS;default:return H()}}(fe=qe||(qe={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var Tb=null;function G0(){return new TextEncoder}var yF=new Er([4294967295,4294967295],0);function bb(n){let e=G0().encode(n),t=new gm;return t.update(e),new Uint8Array(t.digest())}function Sb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Er([t,r],0),new Er([i,o],0)]}var ty=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wi(`Invalid padding: ${t}`);if(r<0)throw new wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Er.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Er.fromNumber(r)));return i.compare(yF)===1&&(i=new Er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=bb(e),[r,i]=Sb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=bb(e),[r,i]=Sb(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},wi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new Ae(ne),Tt(),ie())}},fu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Zo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},md=class{constructor(e,t){this.targetId=e,this.me=t}},yd=class{constructor(e,t,r=$e.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vd=class{constructor(){this.fe=0,this.ge=Rb(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new fu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Rb()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,G(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ny=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tt(),this.qe=Ab(),this.Qe=new Ae(ne)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(fd(o))if(r===0){let s=new U(o.path);this.Ue(t,s,We.newNoDocument(s,K.min()))}else G(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}Tb?.et(function(h,p,m,v,b){var M,N,V,$,O,Q;let X={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Y=p.unchangedNames;return Y&&(X.bloomFilter={applied:b===0,hashCount:(M=Y?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:($=(V=(N=Y?.bits)===null||N===void 0?void 0:N.bitmap)===null||V===void 0?void 0:V.length)!==null&&$!==void 0?$:0,padding:(Q=(O=Y?.bits)===null||O===void 0?void 0:O.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),X}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Mr(r).toUint8Array()}catch(c){if(c instanceof ld)return Xt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ty(s,i,o)}catch(c){return Xt(c instanceof wi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&fd(a.target)){let c=new U(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,We.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new hu(e,t,this.Qe,this.ke,r);return this.ke=Tt(),this.qe=Ab(),this.Qe=new Ae(ne),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ce(ne),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Ab(){return new Ae(U.comparator)}function Rb(){return new Ae(U.comparator)}var vF={asc:"ASCENDING",desc:"DESCENDING"},_F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wF={and:"AND",or:"OR"},ry=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function iy(n,e){return n.useProto3Json||Cu(e)?e:{value:e}}function is(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IF(n,e){return is(n,e.toTimestamp())}function Be(n){return G(!!n),K.fromTimestamp(function(t){let r=Yn(t);return new Ne(r.seconds,r.nanos)}(n))}function Ov(n,e){return oy(n,e).canonicalString()}function oy(n,e){let t=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function K0(n){let e=pe.fromString(n);return G(iS(e)),e}function pu(n,e){return Ov(n.databaseId,e.path)}function wn(n,e){let t=K0(e);if(t.get(1)!==n.databaseId.projectId)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(Z0(t))}function Q0(n,e){return Ov(n.databaseId,e)}function Y0(n){let e=K0(n);return e.length===4?pe.emptyPath():Z0(e)}function sy(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Z0(n){return G(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function xb(n,e,t){return{name:pu(n,e),fields:t.value.mapValue.fields}}function J0(n,e,t){let r=wn(n,e.name),i=Be(e.updateTime),o=e.createTime?Be(e.createTime):K.min(),s=new dt({mapValue:{fields:e.fields}}),a=We.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function EF(n,e){return"found"in e?function(r,i){G(!!i.found),i.found.name,i.found.updateTime;let o=wn(r,i.found.name),s=Be(i.found.updateTime),a=i.found.createTime?Be(i.found.createTime):K.min(),c=new dt({mapValue:{fields:i.found.fields}});return We.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){G(!!i.missing),G(!!i.readTime);let o=wn(r,i.missing),s=Be(i.readTime);return We.newNoDocument(o,s)}(n,e):H()}function DF(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(G(h===void 0||typeof h=="string"),$e.fromBase64String(h||"")):(G(h===void 0||h instanceof Buffer||h instanceof Uint8Array),$e.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:z0(l.code);return new P(h,l.message||"")}(s);t=new yd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wn(n,r.document.name),o=Be(r.document.updateTime),s=r.document.createTime?Be(r.document.createTime):K.min(),a=new dt({mapValue:{fields:r.document.fields}}),c=We.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Zo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wn(n,r.document),o=r.readTime?Be(r.readTime):K.min(),s=We.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Zo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wn(n,r.document),o=r.removedTargetIds||[];t=new Zo([],o,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ey(i,o),a=r.targetId;t=new md(a,s)}}return t}function gu(n,e){let t;if(e instanceof Fr)t={update:xb(n,e.key,e.value)};else if(e instanceof Lr)t={delete:pu(n,e.key)};else if(e instanceof tn)t={update:xb(n,e.key,e.data),updateMask:RF(e.fieldMask)};else{if(!(e instanceof cu))return H();t={verify:pu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof kr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Or)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:IF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H()}(n,e.precondition)),t}function ay(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Le.updateTime(Be(o.updateTime)):o.exists!==void 0?Le.exists(o.exists):Le.none()}(e.currentDocument):Le.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)G(a.setToServerValue==="REQUEST_TIME"),c=new kr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Zn(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Jn(h)}else"increment"in a?c=new Or(s,a.increment):H();let l=Ue.fromServerFormat(a.fieldPath);return new bi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=wn(n,e.update.name),o=new dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Pt(l.map(h=>Ue.fromServerFormat(h)))}(e.updateMask);return new tn(i,o,s,t,r)}return new Fr(i,o,t,r)}if(e.delete){let i=wn(n,e.delete);return new Lr(i,t)}if(e.verify){let i=wn(n,e.verify);return new cu(i,t)}return H()}function CF(n,e){return n&&n.length>0?(G(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Be(i.updateTime):Be(o);return s.isEqual(K.min())&&(s=Be(o)),new Jm(s,i.transformResults||[])}(t,e))):[]}function X0(n,e){return{documents:[Q0(n,e.path)]}}function eS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Q0(n,i);let o=function(l){if(l.length!==0)return rS(_e.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:zo(m.field),direction:bF(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=iy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function tS(n){let e=Y0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){G(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=nS(p);return m instanceof _e&&Mv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Ci(Go(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Cu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Dn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Dn(v,m)}(t.endAt)),R0(e,i,s,o,a,"F",c,l)}function TF(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Go(t.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Go(t.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Go(t.unaryFilter.field);return le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Go(t.unaryFilter.field);return le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return le.create(Go(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _e.create(t.compositeFilter.filters.map(r=>nS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function bF(n){return vF[n]}function SF(n){return _F[n]}function AF(n){return wF[n]}function zo(n){return{fieldPath:n.canonicalString()}}function Go(n){return Ue.fromServerFormat(n.fieldPath)}function rS(n){return n instanceof le?function(t){if(t.op==="=="){if(fb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(hb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(hb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:SF(t.op),value:t.value}}}(n):n instanceof _e?function(t){let r=t.getFilters().map(i=>rS(i));return r.length===1?r[0]:{compositeFilter:{op:AF(t.op),filters:r}}}(n):H()}function RF(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var os=class n{constructor(e,t,r,i,o=K.min(),s=K.min(),a=$e.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _d=class{constructor(e){this.ct=e}};function xF(n,e){let t;if(e.document)t=J0(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=U.fromSegments(e.noDocument.path),i=Ai(e.noDocument.readTime);t=We.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{let r=U.fromSegments(e.unknownDocument.path),i=Ai(e.unknownDocument.version);t=We.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ne(i[0],i[1]);return K.fromTimestamp(o)}(e.readTime)),t}function Mb(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:pu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:is(o,s.version.toTimestamp()),createTime:is(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Si(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:t.path.toArray(),version:Si(e.version)}}return r}function wd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Si(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ai(n){let e=new Ne(n.seconds,n.nanoseconds);return K.fromTimestamp(e)}function yi(n,e){let t=(e.baseMutations||[]).map(o=>ay(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>ay(n.ct,o)),i=Ne.fromMillis(e.localWriteTimeMs);return new lu(e.batchId,i,t,r)}function Za(n){let e=Ai(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ai(n.lastLimboFreeSnapshotVersion):K.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return G(o.documents.length===1),It(ms(Y0(o.documents[0])))}(n.query):function(o){return It(tS(o))}(n.query),new os(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,$e.fromBase64String(n.resumeToken))}function oS(n,e){let t=Si(e.snapshotVersion),r=Si(e.lastLimboFreeSnapshotVersion),i;i=fd(e.target)?X0(n.ct,e.target):eS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ti(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fv(n){let e=tS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gd(e,e.limit,"L"):e}function Im(n,e){return new du(e.largestBatchId,ay(n.ct,e.overlayMutation))}function Nb(n,e){let t=e.path.lastSegment();return[n,wt(e.path.popLast()),t]}function Pb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Si(r.readTime),documentKey:wt(r.documentKey.path),largestBatchId:r.largestBatchId}}var uy=class{getBundleMetadata(e,t){return kb(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ai(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return kb(e).put(function(i){return{bundleId:i.id,createTime:Si(Be(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Ob(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Fv(o.bundledQuery),readTime:Ai(o.readTime)}}(r)})}saveNamedQuery(e,t){return Ob(e).put(function(i){return{name:i.name,readTime:Si(Be(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function kb(n){return Ye(n,"bundles")}function Ob(n){return Ye(n,"namedQueries")}var Id=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ga(e).get(Nb(this.userId,t)).next(r=>r?Im(this.serializer,r):null)}getOverlays(e,t){let r=vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new du(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(wt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ga(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=vn(),o=wt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ga(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Im(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=vn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ga(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=Im(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Ga(e).put(function(i,o,s){let[a,c,l]=Nb(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:gu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Ga(n){return Ye(n,"documentOverlays")}var cy=class{Pt(e){return Ye(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?$e.fromUint8Array(r):$e.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Kn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),iu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Yn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Mr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?I0(e)?this.dt(t,Number.MAX_SAFE_INTEGER):nh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Re(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),U.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Kn.vt=new Kn;function MF(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Fb(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=MF(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var ly=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Fb(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Fb(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},dy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},hy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},vi=class{constructor(){this.jt=new ly,this.Ht=new dy(this.jt),this.Jt=new hy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var _i=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Dr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Lb(n.arrayValue,e.arrayValue),t!==0?t:(t=Lb(n.directionalValue,e.directionalValue),t!==0?t:U.comparator(n.documentKey,e.documentKey)))}function Lb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Ed=class{constructor(e){this.Xt=new Ce((t,r)=>Ue.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(G(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Pm(e);if(t!==void 0&&!this.sn(t))return!1;let r=gi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ce(Ue.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Qo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qo(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qo(r.field,r.dir==="asc"?0:1)));return new Xo(Xo.UNKNOWN_ID,this.collectionId,t,ru.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function sS(n){var e,t;if(G(n instanceof le||n instanceof _e),n instanceof le){if(n instanceof hd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>le.create(n.field,"==",o)))||[];return _e.create(i,"or")}return n}let r=n.filters.map(i=>sS(i));return _e.create(r,n.op)}function NF(n){if(n.getFilters().length===0)return[];let e=gy(sS(n));return G(aS(e)),fy(e)||py(e)?[e]:e.getFilters()}function fy(n){return n instanceof le}function py(n){return n instanceof _e&&Mv(n)}function aS(n){return fy(n)||py(n)||function(t){if(t instanceof _e&&Bm(t)){for(let r of t.getFilters())if(!fy(r)&&!py(r))return!1;return!0}return!1}(n)}function gy(n){if(G(n instanceof le||n instanceof _e),n instanceof le)return n;if(n.filters.length===1)return gy(n.filters[0]);let e=n.filters.map(r=>gy(r)),t=_e.create(e,n.op);return t=Dd(t),aS(t)?t:(G(t instanceof _e),G(ts(t)),G(t.filters.length>1),t.filters.reduce((r,i)=>Lv(r,i)))}function Lv(n,e){let t;return G(n instanceof le||n instanceof _e),G(e instanceof le||e instanceof _e),t=n instanceof le?e instanceof le?function(i,o){return _e.create([i,o],"and")}(n,e):Vb(n,e):e instanceof le?Vb(e,n):function(i,o){if(G(i.filters.length>0&&o.filters.length>0),ts(i)&&ts(o))return b0(i,o.getFilters());let s=Bm(i)?i:o,a=Bm(i)?o:i,c=s.filters.map(l=>Lv(l,a));return _e.create(c,"or")}(n,e),Dd(t)}function Vb(n,e){if(ts(e))return b0(e,n.getFilters());{let t=e.filters.map(r=>Lv(n,r));return _e.create(t,"or")}}function Dd(n){if(G(n instanceof le||n instanceof _e),n instanceof le)return n;let e=n.getFilters();if(e.length===1)return Dd(e[0]);if(C0(n))return n;let t=e.map(i=>Dd(i)),r=[];return t.forEach(i=>{i instanceof le?r.push(i):i instanceof _e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,n.op)}var my=class{constructor(){this.un=new mu}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve($t.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve($t.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},mu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ce(pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(pe.comparator)).toArray()}};var Ql=new Uint8Array(0),yy=class{constructor(e,t){this.databaseId=t,this.cn=new mu,this.ln=new Cn(r=>Ti(r),(r,i)=>Tu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:wt(i)};return jb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[c0(t),""],!1,!0);return jb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(yn(s.parent))}return r})}addFieldIndex(e,t){let r=Wa(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Bo(e);return o.next(a=>{s.put(Pb(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Wa(e),i=Bo(e),o=Uo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Wa(e),r=Uo(e),i=Bo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Ed(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Uo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(c)} to execute ${Ti(t)}`);let h=function(O,Q){let X=Pm(Q);if(X===void 0)return null;for(let Y of pd(O,X.fieldPath))switch(Y.op){case"array-contains-any":return Y.value.arrayValue.values||[];case"array-contains":return[Y.value]}return null}(l,c),p=function(O,Q){let X=new Map;for(let Y of gi(Q))for(let I of pd(O,Y.fieldPath))switch(I.op){case"==":case"in":X.set(Y.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return X.set(Y.fieldPath.canonicalString(),I.value),Array.from(X.values())}return null}(l,c),m=function(O,Q){let X=[],Y=!0;for(let I of gi(Q)){let y=I.kind===0?vb(O,I.fieldPath,O.startAt):_b(O,I.fieldPath,O.startAt);X.push(y.value),Y&&(Y=y.inclusive)}return new Dn(X,Y)}(l,c),v=function(O,Q){let X=[],Y=!0;for(let I of gi(Q)){let y=I.kind===0?_b(O,I.fieldPath,O.endAt):vb(O,I.fieldPath,O.endAt);X.push(y.value),Y&&(Y=y.inclusive)}return new Dn(X,Y)}(l,c),b=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),V=this.En(c.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(V,$=>r.G($,t.limit).next(O=>{O.forEach(Q=>{let X=U.fromSegments(Q.documentKey);s.has(X)||(s=s.add(X),a.push(X))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=NF(_e.create(e.filters,"and")).map(r=>Ym(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Ql,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new _i(e,U.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new _i(e,U.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Ed(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ce(Ue.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new vi;for(let i of gi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Kn.vt.It(o,s)}return r.zt()}dn(e){let t=new vi;return Kn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new vi;return Kn.vt.It(Di(this.databaseId,t),r.Yt(function(o){let s=gi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new vi);let o=0;for(let s of gi(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&uu(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Kn.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new vi;c.seed(a.zt()),Kn.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Wa(e),i=Bo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new ru(p.sequenceNumber,new $t(Ai(p.readTime),new U(yn(p.documentKey)),p.largestBatchId)):ru.empty(),v=h.fields.map(([b,M])=>new Qo(Ue.fromServerFormat(b),M));return new Xo(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ne(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Wa(e),o=Bo(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(Pb(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Uo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Uo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Uo(e),o=new Ce(Dr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new _i(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ce(Dr),i=this.Vn(t,e);if(i==null)return r;let o=Pm(t);if(o!=null){let s=e.data.field(o.fieldPath);if(uu(s))for(let a of s.arrayValue.values||[])r=r.add(new _i(t.indexId,e.key,this.dn(a),i))}else r=r.add(new _i(t.indexId,e.key,Ql,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),M=jo(v),N=jo(b);for(;M||N;){let V=!1,$=!1;if(M&&N){let O=h(M,N);O<0?$=!0:O>0&&(V=!0)}else M!=null?$=!0:V=!0;V?(p(N),N=jo(b)):$?(m(M),M=jo(v)):(M=jo(v),N=jo(b))}}(i,o,Dr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Bo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Dr(s,a)).filter((s,a,c)=>!a||Dr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Dr(s,e),c=Dr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Ql,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Ql,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Dr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ub)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||H())).next(Ub)}};function jb(n){return Ye(n,"collectionParents")}function Uo(n){return Ye(n,"indexEntries")}function Wa(n){return Ye(n,"indexConfiguration")}function Bo(n){return Ye(n,"indexState")}function Ub(n){G(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Sv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new $t(e.readTime,e.documentKey,t)}var Bb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function uS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{G(a===1)}));let l=[];for(let h of t.mutations){let p=g0(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Cd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw H();e=n.noDocument}return JSON.stringify(e).length}Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(41943040,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);var Td=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){G(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Wo(e),s=Cr(e);return s.add({}).next(a=>{G(typeof a=="number");let c=new lu(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map($=>gu(v.ct,$)),V=M.mutations.map($=>gu(v.ct,$));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:V}}(this.serializer,this.userId,c),h=[],p=new Ce((m,v)=>ne(m.canonicalString(),v.canonicalString()));for(let m of i){let v=g0(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,VO))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Cr(e).get(t).next(r=>r?(G(r.userId===this.userId),yi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Cr(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(G(a.batchId>=r),o=yi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Cr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cr(e).U("userMutationsIndex",t).next(r=>r.map(i=>yi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Xl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Wo(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=yn(h);if(l===this.userId&&t.path.isEqual(m))return Cr(e).get(p).next(v=>{if(!v)throw H();G(v.userId===this.userId),o.push(yi(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(ne),i=[];return t.forEach(o=>{let s=Xl(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Wo(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=yn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Xl(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ce(ne);return Wo(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=yn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Cr(e).get(o).next(s=>{if(s===null)throw H();G(s.userId===this.userId),r.push(yi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return uS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Wo(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=yn(o[1]);i.push(c)}else a.done()}).next(()=>{G(i.length===0)})})}containsKey(e,t){return cS(e,this.userId,t)}Nn(e){return lS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function cS(n,e,t){let r=Xl(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wo(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Cr(n){return Ye(n,"mutations")}function Wo(n){return Ye(n,"documentMutations")}function lS(n){return Ye(n,"mutationQueues")}var ss=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var vy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ss(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>K.fromTimestamp(new Ne(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$o(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(G(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return $o(e).J((s,a)=>{let c=Za(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return $o(e).J((r,i)=>{let o=Za(i);t(o)})}qn(e){return $b(e).get("targetGlobalKey").next(t=>(G(t!==null),t))}Qn(e,t){return $b(e).put("targetGlobalKey",t)}Kn(e,t){return $o(e).put(oS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ti(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return $o(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Za(a);Tu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Tr(e);return t.forEach(s=>{let a=wt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Tr(e);return S.forEach(t,o=>{let s=wt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Tr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tr(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=yn(s[1]),h=new U(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=wt(t.path),i=IDBKeyRange.bound([r],[c0(r)],!1,!0),o=0;return Tr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return $o(e).get(t).next(r=>r?Za(r):null)}};function $o(n){return Ye(n,"targets")}function $b(n){return Ye(n,"targetGlobal")}function Tr(n){return Ye(n,"targetDocuments")}function Hb([n,e],[t,r]){let i=ne(n,t);return i===0?ne(e,r):i}var _y=class{constructor(e){this.Un=e,this.buffer=new Ce(Hb),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Hb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},wy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ur(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield jr(t)}yield this.Hn(3e5)}))}},Iy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Nt.oe);let r=new _y(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(Bb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bb):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ho()<=on.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function PF(n,e){return new Iy(n,e)}var Ey=class{constructor(e,t){this.db=e,this.garbageCollector=PF(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Yl(e,r)}removeReference(e,t,r){return Yl(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yl(e,t)}nr(e,t){return function(i,o){let s=!1;return lS(i).Y(a=>cS(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,K.min()),Tr(e).delete(function(p){return[0,wt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yl(e,t)}tr(e,t){let r=Tr(e),i,o=Nt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Nt.oe&&t(new U(yn(i)),o),o=l,i=c):o=Nt.oe}).next(()=>{o!==Nt.oe&&t(new U(yn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Yl(n,e){return Tr(n).put(function(r,i){return{targetId:0,path:wt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var bd=class{constructor(){this.changes=new Cn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Dy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pi(e).put(r)}removeEntry(e,t,r){return pi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],wd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=We.newInvalidDocument(t);return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ka(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:We.newInvalidDocument(t)};return pi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ka(t))},(i,o)=>{r={document:this.ir(t,o),size:Cd(o)}}).next(()=>r)}getEntries(e,t){let r=Tt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Tt(),i=new Ae(U.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Cd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ce(Gb);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Ka(i.first()),Ka(i.last())),s=i.getIterator(),a=s.getNext();return pi(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=U.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Gb(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Ka(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),wd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Tt();for(let p of l){let m=this.ir(U.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Su(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Tt(),s=zb(t,r),a=zb(t,$t.max());return pi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(U.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Cy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qb(e).get("remoteDocumentGlobalKey").next(t=>(G(!!t),t))}rr(e,t){return qb(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=xF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(K.min())))return r}return We.newInvalidDocument(e)}};function dS(n){return new Dy(n)}var Cy=class extends bd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Cn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ce((o,s)=>ne(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=Mb(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Cd(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=Mb(this.cr.serializer,s.convertToNoDocument(K.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function qb(n){return Ye(n,"remoteDocumentGlobal")}function pi(n){return Ye(n,"remoteDocumentsV14")}function Ka(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zb(n,e){let t=e.documentKey.path.toArray();return[n,wd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Gb(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ne(t[o],r[o]),i)return i;return i=ne(t.length,r.length),i||(i=ne(t[t.length-2],r[r.length-2]),i||ne(t[t.length-1],r[r.length-1]))}var Ty=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&eu(r.mutation,i,Pt.empty(),Ne.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=vn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ya();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=vn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Tt(),s=Xa(),a=function(){return Xa()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof tn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),eu(h.mutation,l,h.mutation.getFieldMask(),Ne.now())):s.set(l.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Ty(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Xa(),i=new Ae((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Pt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=O0();h.forEach(m=>{if(!o.has(m)){let v=$0(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Nv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(vn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:k0(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=Ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ya();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new en(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,We.newInvalidDocument(h)))});let a=Ya();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&eu(h.mutation,l,Pt.empty(),Ne.now()),Su(t,l)&&(a=a.insert(c,l))}),a})}};var by=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Be(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Fv(i.bundledQuery),readTime:Be(i.readTime)}}(t)),S.resolve()}};var Sy=class{constructor(){this.overlays=new Ae(U.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=vn(),o=t.length+1,s=new U(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ae((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=vn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=vn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new du(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Ay=class{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var yu=class{constructor(){this.Tr=new Ce(ze.Er),this.dr=new Ce(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ze(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ze(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new U(new pe([])),r=new ze(t,e),i=new ze(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new U(new pe([])),r=new ze(t,e),i=new ze(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ze(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ze=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return U.comparator(e.key,t.key)||ne(e.wr,t.wr)}static Ar(e,t){return ne(e.wr,t.wr)||U.comparator(e.key,t.key)}};var Ry=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ce(ze.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new lu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ze(t,0),i=new ze(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(ne);return t.forEach(i=>{let o=new ze(i,0),s=new ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new ze(new U(o),0),a=new Ce(ne);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){G(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new ze(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ze(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xy=class{constructor(e){this.Mr=e,this.docs=function(){return new Ae(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():We.newInvalidDocument(t))}getEntries(e,t){let r=Tt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():We.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Tt(),s=t.path,a=new U(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Sv(d0(h),r)<=0||(i.has(h.key)||Su(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){H()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new My(this)}getSize(e){return S.resolve(this.size)}},My=class extends bd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Ny=class{constructor(e){this.persistence=e,this.Nr=new Cn(t=>Ti(t),Tu),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yu,this.targetCount=0,this.kr=ss.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ss(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Ad=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Nt(0),this.Kr=!1,this.Kr=!0,this.$r=new Ay,this.referenceDelegate=e(this),this.Ur=new Ny(this),this.indexManager=new my,this.remoteDocumentCache=function(i){return new xy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _d(t),this.Gr=new by(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Ry(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Py(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Py=class extends ad{constructor(e){super(),this.currentSequenceNumber=e}},Rd=class n{constructor(e){this.persistence=e,this.Jr=new yu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,K.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var ky=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new ud("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ub,{unique:!0}),c.createObjectStore("documentMutations")}(e),Wb(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Wb(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:K.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ub,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:YO});l.createIndex("collectionPathOverlayIndex",ZO,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",JO,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:jO});l.createIndex("documentKeyIndex",UO),l.createIndex("collectionGroupIndex",BO)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:GO}).createIndex("sequenceNumberIndex",WO,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:KO}).createIndex("documentKeyIndex",QO,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Cd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{G(c.userId===o.userId);let l=yi(this.serializer,c);return uS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new pe(s),l=function(p){return[0,wt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:wt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:zO});let r=t.store("collectionParents"),i=new mu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:wt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new pe(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=yn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Za(i),s=oS(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new U(pe.fromString(p.document.name).popFirst(5)):p.noDocument?U.fromSegments(p.noDocument.path):p.unknownDocument?U.fromSegments(p.unknownDocument.path):H()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=dS(this.serializer),o=new Ad(Rd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();yi(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new Ge(l),p=Id.lt(this.serializer,h),m=o.getIndexManager(h),v=Td.lt(h,this.serializer,m,o.referenceDelegate);return new Sd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new ou(t,Nt.oe),c).next()})})}};function Wb(n){n.createObjectStore("targetDocuments",{keyPath:HO}).createIndex("documentTargetsIndex",qO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$O,{unique:!0}),n.createObjectStore("targetGlobal")}var Em="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Oy=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ey(this,i),this.Ai=t+"main",this.serializer=new _d(c),this.Ri=new xr(this.Ai,this.hi,new ky(this.serializer)),this.$r=new cy,this.Ur=new vy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dS(this.serializer),this.Gr=new uy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&je("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Em);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Nt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>x(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>x(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ur(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qa(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Zl(e).delete(this.clientId)}Fi(){return x(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ye(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Qa(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(R.FAILED_PRECONDITION,Em);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zl(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return x(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new ou(e,Nt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Zl(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Td.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Id.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?tF:c===16?eF:c===15?Rv:c===14?v0:c===13?y0:c===12?XO:c===11?m0:void H()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new ou(a,this.Qr?this.Qr.next():Nt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw je(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(R.FAILED_PRECONDITION,h0);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Qa(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(R.FAILED_PRECONDITION,Em)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static D(){return xr.D()}bi(e){let t=Qa(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(je(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;tf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return je("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){je("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Qa(n){return Ye(n,"owner")}function Zl(n){return Ye(n,"clientMetadata")}function Vv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Fy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Ly=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tf()?8:f0(zs())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ly;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ho()<=on.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Ho()<=on.DEBUG&&k("QueryEngine","Query:",qo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ho()<=on.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,It(t))):S.resolve())}Yi(e,t){if(wb(t))return S.resolve(null);let r=It(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gd(t,null,"F"),r=It(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,gd(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return wb(t)||i.isEqual(K.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Ho()<=on.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qo(t)),this.rs(e,s,t,l0(i,-1)).next(a=>a))})}ts(e,t){let r=new Ce(N0(e));return t.forEach((i,o)=>{Su(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ho()<=on.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",qo(t)),this.Ji.getDocumentsMatchingQuery(e,t,$t.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Vy=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ae(ne),this._s=new Cn(o=>Ti(o),Tu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function hS(n,e,t,r){return new Vy(n,e,t,r)}function fS(n,e){return x(this,null,function*(){let t=j(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function kF(n,e){let t=j(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(M=>{let N=l.docVersions.get(b);G(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function pS(n){let e=j(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function OF(n,e){let t=j(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken($e.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,V){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Tt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(gS(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(K.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function gS(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Tt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(K.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function FF(n,e){let t=j(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function as(n,e){let t=j(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new os(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function us(n,e,t){return x(this,null,function*(){let r=j(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ur(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Md(n,e,t){let r=j(n),i=K.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=j(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,It(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:K.min(),t?o:ie())).next(a=>(vS(r,M0(e),a),{documents:a,Ts:o})))}function mS(n,e){let t=j(n),r=j(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function yS(n,e){let t=j(n),r=t.us.get(e)||K.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,l0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vS(t,e,i),i))}function vS(n,e,t){let r=n.us.get(e)||K.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function LF(n,e,t,r){return x(this,null,function*(){let i=j(n),o=ie(),s=Tt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield as(i,function(h){return It(ms(pe.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>gS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function VF(r,i){return x(this,arguments,function*(n,e,t=ie()){let o=yield as(n,It(Fv(e.bundledQuery))),s=j(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Be(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken($e.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function Kb(n,e){return`firestore_clients_${n}_${e}`}function Qb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dm(n,e){return`firestore_targets_${n}_${e}`}var Nd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(je("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},tu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(je("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Pd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Pv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=p0(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(je("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},jy=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(je("SharedClientState",`Failed to parse online state: ${e}`),null)}},vu=class{constructor(){this.activeTargetIds=Pv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},nu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ae(ne),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=Kb(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new vu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(Kb(this.persistenceKey,r));if(i){let o=Pd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Dm(this.persistenceKey,e));if(i){let o=tu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void je("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Nt.oe;if(o!=null)try{let a=JSON.parse(o);G(typeof a=="number"),s=a}catch(a){je("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Nt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Nd(this.currentUser,e,t,r),o=Qb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=Qb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Dm(this.persistenceKey,e),o=new tu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Pd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Nd.Rs(new Ge(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return tu.Rs(i,t)}Ls(e){return jy.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Pv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},kd=class{constructor(){this.so=new vu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Uy=class{_o(e){}shutdown(){}};var Od=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jl=null;function Cm(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}var jF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var By=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var lt="WebChannelConnection",$y=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Cm(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Xt("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=jF[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Cm();return new Promise((s,a)=>{let c=new mm;c.setWithCredentials(!0),c.listenOnce(ym.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case za.NO_ERROR:let h=c.getResponseJson();k(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case za.TIMEOUT:k(lt,`RPC '${e}' ${o} timed out`),a(new P(R.DEADLINE_EXCEEDED,"Request time out"));break;case za.HTTP_ERROR:let p=c.getStatus();if(k(lt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let V=N.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(V)>=0?V:R.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(R.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(R.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{k(lt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(lt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Cm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=wm(),a=_m(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(lt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new By({Io:N=>{v?k(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(lt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,V,$)=>{N.listen(V,O=>{try{$(O)}catch(Q){setTimeout(()=>{throw Q},0)}})};return M(p,Vo.EventType.OPEN,()=>{v||(k(lt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Vo.EventType.CLOSE,()=>{v||(v=!0,k(lt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Vo.EventType.ERROR,N=>{v||(v=!0,Xt(lt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(R.UNAVAILABLE,"The operation could not be completed")))}),M(p,Vo.EventType.MESSAGE,N=>{var V;if(!v){let $=N.data[0];G(!!$);let O=$,Q=O.error||((V=O[0])===null||V===void 0?void 0:V.error);if(Q){k(lt,`RPC '${e}' stream ${i} received error:`,Q);let X=Q.status,Y=function(w){let E=qe[w];if(E!==void 0)return z0(E)}(X),I=Q.message;Y===void 0&&(Y=R.INTERNAL,I="Unknown error status: "+X+" with message "+Q.message),v=!0,b.So(new P(Y,I)),p.close()}else k(lt,`RPC '${e}' stream ${i} received:`,$),b.bo($)}}),M(a,vm.STAT_EVENT,N=>{N.stat===Kl.PROXY?k(lt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Kl.NOPROXY&&k(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function _S(){return typeof window<"u"?window:null}function rd(){return typeof document<"u"?document:null}function Au(n){return new ry(n,!0)}var _u=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Fd=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new _u(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return x(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return x(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return x(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(je(t.toString()),je("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>x(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Hy=class extends Fd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=DF(this.serializer,e),r=function(o){if(!("targetChange"in o))return K.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?Be(s.readTime):K.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=sy(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=fd(c)?{documents:X0(o,c)}:{query:eS(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=W0(o,s.resumeToken);let l=iy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(K.min())>0){a.readTime=is(o,s.snapshotVersion.toTimestamp());let l=iy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=TF(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=sy(this.serializer),t.removeTarget=e,this.a_(t)}},qy=class extends Fd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return G(!!e.streamToken),this.lastStreamToken=e.streamToken,G(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){G(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=CF(e.writeResults,e.commitTime),r=Be(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=sy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>gu(this.serializer,r))};this.a_(t)}};var zy=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,oy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,oy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Gy=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(je(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Wy=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>x(this,null,function*(){Br(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return x(this,null,function*(){let l=j(c);l.L_.add(4),yield ys(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ru(l)})}(this))}))}),this.q_=new Gy(r,i)}};function Ru(n){return x(this,null,function*(){if(Br(n))for(let e of n.B_)yield e(!0)})}function ys(n){return x(this,null,function*(){for(let e of n.B_)yield e(!1)})}function rh(n,e){let t=j(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Bv(t)?Uv(t):_s(t).r_()&&jv(t,e))}function cs(n,e){let t=j(n),r=_s(t);t.N_.delete(e),r.r_()&&wS(t,e),t.N_.size===0&&(r.r_()?r.o_():Br(t)&&t.q_.set("Unknown"))}function jv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_s(n).A_(e)}function wS(n,e){n.Q_.xe(e),_s(n).R_(e)}function Uv(n){n.Q_=new ny({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),_s(n).start(),n.q_.v_()}function Bv(n){return Br(n)&&!_s(n).n_()&&n.N_.size>0}function Br(n){return j(n).L_.size===0}function IS(n){n.Q_=void 0}function UF(n){return x(this,null,function*(){n.q_.set("Online")})}function BF(n){return x(this,null,function*(){n.N_.forEach((e,t)=>{jv(n,e)})})}function $F(n,e){return x(this,null,function*(){IS(n),Bv(n)?(n.q_.M_(e),Uv(n)):n.q_.set("Unknown")})}function HF(n,e,t){return x(this,null,function*(){if(n.q_.set("Online"),e instanceof yd&&e.state===2&&e.cause)try{yield function(i,o){return x(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ld(n,r)}else if(e instanceof Zo?n.Q_.Ke(e):e instanceof md?n.Q_.He(e):n.Q_.We(e),!t.isEqual(K.min()))try{let r=yield pS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken($e.EMPTY_BYTE_STRING,h.snapshotVersion)),wS(o,c);let p=new os(h.target,c,l,h.sequenceNumber);jv(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Ld(n,r)}})}function Ld(n,e,t){return x(this,null,function*(){if(!Ur(e))throw e;n.L_.add(1),yield ys(n),n.q_.set("Offline"),t||(t=()=>pS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ru(n)}))})}function ES(n,e){return e().catch(t=>Ld(n,t,e))}function vs(n){return x(this,null,function*(){let e=j(n),t=Vr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qF(e);)try{let i=yield FF(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,zF(e,i)}catch(i){yield Ld(e,i)}DS(e)&&CS(e)})}function qF(n){return Br(n)&&n.O_.length<10}function zF(n,e){n.O_.push(e);let t=Vr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function DS(n){return Br(n)&&!Vr(n).n_()&&n.O_.length>0}function CS(n){Vr(n).start()}function GF(n){return x(this,null,function*(){Vr(n).p_()})}function WF(n){return x(this,null,function*(){let e=Vr(n);for(let t of n.O_)e.m_(t.mutations)})}function KF(n,e,t){return x(this,null,function*(){let r=n.O_.shift(),i=Xm.from(r,e,t);yield ES(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vs(n)})}function QF(n,e){return x(this,null,function*(){e&&Vr(n).V_&&(yield function(r,i){return x(this,null,function*(){if(function(s){return q0(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Vr(r).s_(),yield ES(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield vs(r)}})}(n,e)),DS(n)&&CS(n)})}function Yb(n,e){return x(this,null,function*(){let t=j(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Br(t);t.L_.add(3),yield ys(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ru(t)})}function Ky(n,e){return x(this,null,function*(){let t=j(n);e?(t.L_.delete(2),yield Ru(t)):e||(t.L_.add(2),yield ys(t),t.q_.set("Unknown"))})}function _s(n){return n.K_||(n.K_=function(t,r,i){let o=j(t);return o.w_(),new Hy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:UF.bind(null,n),Ro:BF.bind(null,n),mo:$F.bind(null,n),d_:HF.bind(null,n)}),n.B_.push(e=>x(this,null,function*(){e?(n.K_.s_(),Bv(n)?Uv(n):n.q_.set("Unknown")):(yield n.K_.stop(),IS(n))}))),n.K_}function Vr(n){return n.U_||(n.U_=function(t,r,i){let o=j(t);return o.w_(),new qy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GF.bind(null,n),mo:QF.bind(null,n),f_:WF.bind(null,n),g_:KF.bind(null,n)}),n.B_.push(e=>x(this,null,function*(){e?(n.U_.s_(),yield vs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Qy=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ws(n,e){if(je("AsyncQueue",`${e}: ${n}`),Ur(n))return new P(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Vd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=Ya(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var jd=class{constructor(){this.W_=new Ae(U.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ls=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Vd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Yy=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Zy=class{constructor(){this.queries=Zb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=j(t),o=i.queries;i.queries=Zb(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(R.ABORTED,"Firestore shutting down"))}};function Zb(){return new Cn(n=>x0(n),bu)}function $v(n,e){return x(this,null,function*(){let t=j(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Yy,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ws(s,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&qv(t)})}function Hv(n,e){return x(this,null,function*(){let t=j(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function YF(n,e){let t=j(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&qv(t)}function ZF(n,e,t){let r=j(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function qv(n){n.Y_.forEach(e=>{e.next()})}var Jy,Jb;(Jb=Jy||(Jy={})).ea="default",Jb.Cache="cache";var wu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Jy.Cache}};var Xy=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Ud=class{constructor(e){this.serializer=e}Es(e){return wn(this.serializer,e)}ds(e){return e.metadata.exists?J0(this.serializer,e.document,!1):We.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Be(e)}},ev=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Ud(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return x(this,null,function*(){let e=yield LF(this.localStore,new Ud(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield VF(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function TS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Bd=class{constructor(e){this.key=e}},$d=class{constructor(e){this.key=e}},Hd=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=N0(e),this.Ra=new Vd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new jd,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Su(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new ls(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new $d(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Bd(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ls.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},tv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},nv=class{constructor(e){this.key=e,this.va=!1}},rv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Cn(a=>x0(a),bu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(U.comparator),this.Na=new Map,this.La=new yu,this.Ba={},this.ka=new Map,this.qa=ss.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function JF(n,e,t=!0){return x(this,null,function*(){let r=ih(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield bS(r,e,t,!0),i})}function XF(n,e){return x(this,null,function*(){let t=ih(n);yield bS(t,e,!0,!1)})}function bS(n,e,t,r){return x(this,null,function*(){let i=yield as(n.localStore,It(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield zv(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&rh(n.remoteStore,i),a})}function zv(n,e,t,r,i){return x(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,V,$){return x(this,null,function*(){let O=N.view.ma(V);O.ns&&(O=yield Md(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,O)));let Q=$&&$.targetChanges.get(N.targetId),X=$&&$.targetMismatches.get(N.targetId)!=null,Y=N.view.applyChanges(O,M.isPrimaryClient,Q,X);return iv(M,N.targetId,Y.wa),Y.snapshot})}(n,p,m,v);let o=yield Md(n.localStore,e,!0),s=new Hd(e,o.Ts),a=s.ma(o.documents),c=fu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);iv(n,t,l.wa);let h=new tv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function eL(n,e,t){return x(this,null,function*(){let r=j(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!bu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield us(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cs(r.remoteStore,i.targetId),ds(r,i.targetId)}).catch(jr))):(ds(r,i.targetId),yield us(r.localStore,i.targetId,!0))})}function tL(n,e){return x(this,null,function*(){let t=j(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cs(t.remoteStore,r.targetId))})}function nL(n,e,t){return x(this,null,function*(){let r=Qv(n);try{let i=yield function(s,a){let c=j(s),l=Ne.now(),h=a.reduce((v,b)=>v.add(b.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Tt(),M=ie();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((V,$)=>{$.isValidDocument()||(M=M.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let V=[];for(let $ of a){let O=mF($,p.get($.key).overlayedDocument);O!=null&&V.push(new tn($.key,O,D0(O.value.mapValue),Le.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,V,a)}).next(N=>{m=N;let V=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,V)})}).then(()=>({batchId:m.batchId,changes:k0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ae(ne)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield tr(r,i.changes),yield vs(r.remoteStore)}catch(i){let o=ws(i,"Failed to persist write");t.reject(o)}})}function SS(n,e){return x(this,null,function*(){let t=j(n);try{let r=yield OF(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(G(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?G(s.va):i.removedDocuments.size>0&&(G(s.va),s.va=!1))}),yield tr(t,r,e)}catch(r){yield jr(r)}})}function Xb(n,e,t){let r=j(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=j(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&qv(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rL(n,e,t){return x(this,null,function*(){let r=j(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ae(U.comparator);s=s.insert(o,We.newNoDocument(o,K.min()));let a=ie().add(o),c=new hu(K.min(),new Map,new Ae(ne),s,a);yield SS(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),Kv(r)}else yield us(r.localStore,e,!1).then(()=>ds(r,e,t)).catch(jr)})}function iL(n,e){return x(this,null,function*(){let t=j(n),r=e.batch.batchId;try{let i=yield kF(t.localStore,e);Wv(t,r,null),Gv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tr(t,i)}catch(i){yield jr(i)}})}function oL(n,e,t){return x(this,null,function*(){let r=j(n);try{let i=yield function(s,a){let c=j(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(G(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);Wv(r,e,t),Gv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tr(r,i)}catch(i){yield jr(i)}})}function sL(n,e){return x(this,null,function*(){let t=j(n);Br(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=j(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ws(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Gv(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Wv(n,e,t){let r=j(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ds(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||AS(n,r)})}function AS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(cs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Kv(n))}function iv(n,e,t){for(let r of t)r instanceof Bd?(n.La.addReference(r.key,e),aL(n,r)):r instanceof $d?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||AS(n,r.key)):H()}function aL(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Kv(n))}function Kv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new U(pe.fromString(e)),r=n.qa.next();n.Na.set(r,new nv(t)),n.Oa=n.Oa.insert(t,r),rh(n.remoteStore,new os(It(ms(t.path)),r,"TargetPurposeLimboResolution",Nt.oe))}}function tr(n,e,t){return x(this,null,function*(){let r=j(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Fy.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return x(this,null,function*(){let h=j(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Ur(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function uL(n,e){return x(this,null,function*(){let t=j(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield fS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tr(t,r.hs)}})}function cL(n,e){let t=j(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function lL(n,e){return x(this,null,function*(){let t=j(n),r=yield Md(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&iv(t,e.targetId,i.wa),i})}function dL(n,e){return x(this,null,function*(){let t=j(n);return yS(t.localStore,e).then(r=>tr(t,r))})}function hL(n,e,t,r){return x(this,null,function*(){let i=j(n),o=yield function(a,c){let l=j(a),h=j(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield vs(i.remoteStore):t==="acknowledged"||t==="rejected"?(Wv(i,e,r||null),Gv(i,e),function(a,c){j(j(a).mutationQueue).On(c)}(i.localStore,e)):H(),yield tr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function fL(n,e){return x(this,null,function*(){let t=j(n);if(ih(t),Qv(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield e0(t,r.toArray());t.Qa=!0,yield Ky(t.remoteStore,!0);for(let o of i)rh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ds(t,s),us(t.localStore,s,!0))),cs(t.remoteStore,s)}),yield i,yield e0(t,r),function(s){let a=j(s);a.Na.forEach((c,l)=>{cs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ae(U.comparator)}(t),t.Qa=!1,yield Ky(t.remoteStore,!1)}})}function e0(n,e,t){return x(this,null,function*(){let r=j(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield as(r.localStore,It(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield lL(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield mS(r.localStore,s);a=yield as(r.localStore,l),yield zv(r,RS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function RS(n){return R0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pL(n){return function(t){return j(j(t).persistence).Qi()}(j(n).localStore)}function gL(n,e,t,r){return x(this,null,function*(){let i=j(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield yS(i.localStore,M0(o[0])),a=hu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",$e.EMPTY_BYTE_STRING);yield tr(i,s,a);break}case"rejected":yield us(i.localStore,e,!0),ds(i,e,r);break;default:H()}})}function mL(n,e,t){return x(this,null,function*(){let r=ih(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield mS(r.localStore,i),s=yield as(r.localStore,o);yield zv(r,RS(o),s.targetId,!1,s.resumeToken),rh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield us(r.localStore,i,!1).then(()=>{cs(r.remoteStore,i),ds(r,i)}).catch(jr))}})}function ih(n){let e=j(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rL.bind(null,e),e.Ca.d_=YF.bind(null,e.eventManager),e.Ca.$a=ZF.bind(null,e.eventManager),e}function Qv(n){let e=j(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oL.bind(null,e),e}function yL(n,e,t){let r=j(n);(function(o,s,a){return x(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let M=j(v),N=Be(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",V=>M.Gr.getBundleMetadata(V,b.id)).then(V=>!!V&&V.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(TS(c));let l=new ev(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield tr(o,p.Ia,void 0),yield function(v,b){let M=j(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return Xt("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var ov=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=Au(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return hS(this.persistence,new xd,t.initialUser,this.serializer)}Ga(t){return new Ad(Rd.Zr,this.serializer)}Wa(t){return new kd}terminate(){return x(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var qd=class n extends ov{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield Xh(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Qv(this.Ja.syncEngine),yield vs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return hS(this.persistence,new xd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new wy(r,e.asyncQueue,t)}Ha(e,t){let r=new Lm(t,this.persistence);return new Fm(e.asyncQueue,r)}Ga(e){let t=Vv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new Oy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_S(),rd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new kd}},sv=class n extends qd{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield Xh(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof nu&&(this.sharedClientState.syncEngine={no:hL.bind(null,t),ro:gL.bind(null,t),io:mL.bind(null,t),Qi:pL.bind(null,t),eo:dL.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>x(this,null,function*(){yield fL(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=_S();if(!nu.D(t))throw new P(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Vv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Yv=(()=>{class n{initialize(t,r){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uL.bind(null,this.syncEngine),yield Ky(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Zy}()}createDatastore(t){let r=Au(t.databaseInfo.databaseId),i=function(s){return new $y(s)}(t.databaseInfo);return function(s,a,c,l){return new zy(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Wy(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Xb(this.syncEngine,r,0),function(){return Od.D()?new Od:new Uy}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new rv(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return x(this,null,function*(){var t,r;yield function(o){return x(this,null,function*(){let s=j(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ys(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function t0(n,e=10240){let t=0;return{read(){return x(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var hs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):je("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var av=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Qe,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ua(){return x(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return x(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Xy(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return x(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return x(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var uv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return x(this,null,function*(){let s=j(i),a={documents:o.map(p=>pu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,pe.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=EF(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());G(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=U.fromPath(r);this.mutations.push(new cu(i,this.precondition(i)))}),yield function(r,i){return x(this,null,function*(){let o=j(r),s={writes:i.map(a=>gu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,pe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H();t=K.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(K.min())?Le.exists(!1):Le.updateTime(t):Le.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(K.min()))throw new P(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Le.updateTime(t)}return Le.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var cv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new _u(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>x(this,null,function*(){let e=new uv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Cu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!q0(t)}return!1}};var lv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=od.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>x(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ws(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tm(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>x(this,null,function*(){r.isEqual(i)||(yield fS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function n0(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Zv(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Yb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Yb(e.remoteStore,i)),n._onlineComponents=e})}function Zv(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Xt("Error using user provided cache. Falling back to memory cache: "+t),yield Tm(n,new ov)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Tm(n,new ov);return n._offlineComponents})}function oh(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield n0(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield n0(n,new Yv))),n._onlineComponents})}function xS(n){return Zv(n).then(e=>e.persistence)}function Jv(n){return Zv(n).then(e=>e.localStore)}function MS(n){return oh(n).then(e=>e.remoteStore)}function Xv(n){return oh(n).then(e=>e.syncEngine)}function vL(n){return oh(n).then(e=>e.datastore)}function fs(n){return x(this,null,function*(){let e=yield oh(n),t=e.eventManager;return t.onListen=JF.bind(null,e.syncEngine),t.onUnlisten=eL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tL.bind(null,e.syncEngine),t})}function _L(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield xS(n),t=yield MS(n);return e.setNetworkEnabled(!0),function(i){let o=j(i);return o.L_.delete(0),Ru(o)}(t)}))}function wL(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield xS(n),t=yield MS(n);return e.setNetworkEnabled(!1),function(i){return x(this,null,function*(){let o=j(i);o.L_.add(0),yield ys(o),o.q_.set("Offline")})}(t)}))}function IL(n,e){let t=new Qe;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield function(l,h){let p=j(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ws(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Jv(n),e,t)})),t.promise}function NS(n,e,t={}){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,c,l){let h=new hs({next:m=>{h.Za(),s.enqueueAndForget(()=>Hv(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(R.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new wu(ms(a.path),h,{includeMetadataChanges:!0,_a:!0});return $v(o,p)}(yield fs(n),n.asyncQueue,e,t,r)})),r.promise}function EL(n,e){let t=new Qe;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield Md(i,o,!0),c=new Hd(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=ws(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Jv(n),e,t)})),t.promise}function PS(n,e,t={}){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,c,l){let h=new hs({next:m=>{h.Za(),s.enqueueAndForget(()=>Hv(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new wu(a,h,{includeMetadataChanges:!0,_a:!0});return $v(o,p)}(yield fs(n),n.asyncQueue,e,t,r)})),r.promise}function DL(n,e){let t=new hs(e);return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){j(i).Y_.add(o),o.next()}(yield fs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){j(i).Y_.delete(o)}(yield fs(n),t)}))}}function CL(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?G0().encode(s):s,function(h,p){return new av(h,p)}(function(h,p){if(h instanceof Uint8Array)return t0(h,p);if(h instanceof ArrayBuffer)return t0(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Au(e));n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){yL(yield Xv(n),i,r)}))}function TL(n,e){return n.asyncQueue.enqueue(()=>x(this,null,function*(){return function(r,i){let o=j(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Jv(n),e)}))}function kS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var r0=new Map;function e_(n,e,t){if(!t)throw new P(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function t_(n,e,t,r){if(e===!0&&r===!0)throw new P(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function i0(n){if(!U.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o0(n){if(U.isDocumentKey(n))throw new P(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function ge(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sh(n);throw new P(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OS(n,e){if(e<=0)throw new P(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var zd=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ri=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bm;switch(r.type){case"firstParty":return new xm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return x(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=r0.get(t);r&&(k("ComponentProvider","Removing Datastore"),r0.delete(t),r.terminate())}(this),Promise.resolve()}};function ah(n,e,t,r={}){var i;let o=(n=ge(n,Ri))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Xt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ge.MOCK_USER;else{a=rI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ge(l)}n._authCredentials=new Sm(new id(a,c))}}var tt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Te=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new In(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},In=class n extends tt{constructor(e,t,r){super(e,t,ms(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Te(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uh(n,e,...t){if(n=xe(n),e_("collection","path",e),n instanceof Ri){let r=pe.fromString(e,...t);return o0(r),new In(n,null,r)}{if(!(n instanceof Te||n instanceof In))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return o0(r),new In(n.firestore,null,r)}}function n_(n,e){if(n=ge(n,Ri),e_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tt(n,null,function(r){return new en(pe.emptyPath(),r)}(e))}function Is(n,e,...t){if(n=xe(n),arguments.length===1&&(e=od.newId()),e_("doc","path",e),n instanceof Ri){let r=pe.fromString(e,...t);return i0(r),new Te(n,null,new U(r))}{if(!(n instanceof Te||n instanceof In))throw new P(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return i0(r),new Te(n.firestore,n instanceof In?n.converter:null,new U(r))}}function ch(n,e){return n=xe(n),e=xe(e),(n instanceof Te||n instanceof In)&&(e instanceof Te||e instanceof In)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lh(n,e){return n=xe(n),e=xe(e),n instanceof tt&&e instanceof tt&&n.firestore===e.firestore&&bu(n._query,e._query)&&n.converter===e.converter}var Gd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _u(this,"async_queue_retry"),this.Vu=()=>{let r=rd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=rd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Qe;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return x(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ur(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw je("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Qy.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&H()}verifyOperationInProgress(){}wu(){return x(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function dv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var hv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var FS=-1,Pe=class extends Ri{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return x(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gd(e),this._firestoreClient=void 0,yield e}})}};function LS(n,e){let t=typeof n=="object"?n:Ws(),r=typeof n=="string"?n:e||"(default)",i=rf(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=nI("firestore");o&&ah(i,...o)}return i}function nt(n){if(n._terminated)throw new P(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VS(n),n._firestoreClient}function VS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Vm(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function r_(n,e){Xt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return jS(n,Yv.provider,{build:r=>new qd(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function i_(n){return x(this,null,function*(){Xt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();jS(n,Yv.provider,{build:t=>new sv(t,e.cacheSizeBytes)})})}function jS(n,e,t){if((n=ge(n,Pe))._firestoreClient||n._terminated)throw new P(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},VS(n)}function o_(n){if(n._initialized&&!n._terminated)throw new P(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Qe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(r){return x(this,null,function*(){if(!xr.D())return Promise.resolve();let i=r+"main";yield xr.delete(i)})}(Vv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function s_(n){return function(t){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return sL(yield Xv(t),r)})),r.promise}(nt(n=ge(n,Pe)))}function a_(n){return _L(nt(n=ge(n,Pe)))}function u_(n){return wL(nt(n=ge(n,Pe)))}function c_(n,e){let t=nt(n=ge(n,Pe)),r=new hv;return CL(t,n._databaseId,e,r),r}function l_(n,e){return TL(nt(n=ge(n,Pe)),e).then(t=>t?new tt(n,null,t.query):null)}var Tn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n($e.fromBase64String(e))}catch(t){throw new P(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n($e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var nn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xn=class{constructor(e){this._methodName=e}};var xi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}};var Iu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var bL=/^__.*__$/,fv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new tn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fr(e,this.data,t,this.fieldTransforms)}},Wd=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function US(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Kd=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(US(this.Cu)&&bL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},pv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Au(e)}Qu(e,t,r,i=!1){return new Kd({Cu:e,methodName:t,qu:r,path:Ue.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ki(n){let e=n._freezeSettings(),t=Au(n._databaseId);return new pv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);f_("Data must be an object, but it was:",s,r);let a=HS(r,s),c,l;if(o.merge)c=new Pt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=_v(e,p,t);if(!s.contains(m))throw new P(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zS(h,m)||h.push(m)}c=new Pt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new fv(new dt(a),c,l)}var Eu=class n extends Xn{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function BS(n,e,t){return new Kd({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var gv=class n extends Xn{_toFieldTransform(e){return new bi(e.path,new kr)}isEqual(e){return e instanceof n}},mv=class n extends Xn{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=BS(this,e,!0),r=this.Ku.map(o=>Oi(o,t)),i=new Zn(r);return new bi(e.path,i)}isEqual(e){return e instanceof n&&nf(this.Ku,e.Ku)}},yv=class n extends Xn{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=BS(this,e,!0),r=this.Ku.map(o=>Oi(o,t)),i=new Jn(r);return new bi(e.path,i)}isEqual(e){return e instanceof n&&nf(this.Ku,e.Ku)}},vv=class n extends Xn{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Or(e.serializer,L0(e.serializer,this.$u));return new bi(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function d_(n,e,t,r){let i=n.Qu(1,e,t);f_("Data must be an object, but it was:",i,r);let o=[],s=dt.empty();Pi(r,(c,l)=>{let h=p_(e,c,t);l=xe(l);let p=i.Nu(h);if(l instanceof Eu)o.push(h);else{let m=Oi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Pt(o);return new Wd(s,a,i.fieldTransforms)}function h_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[_v(e,r,t)],c=[i];if(o.length%2!=0)throw new P(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(_v(e,o[m])),c.push(o[m+1]);let l=[],h=dt.empty();for(let m=a.length-1;m>=0;--m)if(!zS(l,a[m])){let v=a[m],b=c[m];b=xe(b);let M=s.Nu(v);if(b instanceof Eu)l.push(v);else{let N=Oi(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Pt(l);return new Wd(h,p,s.fieldTransforms)}function $S(n,e,t,r=!1){return Oi(t,n.Qu(r?4:3,e))}function Oi(n,e){if(qS(n=xe(n)))return f_("Unsupported field value:",e,n),HS(n,e);if(n instanceof Xn)return function(r,i){if(!US(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Oi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ne.fromDate(r);return{timestampValue:is(i.serializer,o)}}if(r instanceof Ne){let o=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:is(i.serializer,o)}}if(r instanceof xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tn)return{bytesValue:W0(i.serializer,r._byteString)};if(r instanceof Te){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ov(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Iu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return kv(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${sh(r)}`)}(n,e)}function HS(n,e){let t={};return _0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(n,(r,i)=>{let o=Oi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function qS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ne||n instanceof xi||n instanceof Tn||n instanceof Te||n instanceof Xn||n instanceof Iu)}function f_(n,e,t){if(!qS(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=sh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function _v(n,e,t){if((e=xe(e))instanceof nn)return e._internalPath;if(typeof e=="string")return p_(n,e);throw Qd("Field path arguments must be of type string or ",n,!1,void 0,t)}var SL=new RegExp("[~\\*/\\[\\]]");function p_(n,e,t){if(e.search(SL)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nn(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(R.INVALID_ARGUMENT,a+n+c)}function zS(n,e){return n.some(t=>t.isEqual(e))}var Mi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(hh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},wv=class extends Mi{data(){return super.data()}};function hh(n,e){return typeof e=="string"?p_(n,e):e instanceof nn?e._internalPath:e._delegate._internalPath}function GS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Du=class{},Ni=class extends Du{};function bn(n,e,...t){let r=[];e instanceof Du&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Iv).length,a=o.filter(c=>c instanceof Yd).length;if(s>1||s>0&&a>0)throw new P(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Yd=class n extends Ni{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return KS(e._query,t),new tt(e.firestore,e.converter,Zm(e._query,t))}_parse(e){let t=ki(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){a0(p,h);let v=[];for(let b of p)v.push(s0(c,o,b));m={arrayValue:{values:v}}}else m=s0(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||a0(p,h),m=$S(a,s,p,h==="in"||h==="not-in");return le.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function g_(n,e,t){let r=e,i=hh("where",n);return Yd._create(i,r,t)}var Iv=class n extends Du{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)KS(s,c),s=Zm(s,c)}(e._query,t),new tt(e.firestore,e.converter,Zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ev=class n extends Ni{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ci(o,s)}(e._query,this._field,this._direction);return new tt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new en(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function m_(n,e="asc"){let t=e,r=hh("orderBy",n);return Ev._create(r,t)}var Zd=class n extends Ni{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new tt(e.firestore,e.converter,gd(e._query,this._limit,this._limitType))}};function y_(n){return OS("limit",n),Zd._create("limit",n,"F")}function v_(n){return OS("limitToLast",n),Zd._create("limitToLast",n,"L")}var Jd=class n extends Ni{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=WS(e,this.type,this._docOrFields,this._inclusive);return new tt(e.firestore,e.converter,function(i,o){return new en(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function __(...n){return Jd._create("startAt",n,!0)}function w_(...n){return Jd._create("startAfter",n,!1)}var Xd=class n extends Ni{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=WS(e,this.type,this._docOrFields,this._inclusive);return new tt(e.firestore,e.converter,function(i,o){return new en(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function I_(...n){return Xd._create("endBefore",n,!1)}function E_(...n){return Xd._create("endAt",n,!0)}function WS(n,e,t,r){if(t[0]=xe(t[0]),t[0]instanceof Mi)return function(o,s,a,c,l){if(!c)throw new P(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Yo(o))if(p.field.isKeyField())h.push(Di(s,c.key));else{let m=c.data.field(p.field);if(th(m))throw new P(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Dn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ki(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!Nv(s)&&M.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(pe.fromString(M));if(!U.isDocumentKey(N))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let V=new U(N);v.push(Di(a,V))}else{let N=$S(c,l,M);v.push(N)}}return new Dn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function s0(n,e,t){if(typeof(t=xe(t))=="string"){if(t==="")throw new P(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nv(e)&&t.indexOf("/")!==-1)throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(pe.fromString(t));if(!U.isDocumentKey(r))throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Di(n,new U(r))}if(t instanceof Te)return Di(n,t._key);throw new P(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(t)}.`)}function a0(n,e){if(!Array.isArray(n)||n.length===0)throw new P(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KS(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ps=class{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Pi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Re(s.doubleValue));return new Iu(o)}convertGeoPoint(e){return new xi(Re(e.latitude),Re(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=xv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){let t=Yn(e);return new Ne(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=pe.fromString(e);G(iS(r));let i=new Nr(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(t)||je(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function fh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Dv=class extends ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,t)}};var Qn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ht=class extends Mi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ar(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ar=class extends Ht{data(e={}){return super.data(e)}},rn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ar(this._firestore,this._userDataWriter,r.key,r,new Qn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ar(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ar(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:AL(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function AL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function ph(n,e){return n instanceof Ht&&e instanceof Ht?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rn&&e instanceof rn&&n._firestore===e._firestore&&lh(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function D_(n){n=ge(n,Te);let e=ge(n.firestore,Pe);return NS(nt(e),n._key).then(t=>N_(e,n,t))}var er=class extends ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,t)}};function C_(n){n=ge(n,Te);let e=ge(n.firestore,Pe),t=nt(e),r=new er(e);return IL(t,n._key).then(i=>new Ht(e,r,n._key,i,new Qn(i!==null&&i.hasLocalMutations,!0),n.converter))}function T_(n){n=ge(n,Te);let e=ge(n.firestore,Pe);return NS(nt(e),n._key,{source:"server"}).then(t=>N_(e,n,t))}function b_(n){n=ge(n,tt);let e=ge(n.firestore,Pe),t=nt(e),r=new er(e);return GS(n._query),PS(t,n._query).then(i=>new rn(e,r,n,i))}function S_(n){n=ge(n,tt);let e=ge(n.firestore,Pe),t=nt(e),r=new er(e);return EL(t,n._query).then(i=>new rn(e,r,n,i))}function A_(n){n=ge(n,tt);let e=ge(n.firestore,Pe),t=nt(e),r=new er(e);return PS(t,n._query,{source:"server"}).then(i=>new rn(e,r,n,i))}function gh(n,e,t){n=ge(n,Te);let r=ge(n.firestore,Pe),i=fh(n.converter,e,t);return Es(r,[dh(ki(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Le.none())])}function mh(n,e,t,...r){n=ge(n,Te);let i=ge(n.firestore,Pe),o=ki(i),s;return s=typeof(e=xe(e))=="string"||e instanceof nn?h_(o,"updateDoc",n._key,e,t,r):d_(o,"updateDoc",n._key,e),Es(i,[s.toMutation(n._key,Le.exists(!0))])}function R_(n){return Es(ge(n.firestore,Pe),[new Lr(n._key,Le.none())])}function x_(n,e){let t=ge(n.firestore,Pe),r=Is(n),i=fh(n.converter,e);return Es(t,[dh(ki(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Le.exists(!1))]).then(()=>r)}function yh(n,...e){var t,r,i;n=xe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||dv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(dv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Te)l=ge(n.firestore,Pe),h=ms(n._key.path),c={next:p=>{e[s]&&e[s](N_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ge(n,tt);l=ge(p.firestore,Pe),h=p._query;let m=new er(l);c={next:v=>{e[s]&&e[s](new rn(l,m,p,v))},error:e[s+1],complete:e[s+2]},GS(n._query)}return function(m,v,b,M){let N=new hs(M),V=new wu(v,N,b);return m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return $v(yield fs(m),V)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Hv(yield fs(m),V)}))}}(nt(l),h,a,c)}function M_(n,e){return DL(nt(n=ge(n,Pe)),dv(e)?e:{next:e})}function Es(n,e){return function(r,i){let o=new Qe;return r.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return nL(yield Xv(r),i,o)})),o.promise}(nt(n),e)}function N_(n,e,t){let r=t.docs.get(e._key),i=new er(n);return new Ht(n,i,e._key,r,new Qn(t.hasPendingWrites,t.fromCache),e.converter)}var RL={maxAttempts:5};var eh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ki(e)}set(e,t,r){this._verifyNotCommitted();let i=br(e,this._firestore),o=fh(i.converter,t,r),s=dh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Le.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=br(e,this._firestore),s;return s=typeof(t=xe(t))=="string"||t instanceof nn?h_(this._dataReader,"WriteBatch.update",o._key,t,r,i):d_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Le.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=br(e,this._firestore);return this._mutations=this._mutations.concat(new Lr(t._key,Le.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function br(n,e){if((n=xe(n)).firestore!==e)throw new P(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Cv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ki(t)}get(t){let r=br(t,this._firestore),i=new Dv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return H();let s=o[0];if(s.isFoundDocument())return new Mi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Mi(this._firestore,i,r._key,null,r.converter);throw H()})}set(t,r,i){let o=br(t,this._firestore),s=fh(o.converter,r,i),a=dh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=br(t,this._firestore),a;return a=typeof(r=xe(r))=="string"||r instanceof nn?h_(this._dataReader,"Transaction.update",s._key,r,i,o):d_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=br(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=br(e,this._firestore),r=new er(this._firestore);return super.get(e).then(i=>new Ht(this._firestore,r,t._key,i._document,new Qn(!1,!1),t.converter))}};function P_(n,e,t){n=ge(n,Pe);let r=Object.assign(Object.assign({},RL),t);return function(o){if(o.maxAttempts<1)throw new P(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Qe;return o.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let l=yield vL(o);new cv(o.asyncQueue,l,a,s,c).au()})),c.promise}(nt(n),i=>e(new Cv(n,i)),r)}function k_(){return new Eu("deleteField")}function O_(){return new gv("serverTimestamp")}function F_(...n){return new mv("arrayUnion",n)}function L_(...n){return new yv("arrayRemove",n)}function V_(n){return new vv("increment",n)}(function(e,t=!0){(function(i){gs=i})(sI),Gs(new Gr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Pe(new Am(r.getProvider("auth-internal")),new Nm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),at(ob,"4.7.3",e),at(ob,"4.7.3","esm2017")})();var xL="@firebase/firestore-compat",ML="0.3.38";function q_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QS(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function YS(){if(!w0())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var vh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return YS(),new n(Tn.fromBase64String(e))}static fromUint8Array(e){return QS(),new n(Tn.fromUint8Array(e))}toBase64(){return YS(),this._delegate.toBase64()}toUint8Array(){return QS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function j_(n){return NL(n,["next","error","complete"])}function NL(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var U_=class{enableIndexedDbPersistence(e,t){return r_(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return i_(e._delegate)}clearIndexedDbPersistence(e){return o_(e._delegate)}},_h=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){ah(this._delegate,e,t,r)}enableNetwork(){return a_(this._delegate)}disableNetwork(){return u_(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,t_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return s_(this._delegate)}onSnapshotsInSync(e){return M_(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ts(this,uh(this._delegate,e))}catch(t){throw Et(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sn(this,Is(this._delegate,e))}catch(t){throw Et(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ji(this,n_(this._delegate,e))}catch(t){throw Et(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return P_(this._delegate,t=>e(new wh(this,t)))}batch(){return nt(this._delegate),new Ih(new eh(this._delegate,e=>Es(this._delegate,e)))}loadBundle(e){return c_(this._delegate,e)}namedQuery(e){return l_(this._delegate,e).then(t=>t?new ji(this,t):null)}},Ds=class extends ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new vh(new Tn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Sn.forKey(t,this.firestore,null)}};function PL(n){Tv(n)}var wh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ds(e)}get(e){let t=Fi(e);return this._delegate.get(t).then(r=>new Li(this._firestore,new Ht(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Fi(e);return r?(q_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Fi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Fi(e);return this._delegate.delete(t),this}},Ih=class{constructor(e){this._delegate=e}set(e,t,r){let i=Fi(e);return r?(q_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Fi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Fi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Cs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ar(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ds(e),t),i.set(t,o)),o}};Cs.INSTANCES=new WeakMap;var Sn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ds(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Te(t._delegate,r,new U(e)))}static forKey(e,t,r){return new n(t,new Te(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ts(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ts(this.firestore,uh(this._delegate,e))}catch(t){throw Et(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=xe(e),e instanceof Te?ch(this._delegate,e):!1}set(e,t){t=q_("DocumentReference.set",t);try{return t?gh(this._delegate,e,t):gh(this._delegate,e)}catch(r){throw Et(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?mh(this._delegate,e):mh(this._delegate,e,t,...r)}catch(i){throw Et(i,"updateDoc()","DocumentReference.update()")}}delete(){return R_(this._delegate)}onSnapshot(...e){let t=ZS(e),r=JS(e,i=>new Li(this.firestore,new Ht(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yh(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=C_(this._delegate):e?.source==="server"?t=T_(this._delegate):t=D_(this._delegate),t.then(r=>new Li(this.firestore,new Ht(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Cs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Et(n,e,t){return n.message=n.message.replace(e,t),n}function ZS(n){for(let e of n)if(typeof e=="object"&&!j_(e))return e;return{}}function JS(n,e){var t,r;let i;return j_(n[0])?i=n[0]:j_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Li=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ph(this._delegate,e._delegate)}},Vi=class extends Li{data(e){let t=this._delegate.data(e);return this._delegate._converter||u0(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ji=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ds(e)}where(e,t,r){try{return new n(this.firestore,bn(this._delegate,g_(e,t,r)))}catch(i){throw Et(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,bn(this._delegate,m_(e,t)))}catch(r){throw Et(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,bn(this._delegate,y_(e)))}catch(t){throw Et(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,bn(this._delegate,v_(e)))}catch(t){throw Et(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,bn(this._delegate,__(...e)))}catch(t){throw Et(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,bn(this._delegate,w_(...e)))}catch(t){throw Et(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,bn(this._delegate,I_(...e)))}catch(t){throw Et(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,bn(this._delegate,E_(...e)))}catch(t){throw Et(t,"endAt()","Query.endAt()")}}isEqual(e){return lh(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=S_(this._delegate):e?.source==="server"?t=A_(this._delegate):t=b_(this._delegate),t.then(r=>new xu(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=ZS(e),r=JS(e,i=>new xu(this.firestore,new rn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yh(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Cs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},B_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},xu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new B_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vi(this._firestore,r))})}isEqual(e){return ph(this._delegate,e._delegate)}},Ts=class n extends ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Sn(this.firestore,e):null}doc(e){try{return e===void 0?new Sn(this.firestore,Is(this._delegate)):new Sn(this.firestore,Is(this._delegate,e))}catch(t){throw Et(t,"doc()","CollectionReference.doc()")}}add(e){return x_(this._delegate,e).then(t=>new Sn(this.firestore,t))}isEqual(e){return ch(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Cs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Fi(n){return ge(n,Te)}var $_=class n{constructor(...e){this._delegate=new nn(...e)}static documentId(){return new n(Ue.keyField().canonicalString())}isEqual(e){return e=xe(e),e instanceof nn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var H_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=O_();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=k_();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=F_(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=L_(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=V_(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var kL={Firestore:_h,GeoPoint:xi,Timestamp:Ne,Blob:vh,Transaction:wh,WriteBatch:Ih,DocumentReference:Sn,DocumentSnapshot:Li,Query:ji,QueryDocumentSnapshot:Vi,QuerySnapshot:xu,CollectionReference:Ts,FieldPath:$_,FieldValue:H_,setLogLevel:PL,CACHE_SIZE_UNLIMITED:FS};function OL(n,e){n.INTERNAL.registerComponent(new Gr("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},kL)))}function FL(n){OL(n,(e,t)=>new _h(e,t,new U_)),n.registerVersion(xL,ML)}FL(sn);function LL(n,e=Zs){return new ce(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function XS(n,e){return LL(n,e)}function VL(n,e){return XS(n,e).pipe(Jr(void 0),ea(),J(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function W_(n,e){return XS(n,e).pipe(J(t=>({payload:t,type:"query"})))}var Eh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=nA(r,t);return new Ch(i,o,this.afs)}snapshotChanges(){return VL(this.ref,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return this.snapshotChanges().pipe(J(({payload:t})=>e.idField?Se(q({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return ye(this.ref.get(e)).pipe(_t)}};function Dh(n,e){return W_(n,e).pipe(Jr(void 0),ea(),J(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function eA(n,e,t){return Dh(n,t).pipe(Zr((r,i)=>jL(r,i.map(o=>o.payload),e),[]),Rf(),J(r=>r.map(i=>({type:i.type,payload:i}))))}function jL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=UL(n,r))}),n}function z_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function UL(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return z_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return z_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return z_(n,e.oldIndex,1);break}return n}function tA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Ch=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Dh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(J(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Jr(void 0),ea(),et(([r,i])=>i.length>0||!r),J(([,r])=>r),_t)}auditTrail(e){return this.stateChanges(e).pipe(Zr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=tA(e);return eA(this.query,t,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return W_(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.payload.docs.map(r=>e.idField?Se(q({},r.data()),{[e.idField]:r.id}):r.data())),_t)}get(e){return ye(this.query.get(e)).pipe(_t)}add(e){return this.ref.add(e)}doc(e){return new Eh(this.ref.doc(e),this.afs)}},G_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Dh(this.query,this.afs.schedulers.outsideAngular).pipe(_t):Dh(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.filter(r=>e.indexOf(r.type)>-1)),et(t=>t.length>0),_t)}auditTrail(e){return this.stateChanges(e).pipe(Zr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=tA(e);return eA(this.query,t,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return W_(this.query,this.afs.schedulers.outsideAngular).pipe(J(r=>r.payload.docs.map(i=>e.idField?q({[e.idField]:i.id},i.data()):i.data())),_t)}get(e){return ye(this.query.get(e)).pipe(_t)}},BL=new z("angularfire2.enableFirestorePersistence"),$L=new z("angularfire2.firestore.persistenceSettings"),HL=new z("angularfire2.firestore.settings"),qL=new z("angularfire2.firestore.use-emulator");function nA(n,e=t=>t){return{query:e(n),ref:n}}var rA=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,M,N,V,$){this.schedulers=c;let O=zl(t,a,r),Q=h;p&&pm(O,a,m,b,M,N,v,V),[this.firestore,this.persistenceEnabled$]=Gl(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let X=a.runOutsideAngular(()=>O.firestore());if(o&&X.settings(o),Q&&X.useEmulator(...Q),i&&!ui(s)){let Y=()=>{try{return ye(X.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Z(!1)}};return[X,a.runOutsideAngular(Y)]}else return[X,Z(!1)]},[o,Q,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=nA(i,r),a=this.schedulers.ngZone.run(()=>o);return new Ch(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new G_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Eh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(Hl),B(ql,8),B(BL,8),B(HL,8),B(vt),B(he),B(mn),B($L,8),B(qL,8),B(nb,8),B(um,8),B(cm,8),B(lm,8),B(dm,8),B(hm,8),B(fm,8),B(Zt,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Th=class n{firestore=F(rA);constructor(){}agregarPelicula(e){this.firestore.collection("peliculas").add(q({},e))}traerPeliculas(){return this.firestore.collection("peliculas").valueChanges()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var bh=class n{baseDeDatos=F(Th);pelicula=[];detallePelicula;constructor(){this.baseDeDatos.traerPeliculas().subscribe(e=>{this.pelicula=e})}obtenerDetallePelicula(e){this.detallePelicula=e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_o({type:n,selectors:[["app-peliculas"]],standalone:!0,features:[Eo],decls:2,vars:0,template:function(t,r){t&1&&(ll(0,"p"),yC(1,"peliculas works!"),dl())}})};var iA=[{path:"",redirectTo:"peliculas",pathMatch:"full"},{path:"peliculas",component:bh}];var oA="auth",Mu=class{constructor(e){return e}},Nu=class{constructor(){return Ha(oA)}};var K_=new z("angularfire2.auth-instances");function zV(n,e){let t=Ul(oA,n,e);return t&&new Mu(t)}function GV(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Mu(r)}}var WV={provide:Nu,deps:[[new ct,K_]]},KV={provide:Mu,useFactory:zV,deps:[[new ct,K_],Gn]};function sA(n,...e){return at("angularfire",zn.full,"auth"),fn([KV,WV,{provide:K_,useFactory:GV(n),multi:!0,deps:[he,ut,mn,fi,[new ct,Zt],...e]}])}var aA=Lo(of,!0);var Pu=class{constructor(e){return e}},uA="firestore",Q_=class{constructor(){return Ha(uA)}};var Y_=new z("angularfire2.firestore-instances");function QV(n,e){let t=Ul(uA,n,e);return t&&new Pu(t)}function YV(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Pu(r)}}var ZV={provide:Q_,deps:[[new ct,Y_]]},JV={provide:Pu,useFactory:QV,deps:[[new ct,Y_],Gn]};function cA(n,...e){return at("angularfire",zn.full,"fst"),fn([JV,ZV,{provide:Y_,useFactory:YV(n),multi:!0,deps:[he,ut,mn,fi,[new ct,Nu],[new ct,Zt],...e]}])}var lA=Lo(LS,!0);var dA={projectId:"simulacro-parcial-56b41",appId:"1:709601315537:web:c78132914c55078bfb13f0",storageBucket:"simulacro-parcial-56b41.appspot.com",apiKey:"AIzaSyD7LQ49kgYauQDGQmKhYDuDAHd-COODZDs",authDomain:"simulacro-parcial-56b41.firebaseapp.com",messagingSenderId:"709601315537"};var hA={providers:[EC({eventCoalescing:!0}),PT(iA),UT(()=>BT(dA)),sA(()=>aA()),cA(()=>lA())]};var Sh=class n{title="simulacro-parcial";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_o({type:n,selectors:[["app-root"]],standalone:!0,features:[Eo],decls:1,vars:0,template:function(t,r){t&1&&ga(0,"router-outlet")},dependencies:[Wg,VT]})};HC(Sh,hA).catch(n=>console.error(n));
